(self["webpackChunk"]=self["webpackChunk"]||[]).push([[13],{69539:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});var int_1=__webpack_require__(30418);function readInt16BE(array,offset){if(offset===void 0){offset=0}return(array[offset+0]<<8|array[offset+1])<<16>>16}exports.readInt16BE=readInt16BE;function readUint16BE(array,offset){if(offset===void 0){offset=0}return(array[offset+0]<<8|array[offset+1])>>>0}exports.readUint16BE=readUint16BE;function readInt16LE(array,offset){if(offset===void 0){offset=0}return(array[offset+1]<<8|array[offset])<<16>>16}exports.readInt16LE=readInt16LE;function readUint16LE(array,offset){if(offset===void 0){offset=0}return(array[offset+1]<<8|array[offset])>>>0}exports.readUint16LE=readUint16LE;function writeUint16BE(value,out,offset){if(out===void 0){out=new Uint8Array(2)}if(offset===void 0){offset=0}out[offset+0]=value>>>8;out[offset+1]=value>>>0;return out}exports.writeUint16BE=writeUint16BE;exports.writeInt16BE=writeUint16BE;function writeUint16LE(value,out,offset){if(out===void 0){out=new Uint8Array(2)}if(offset===void 0){offset=0}out[offset+0]=value>>>0;out[offset+1]=value>>>8;return out}exports.writeUint16LE=writeUint16LE;exports.writeInt16LE=writeUint16LE;function readInt32BE(array,offset){if(offset===void 0){offset=0}return array[offset]<<24|array[offset+1]<<16|array[offset+2]<<8|array[offset+3]}exports.readInt32BE=readInt32BE;function readUint32BE(array,offset){if(offset===void 0){offset=0}return(array[offset]<<24|array[offset+1]<<16|array[offset+2]<<8|array[offset+3])>>>0}exports.readUint32BE=readUint32BE;function readInt32LE(array,offset){if(offset===void 0){offset=0}return array[offset+3]<<24|array[offset+2]<<16|array[offset+1]<<8|array[offset]}exports.readInt32LE=readInt32LE;function readUint32LE(array,offset){if(offset===void 0){offset=0}return(array[offset+3]<<24|array[offset+2]<<16|array[offset+1]<<8|array[offset])>>>0}exports.readUint32LE=readUint32LE;function writeUint32BE(value,out,offset){if(out===void 0){out=new Uint8Array(4)}if(offset===void 0){offset=0}out[offset+0]=value>>>24;out[offset+1]=value>>>16;out[offset+2]=value>>>8;out[offset+3]=value>>>0;return out}exports.writeUint32BE=writeUint32BE;exports.writeInt32BE=writeUint32BE;function writeUint32LE(value,out,offset){if(out===void 0){out=new Uint8Array(4)}if(offset===void 0){offset=0}out[offset+0]=value>>>0;out[offset+1]=value>>>8;out[offset+2]=value>>>16;out[offset+3]=value>>>24;return out}exports.writeUint32LE=writeUint32LE;exports.writeInt32LE=writeUint32LE;function readInt64BE(array,offset){if(offset===void 0){offset=0}var hi=readInt32BE(array,offset);var lo=readInt32BE(array,offset+4);return hi*4294967296+lo-(lo>>31)*4294967296}exports.readInt64BE=readInt64BE;function readUint64BE(array,offset){if(offset===void 0){offset=0}var hi=readUint32BE(array,offset);var lo=readUint32BE(array,offset+4);return hi*4294967296+lo}exports.readUint64BE=readUint64BE;function readInt64LE(array,offset){if(offset===void 0){offset=0}var lo=readInt32LE(array,offset);var hi=readInt32LE(array,offset+4);return hi*4294967296+lo-(lo>>31)*4294967296}exports.readInt64LE=readInt64LE;function readUint64LE(array,offset){if(offset===void 0){offset=0}var lo=readUint32LE(array,offset);var hi=readUint32LE(array,offset+4);return hi*4294967296+lo}exports.readUint64LE=readUint64LE;function writeUint64BE(value,out,offset){if(out===void 0){out=new Uint8Array(8)}if(offset===void 0){offset=0}writeUint32BE(value/4294967296>>>0,out,offset);writeUint32BE(value>>>0,out,offset+4);return out}exports.writeUint64BE=writeUint64BE;exports.writeInt64BE=writeUint64BE;function writeUint64LE(value,out,offset){if(out===void 0){out=new Uint8Array(8)}if(offset===void 0){offset=0}writeUint32LE(value>>>0,out,offset);writeUint32LE(value/4294967296>>>0,out,offset+4);return out}exports.writeUint64LE=writeUint64LE;exports.writeInt64LE=writeUint64LE;function readUintBE(bitLength,array,offset){if(offset===void 0){offset=0}if(bitLength%8!==0){throw new Error("readUintBE supports only bitLengths divisible by 8")}if(bitLength/8>array.length-offset){throw new Error("readUintBE: array is too short for the given bitLength")}var result=0;var mul=1;for(var i=bitLength/8+offset-1;i>=offset;i--){result+=array[i]*mul;mul*=256}return result}exports.readUintBE=readUintBE;function readUintLE(bitLength,array,offset){if(offset===void 0){offset=0}if(bitLength%8!==0){throw new Error("readUintLE supports only bitLengths divisible by 8")}if(bitLength/8>array.length-offset){throw new Error("readUintLE: array is too short for the given bitLength")}var result=0;var mul=1;for(var i=offset;i<offset+bitLength/8;i++){result+=array[i]*mul;mul*=256}return result}exports.readUintLE=readUintLE;function writeUintBE(bitLength,value,out,offset){if(out===void 0){out=new Uint8Array(bitLength/8)}if(offset===void 0){offset=0}if(bitLength%8!==0){throw new Error("writeUintBE supports only bitLengths divisible by 8")}if(!int_1.isSafeInteger(value)){throw new Error("writeUintBE value must be an integer")}var div=1;for(var i=bitLength/8+offset-1;i>=offset;i--){out[i]=value/div&255;div*=256}return out}exports.writeUintBE=writeUintBE;function writeUintLE(bitLength,value,out,offset){if(out===void 0){out=new Uint8Array(bitLength/8)}if(offset===void 0){offset=0}if(bitLength%8!==0){throw new Error("writeUintLE supports only bitLengths divisible by 8")}if(!int_1.isSafeInteger(value)){throw new Error("writeUintLE value must be an integer")}var div=1;for(var i=offset;i<offset+bitLength/8;i++){out[i]=value/div&255;div*=256}return out}exports.writeUintLE=writeUintLE;function readFloat32BE(array,offset){if(offset===void 0){offset=0}var view=new DataView(array.buffer,array.byteOffset,array.byteLength);return view.getFloat32(offset)}exports.readFloat32BE=readFloat32BE;function readFloat32LE(array,offset){if(offset===void 0){offset=0}var view=new DataView(array.buffer,array.byteOffset,array.byteLength);return view.getFloat32(offset,true)}exports.readFloat32LE=readFloat32LE;function readFloat64BE(array,offset){if(offset===void 0){offset=0}var view=new DataView(array.buffer,array.byteOffset,array.byteLength);return view.getFloat64(offset)}exports.readFloat64BE=readFloat64BE;function readFloat64LE(array,offset){if(offset===void 0){offset=0}var view=new DataView(array.buffer,array.byteOffset,array.byteLength);return view.getFloat64(offset,true)}exports.readFloat64LE=readFloat64LE;function writeFloat32BE(value,out,offset){if(out===void 0){out=new Uint8Array(4)}if(offset===void 0){offset=0}var view=new DataView(out.buffer,out.byteOffset,out.byteLength);view.setFloat32(offset,value);return out}exports.writeFloat32BE=writeFloat32BE;function writeFloat32LE(value,out,offset){if(out===void 0){out=new Uint8Array(4)}if(offset===void 0){offset=0}var view=new DataView(out.buffer,out.byteOffset,out.byteLength);view.setFloat32(offset,value,true);return out}exports.writeFloat32LE=writeFloat32LE;function writeFloat64BE(value,out,offset){if(out===void 0){out=new Uint8Array(8)}if(offset===void 0){offset=0}var view=new DataView(out.buffer,out.byteOffset,out.byteLength);view.setFloat64(offset,value);return out}exports.writeFloat64BE=writeFloat64BE;function writeFloat64LE(value,out,offset){if(out===void 0){out=new Uint8Array(8)}if(offset===void 0){offset=0}var view=new DataView(out.buffer,out.byteOffset,out.byteLength);view.setFloat64(offset,value,true);return out}exports.writeFloat64LE=writeFloat64LE},54420:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});var binary_1=__webpack_require__(69539);var wipe_1=__webpack_require__(28601);var ROUNDS=20;function core(out,input,key){var j0=1634760805;var j1=857760878;var j2=2036477234;var j3=1797285236;var j4=key[3]<<24|key[2]<<16|key[1]<<8|key[0];var j5=key[7]<<24|key[6]<<16|key[5]<<8|key[4];var j6=key[11]<<24|key[10]<<16|key[9]<<8|key[8];var j7=key[15]<<24|key[14]<<16|key[13]<<8|key[12];var j8=key[19]<<24|key[18]<<16|key[17]<<8|key[16];var j9=key[23]<<24|key[22]<<16|key[21]<<8|key[20];var j10=key[27]<<24|key[26]<<16|key[25]<<8|key[24];var j11=key[31]<<24|key[30]<<16|key[29]<<8|key[28];var j12=input[3]<<24|input[2]<<16|input[1]<<8|input[0];var j13=input[7]<<24|input[6]<<16|input[5]<<8|input[4];var j14=input[11]<<24|input[10]<<16|input[9]<<8|input[8];var j15=input[15]<<24|input[14]<<16|input[13]<<8|input[12];var x0=j0;var x1=j1;var x2=j2;var x3=j3;var x4=j4;var x5=j5;var x6=j6;var x7=j7;var x8=j8;var x9=j9;var x10=j10;var x11=j11;var x12=j12;var x13=j13;var x14=j14;var x15=j15;for(var i=0;i<ROUNDS;i+=2){x0=x0+x4|0;x12^=x0;x12=x12>>>32-16|x12<<16;x8=x8+x12|0;x4^=x8;x4=x4>>>32-12|x4<<12;x1=x1+x5|0;x13^=x1;x13=x13>>>32-16|x13<<16;x9=x9+x13|0;x5^=x9;x5=x5>>>32-12|x5<<12;x2=x2+x6|0;x14^=x2;x14=x14>>>32-16|x14<<16;x10=x10+x14|0;x6^=x10;x6=x6>>>32-12|x6<<12;x3=x3+x7|0;x15^=x3;x15=x15>>>32-16|x15<<16;x11=x11+x15|0;x7^=x11;x7=x7>>>32-12|x7<<12;x2=x2+x6|0;x14^=x2;x14=x14>>>32-8|x14<<8;x10=x10+x14|0;x6^=x10;x6=x6>>>32-7|x6<<7;x3=x3+x7|0;x15^=x3;x15=x15>>>32-8|x15<<8;x11=x11+x15|0;x7^=x11;x7=x7>>>32-7|x7<<7;x1=x1+x5|0;x13^=x1;x13=x13>>>32-8|x13<<8;x9=x9+x13|0;x5^=x9;x5=x5>>>32-7|x5<<7;x0=x0+x4|0;x12^=x0;x12=x12>>>32-8|x12<<8;x8=x8+x12|0;x4^=x8;x4=x4>>>32-7|x4<<7;x0=x0+x5|0;x15^=x0;x15=x15>>>32-16|x15<<16;x10=x10+x15|0;x5^=x10;x5=x5>>>32-12|x5<<12;x1=x1+x6|0;x12^=x1;x12=x12>>>32-16|x12<<16;x11=x11+x12|0;x6^=x11;x6=x6>>>32-12|x6<<12;x2=x2+x7|0;x13^=x2;x13=x13>>>32-16|x13<<16;x8=x8+x13|0;x7^=x8;x7=x7>>>32-12|x7<<12;x3=x3+x4|0;x14^=x3;x14=x14>>>32-16|x14<<16;x9=x9+x14|0;x4^=x9;x4=x4>>>32-12|x4<<12;x2=x2+x7|0;x13^=x2;x13=x13>>>32-8|x13<<8;x8=x8+x13|0;x7^=x8;x7=x7>>>32-7|x7<<7;x3=x3+x4|0;x14^=x3;x14=x14>>>32-8|x14<<8;x9=x9+x14|0;x4^=x9;x4=x4>>>32-7|x4<<7;x1=x1+x6|0;x12^=x1;x12=x12>>>32-8|x12<<8;x11=x11+x12|0;x6^=x11;x6=x6>>>32-7|x6<<7;x0=x0+x5|0;x15^=x0;x15=x15>>>32-8|x15<<8;x10=x10+x15|0;x5^=x10;x5=x5>>>32-7|x5<<7}binary_1.writeUint32LE(x0+j0|0,out,0);binary_1.writeUint32LE(x1+j1|0,out,4);binary_1.writeUint32LE(x2+j2|0,out,8);binary_1.writeUint32LE(x3+j3|0,out,12);binary_1.writeUint32LE(x4+j4|0,out,16);binary_1.writeUint32LE(x5+j5|0,out,20);binary_1.writeUint32LE(x6+j6|0,out,24);binary_1.writeUint32LE(x7+j7|0,out,28);binary_1.writeUint32LE(x8+j8|0,out,32);binary_1.writeUint32LE(x9+j9|0,out,36);binary_1.writeUint32LE(x10+j10|0,out,40);binary_1.writeUint32LE(x11+j11|0,out,44);binary_1.writeUint32LE(x12+j12|0,out,48);binary_1.writeUint32LE(x13+j13|0,out,52);binary_1.writeUint32LE(x14+j14|0,out,56);binary_1.writeUint32LE(x15+j15|0,out,60)}function streamXOR(key,nonce,src,dst,nonceInplaceCounterLength){if(nonceInplaceCounterLength===void 0){nonceInplaceCounterLength=0}if(key.length!==32){throw new Error("ChaCha: key size must be 32 bytes")}if(dst.length<src.length){throw new Error("ChaCha: destination is shorter than source")}var nc;var counterLength;if(nonceInplaceCounterLength===0){if(nonce.length!==8&&nonce.length!==12){throw new Error("ChaCha nonce must be 8 or 12 bytes")}nc=new Uint8Array(16);counterLength=nc.length-nonce.length;nc.set(nonce,counterLength)}else{if(nonce.length!==16){throw new Error("ChaCha nonce with counter must be 16 bytes")}nc=nonce;counterLength=nonceInplaceCounterLength}var block=new Uint8Array(64);for(var i=0;i<src.length;i+=64){core(block,nc,key);for(var j=i;j<i+64&&j<src.length;j++){dst[j]=src[j]^block[j-i]}incrementCounter(nc,0,counterLength)}wipe_1.wipe(block);if(nonceInplaceCounterLength===0){wipe_1.wipe(nc)}return dst}exports.streamXOR=streamXOR;function stream(key,nonce,dst,nonceInplaceCounterLength){if(nonceInplaceCounterLength===void 0){nonceInplaceCounterLength=0}wipe_1.wipe(dst);return streamXOR(key,nonce,dst,dst,nonceInplaceCounterLength)}exports.stream=stream;function incrementCounter(counter,pos,len){var carry=1;while(len--){carry=carry+(counter[pos]&255)|0;counter[pos]=carry&255;carry>>>=8;pos++}if(carry>0){throw new Error("ChaCha: counter overflow")}}},98040:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});var chacha_1=__webpack_require__(54420);var poly1305_1=__webpack_require__(85877);var wipe_1=__webpack_require__(28601);var binary_1=__webpack_require__(69539);var constant_time_1=__webpack_require__(11902);exports.KEY_LENGTH=32;exports.NONCE_LENGTH=12;exports.TAG_LENGTH=16;var ZEROS=new Uint8Array(16);var ChaCha20Poly1305=function(){function ChaCha20Poly1305(key){this.nonceLength=exports.NONCE_LENGTH;this.tagLength=exports.TAG_LENGTH;if(key.length!==exports.KEY_LENGTH){throw new Error("ChaCha20Poly1305 needs 32-byte key")}this._key=new Uint8Array(key)}ChaCha20Poly1305.prototype.seal=function(nonce,plaintext,associatedData,dst){if(nonce.length>16){throw new Error("ChaCha20Poly1305: incorrect nonce length")}var counter=new Uint8Array(16);counter.set(nonce,counter.length-nonce.length);var authKey=new Uint8Array(32);chacha_1.stream(this._key,counter,authKey,4);var resultLength=plaintext.length+this.tagLength;var result;if(dst){if(dst.length!==resultLength){throw new Error("ChaCha20Poly1305: incorrect destination length")}result=dst}else{result=new Uint8Array(resultLength)}chacha_1.streamXOR(this._key,counter,plaintext,result,4);this._authenticate(result.subarray(result.length-this.tagLength,result.length),authKey,result.subarray(0,result.length-this.tagLength),associatedData);wipe_1.wipe(counter);return result};ChaCha20Poly1305.prototype.open=function(nonce,sealed,associatedData,dst){if(nonce.length>16){throw new Error("ChaCha20Poly1305: incorrect nonce length")}if(sealed.length<this.tagLength){return null}var counter=new Uint8Array(16);counter.set(nonce,counter.length-nonce.length);var authKey=new Uint8Array(32);chacha_1.stream(this._key,counter,authKey,4);var calculatedTag=new Uint8Array(this.tagLength);this._authenticate(calculatedTag,authKey,sealed.subarray(0,sealed.length-this.tagLength),associatedData);if(!constant_time_1.equal(calculatedTag,sealed.subarray(sealed.length-this.tagLength,sealed.length))){return null}var resultLength=sealed.length-this.tagLength;var result;if(dst){if(dst.length!==resultLength){throw new Error("ChaCha20Poly1305: incorrect destination length")}result=dst}else{result=new Uint8Array(resultLength)}chacha_1.streamXOR(this._key,counter,sealed.subarray(0,sealed.length-this.tagLength),result,4);wipe_1.wipe(counter);return result};ChaCha20Poly1305.prototype.clean=function(){wipe_1.wipe(this._key);return this};ChaCha20Poly1305.prototype._authenticate=function(tagOut,authKey,ciphertext,associatedData){var h=new poly1305_1.Poly1305(authKey);if(associatedData){h.update(associatedData);if(associatedData.length%16>0){h.update(ZEROS.subarray(associatedData.length%16))}}h.update(ciphertext);if(ciphertext.length%16>0){h.update(ZEROS.subarray(ciphertext.length%16))}var length=new Uint8Array(8);if(associatedData){binary_1.writeUint64LE(associatedData.length,length)}h.update(length);binary_1.writeUint64LE(ciphertext.length,length);h.update(length);var tag=h.digest();for(var i=0;i<tag.length;i++){tagOut[i]=tag[i]}h.clean();wipe_1.wipe(tag);wipe_1.wipe(length)};return ChaCha20Poly1305}();exports.ChaCha20Poly1305=ChaCha20Poly1305},11902:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});function select(subject,resultIfOne,resultIfZero){return~(subject-1)&resultIfOne|subject-1&resultIfZero}exports.select=select;function lessOrEqual(a,b){return(a|0)-(b|0)-1>>>31&1}exports.lessOrEqual=lessOrEqual;function compare(a,b){if(a.length!==b.length){return 0}var result=0;for(var i=0;i<a.length;i++){result|=a[i]^b[i]}return 1&result-1>>>8}exports.compare=compare;function equal(a,b){if(a.length===0||b.length===0){return false}return compare(a,b)!==0}exports.equal=equal},34760:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var __webpack_unused_export__;__webpack_unused_export__={value:true};__webpack_unused_export__=__webpack_unused_export__=exports.T=exports.Xx=__webpack_unused_export__=__webpack_unused_export__=exports._w=exports.aP=exports.KS=__webpack_unused_export__=exports.jQ=void 0;const random_1=__webpack_require__(93571);const sha512_1=__webpack_require__(18241);const wipe_1=__webpack_require__(28601);exports.jQ=64;__webpack_unused_export__=32;exports.KS=64;exports.aP=32;function gf(init){const r=new Float64Array(16);if(init){for(let i=0;i<init.length;i++){r[i]=init[i]}}return r}const _9=new Uint8Array(32);_9[0]=9;const gf0=gf();const gf1=gf([1]);const D=gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]);const D2=gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]);const X=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]);const Y=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);const I=gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function set25519(r,a){for(let i=0;i<16;i++){r[i]=a[i]|0}}function car25519(o){let c=1;for(let i=0;i<16;i++){let v=o[i]+c+65535;c=Math.floor(v/65536);o[i]=v-c*65536}o[0]+=c-1+37*(c-1)}function sel25519(p,q,b){const c=~(b-1);for(let i=0;i<16;i++){const t=c&(p[i]^q[i]);p[i]^=t;q[i]^=t}}function pack25519(o,n){const m=gf();const t=gf();for(let i=0;i<16;i++){t[i]=n[i]}car25519(t);car25519(t);car25519(t);for(let j=0;j<2;j++){m[0]=t[0]-65517;for(let i=1;i<15;i++){m[i]=t[i]-65535-(m[i-1]>>16&1);m[i-1]&=65535}m[15]=t[15]-32767-(m[14]>>16&1);const b=m[15]>>16&1;m[14]&=65535;sel25519(t,m,1-b)}for(let i=0;i<16;i++){o[2*i]=t[i]&255;o[2*i+1]=t[i]>>8}}function verify32(x,y){let d=0;for(let i=0;i<32;i++){d|=x[i]^y[i]}return(1&d-1>>>8)-1}function neq25519(a,b){const c=new Uint8Array(32);const d=new Uint8Array(32);pack25519(c,a);pack25519(d,b);return verify32(c,d)}function par25519(a){const d=new Uint8Array(32);pack25519(d,a);return d[0]&1}function unpack25519(o,n){for(let i=0;i<16;i++){o[i]=n[2*i]+(n[2*i+1]<<8)}o[15]&=32767}function add(o,a,b){for(let i=0;i<16;i++){o[i]=a[i]+b[i]}}function sub(o,a,b){for(let i=0;i<16;i++){o[i]=a[i]-b[i]}}function mul(o,a,b){let v,c,t0=0,t1=0,t2=0,t3=0,t4=0,t5=0,t6=0,t7=0,t8=0,t9=0,t10=0,t11=0,t12=0,t13=0,t14=0,t15=0,t16=0,t17=0,t18=0,t19=0,t20=0,t21=0,t22=0,t23=0,t24=0,t25=0,t26=0,t27=0,t28=0,t29=0,t30=0,b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];v=a[0];t0+=v*b0;t1+=v*b1;t2+=v*b2;t3+=v*b3;t4+=v*b4;t5+=v*b5;t6+=v*b6;t7+=v*b7;t8+=v*b8;t9+=v*b9;t10+=v*b10;t11+=v*b11;t12+=v*b12;t13+=v*b13;t14+=v*b14;t15+=v*b15;v=a[1];t1+=v*b0;t2+=v*b1;t3+=v*b2;t4+=v*b3;t5+=v*b4;t6+=v*b5;t7+=v*b6;t8+=v*b7;t9+=v*b8;t10+=v*b9;t11+=v*b10;t12+=v*b11;t13+=v*b12;t14+=v*b13;t15+=v*b14;t16+=v*b15;v=a[2];t2+=v*b0;t3+=v*b1;t4+=v*b2;t5+=v*b3;t6+=v*b4;t7+=v*b5;t8+=v*b6;t9+=v*b7;t10+=v*b8;t11+=v*b9;t12+=v*b10;t13+=v*b11;t14+=v*b12;t15+=v*b13;t16+=v*b14;t17+=v*b15;v=a[3];t3+=v*b0;t4+=v*b1;t5+=v*b2;t6+=v*b3;t7+=v*b4;t8+=v*b5;t9+=v*b6;t10+=v*b7;t11+=v*b8;t12+=v*b9;t13+=v*b10;t14+=v*b11;t15+=v*b12;t16+=v*b13;t17+=v*b14;t18+=v*b15;v=a[4];t4+=v*b0;t5+=v*b1;t6+=v*b2;t7+=v*b3;t8+=v*b4;t9+=v*b5;t10+=v*b6;t11+=v*b7;t12+=v*b8;t13+=v*b9;t14+=v*b10;t15+=v*b11;t16+=v*b12;t17+=v*b13;t18+=v*b14;t19+=v*b15;v=a[5];t5+=v*b0;t6+=v*b1;t7+=v*b2;t8+=v*b3;t9+=v*b4;t10+=v*b5;t11+=v*b6;t12+=v*b7;t13+=v*b8;t14+=v*b9;t15+=v*b10;t16+=v*b11;t17+=v*b12;t18+=v*b13;t19+=v*b14;t20+=v*b15;v=a[6];t6+=v*b0;t7+=v*b1;t8+=v*b2;t9+=v*b3;t10+=v*b4;t11+=v*b5;t12+=v*b6;t13+=v*b7;t14+=v*b8;t15+=v*b9;t16+=v*b10;t17+=v*b11;t18+=v*b12;t19+=v*b13;t20+=v*b14;t21+=v*b15;v=a[7];t7+=v*b0;t8+=v*b1;t9+=v*b2;t10+=v*b3;t11+=v*b4;t12+=v*b5;t13+=v*b6;t14+=v*b7;t15+=v*b8;t16+=v*b9;t17+=v*b10;t18+=v*b11;t19+=v*b12;t20+=v*b13;t21+=v*b14;t22+=v*b15;v=a[8];t8+=v*b0;t9+=v*b1;t10+=v*b2;t11+=v*b3;t12+=v*b4;t13+=v*b5;t14+=v*b6;t15+=v*b7;t16+=v*b8;t17+=v*b9;t18+=v*b10;t19+=v*b11;t20+=v*b12;t21+=v*b13;t22+=v*b14;t23+=v*b15;v=a[9];t9+=v*b0;t10+=v*b1;t11+=v*b2;t12+=v*b3;t13+=v*b4;t14+=v*b5;t15+=v*b6;t16+=v*b7;t17+=v*b8;t18+=v*b9;t19+=v*b10;t20+=v*b11;t21+=v*b12;t22+=v*b13;t23+=v*b14;t24+=v*b15;v=a[10];t10+=v*b0;t11+=v*b1;t12+=v*b2;t13+=v*b3;t14+=v*b4;t15+=v*b5;t16+=v*b6;t17+=v*b7;t18+=v*b8;t19+=v*b9;t20+=v*b10;t21+=v*b11;t22+=v*b12;t23+=v*b13;t24+=v*b14;t25+=v*b15;v=a[11];t11+=v*b0;t12+=v*b1;t13+=v*b2;t14+=v*b3;t15+=v*b4;t16+=v*b5;t17+=v*b6;t18+=v*b7;t19+=v*b8;t20+=v*b9;t21+=v*b10;t22+=v*b11;t23+=v*b12;t24+=v*b13;t25+=v*b14;t26+=v*b15;v=a[12];t12+=v*b0;t13+=v*b1;t14+=v*b2;t15+=v*b3;t16+=v*b4;t17+=v*b5;t18+=v*b6;t19+=v*b7;t20+=v*b8;t21+=v*b9;t22+=v*b10;t23+=v*b11;t24+=v*b12;t25+=v*b13;t26+=v*b14;t27+=v*b15;v=a[13];t13+=v*b0;t14+=v*b1;t15+=v*b2;t16+=v*b3;t17+=v*b4;t18+=v*b5;t19+=v*b6;t20+=v*b7;t21+=v*b8;t22+=v*b9;t23+=v*b10;t24+=v*b11;t25+=v*b12;t26+=v*b13;t27+=v*b14;t28+=v*b15;v=a[14];t14+=v*b0;t15+=v*b1;t16+=v*b2;t17+=v*b3;t18+=v*b4;t19+=v*b5;t20+=v*b6;t21+=v*b7;t22+=v*b8;t23+=v*b9;t24+=v*b10;t25+=v*b11;t26+=v*b12;t27+=v*b13;t28+=v*b14;t29+=v*b15;v=a[15];t15+=v*b0;t16+=v*b1;t17+=v*b2;t18+=v*b3;t19+=v*b4;t20+=v*b5;t21+=v*b6;t22+=v*b7;t23+=v*b8;t24+=v*b9;t25+=v*b10;t26+=v*b11;t27+=v*b12;t28+=v*b13;t29+=v*b14;t30+=v*b15;t0+=38*t16;t1+=38*t17;t2+=38*t18;t3+=38*t19;t4+=38*t20;t5+=38*t21;t6+=38*t22;t7+=38*t23;t8+=38*t24;t9+=38*t25;t10+=38*t26;t11+=38*t27;t12+=38*t28;t13+=38*t29;t14+=38*t30;c=1;v=t0+c+65535;c=Math.floor(v/65536);t0=v-c*65536;v=t1+c+65535;c=Math.floor(v/65536);t1=v-c*65536;v=t2+c+65535;c=Math.floor(v/65536);t2=v-c*65536;v=t3+c+65535;c=Math.floor(v/65536);t3=v-c*65536;v=t4+c+65535;c=Math.floor(v/65536);t4=v-c*65536;v=t5+c+65535;c=Math.floor(v/65536);t5=v-c*65536;v=t6+c+65535;c=Math.floor(v/65536);t6=v-c*65536;v=t7+c+65535;c=Math.floor(v/65536);t7=v-c*65536;v=t8+c+65535;c=Math.floor(v/65536);t8=v-c*65536;v=t9+c+65535;c=Math.floor(v/65536);t9=v-c*65536;v=t10+c+65535;c=Math.floor(v/65536);t10=v-c*65536;v=t11+c+65535;c=Math.floor(v/65536);t11=v-c*65536;v=t12+c+65535;c=Math.floor(v/65536);t12=v-c*65536;v=t13+c+65535;c=Math.floor(v/65536);t13=v-c*65536;v=t14+c+65535;c=Math.floor(v/65536);t14=v-c*65536;v=t15+c+65535;c=Math.floor(v/65536);t15=v-c*65536;t0+=c-1+37*(c-1);c=1;v=t0+c+65535;c=Math.floor(v/65536);t0=v-c*65536;v=t1+c+65535;c=Math.floor(v/65536);t1=v-c*65536;v=t2+c+65535;c=Math.floor(v/65536);t2=v-c*65536;v=t3+c+65535;c=Math.floor(v/65536);t3=v-c*65536;v=t4+c+65535;c=Math.floor(v/65536);t4=v-c*65536;v=t5+c+65535;c=Math.floor(v/65536);t5=v-c*65536;v=t6+c+65535;c=Math.floor(v/65536);t6=v-c*65536;v=t7+c+65535;c=Math.floor(v/65536);t7=v-c*65536;v=t8+c+65535;c=Math.floor(v/65536);t8=v-c*65536;v=t9+c+65535;c=Math.floor(v/65536);t9=v-c*65536;v=t10+c+65535;c=Math.floor(v/65536);t10=v-c*65536;v=t11+c+65535;c=Math.floor(v/65536);t11=v-c*65536;v=t12+c+65535;c=Math.floor(v/65536);t12=v-c*65536;v=t13+c+65535;c=Math.floor(v/65536);t13=v-c*65536;v=t14+c+65535;c=Math.floor(v/65536);t14=v-c*65536;v=t15+c+65535;c=Math.floor(v/65536);t15=v-c*65536;t0+=c-1+37*(c-1);o[0]=t0;o[1]=t1;o[2]=t2;o[3]=t3;o[4]=t4;o[5]=t5;o[6]=t6;o[7]=t7;o[8]=t8;o[9]=t9;o[10]=t10;o[11]=t11;o[12]=t12;o[13]=t13;o[14]=t14;o[15]=t15}function square(o,a){mul(o,a,a)}function inv25519(o,i){const c=gf();let a;for(a=0;a<16;a++){c[a]=i[a]}for(a=253;a>=0;a--){square(c,c);if(a!==2&&a!==4){mul(c,c,i)}}for(a=0;a<16;a++){o[a]=c[a]}}function pow2523(o,i){const c=gf();let a;for(a=0;a<16;a++){c[a]=i[a]}for(a=250;a>=0;a--){square(c,c);if(a!==1){mul(c,c,i)}}for(a=0;a<16;a++){o[a]=c[a]}}function edadd(p,q){const a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf(),g=gf(),h=gf(),t=gf();sub(a,p[1],p[0]);sub(t,q[1],q[0]);mul(a,a,t);add(b,p[0],p[1]);add(t,q[0],q[1]);mul(b,b,t);mul(c,p[3],q[3]);mul(c,c,D2);mul(d,p[2],q[2]);add(d,d,d);sub(e,b,a);sub(f,d,c);add(g,d,c);add(h,b,a);mul(p[0],e,f);mul(p[1],h,g);mul(p[2],g,f);mul(p[3],e,h)}function cswap(p,q,b){for(let i=0;i<4;i++){sel25519(p[i],q[i],b)}}function pack(r,p){const tx=gf(),ty=gf(),zi=gf();inv25519(zi,p[2]);mul(tx,p[0],zi);mul(ty,p[1],zi);pack25519(r,ty);r[31]^=par25519(tx)<<7}function scalarmult(p,q,s){set25519(p[0],gf0);set25519(p[1],gf1);set25519(p[2],gf1);set25519(p[3],gf0);for(let i=255;i>=0;--i){const b=s[i/8|0]>>(i&7)&1;cswap(p,q,b);edadd(q,p);edadd(p,p);cswap(p,q,b)}}function scalarbase(p,s){const q=[gf(),gf(),gf(),gf()];set25519(q[0],X);set25519(q[1],Y);set25519(q[2],gf1);mul(q[3],X,Y);scalarmult(p,q,s)}function generateKeyPairFromSeed(seed){if(seed.length!==exports.aP){throw new Error(`ed25519: seed must be ${exports.aP} bytes`)}const d=(0,sha512_1.hash)(seed);d[0]&=248;d[31]&=127;d[31]|=64;const publicKey=new Uint8Array(32);const p=[gf(),gf(),gf(),gf()];scalarbase(p,d);pack(publicKey,p);const secretKey=new Uint8Array(64);secretKey.set(seed);secretKey.set(publicKey,32);return{publicKey,secretKey}}exports._w=generateKeyPairFromSeed;function generateKeyPair(prng){const seed=(0,random_1.randomBytes)(32,prng);const result=generateKeyPairFromSeed(seed);(0,wipe_1.wipe)(seed);return result}__webpack_unused_export__=generateKeyPair;function extractPublicKeyFromSecretKey(secretKey){if(secretKey.length!==exports.KS){throw new Error(`ed25519: secret key must be ${exports.KS} bytes`)}return new Uint8Array(secretKey.subarray(32))}__webpack_unused_export__=extractPublicKeyFromSecretKey;const L=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function modL(r,x){let carry;let i;let j;let k;for(i=63;i>=32;--i){carry=0;for(j=i-32,k=i-12;j<k;++j){x[j]+=carry-16*x[i]*L[j-(i-32)];carry=Math.floor((x[j]+128)/256);x[j]-=carry*256}x[j]+=carry;x[i]=0}carry=0;for(j=0;j<32;j++){x[j]+=carry-(x[31]>>4)*L[j];carry=x[j]>>8;x[j]&=255}for(j=0;j<32;j++){x[j]-=carry*L[j]}for(i=0;i<32;i++){x[i+1]+=x[i]>>8;r[i]=x[i]&255}}function reduce(r){const x=new Float64Array(64);for(let i=0;i<64;i++){x[i]=r[i]}for(let i=0;i<64;i++){r[i]=0}modL(r,x)}function sign(secretKey,message){const x=new Float64Array(64);const p=[gf(),gf(),gf(),gf()];const d=(0,sha512_1.hash)(secretKey.subarray(0,32));d[0]&=248;d[31]&=127;d[31]|=64;const signature=new Uint8Array(64);signature.set(d.subarray(32),32);const hs=new sha512_1.SHA512;hs.update(signature.subarray(32));hs.update(message);const r=hs.digest();hs.clean();reduce(r);scalarbase(p,r);pack(signature,p);hs.reset();hs.update(signature.subarray(0,32));hs.update(secretKey.subarray(32));hs.update(message);const h=hs.digest();reduce(h);for(let i=0;i<32;i++){x[i]=r[i]}for(let i=0;i<32;i++){for(let j=0;j<32;j++){x[i+j]+=h[i]*d[j]}}modL(signature.subarray(32),x);return signature}exports.Xx=sign;function unpackneg(r,p){const t=gf(),chk=gf(),num=gf(),den=gf(),den2=gf(),den4=gf(),den6=gf();set25519(r[2],gf1);unpack25519(r[1],p);square(num,r[1]);mul(den,num,D);sub(num,num,r[2]);add(den,r[2],den);square(den2,den);square(den4,den2);mul(den6,den4,den2);mul(t,den6,num);mul(t,t,den);pow2523(t,t);mul(t,t,num);mul(t,t,den);mul(t,t,den);mul(r[0],t,den);square(chk,r[0]);mul(chk,chk,den);if(neq25519(chk,num)){mul(r[0],r[0],I)}square(chk,r[0]);mul(chk,chk,den);if(neq25519(chk,num)){return-1}if(par25519(r[0])===p[31]>>7){sub(r[0],gf0,r[0])}mul(r[3],r[0],r[1]);return 0}function verify(publicKey,message,signature){const t=new Uint8Array(32);const p=[gf(),gf(),gf(),gf()];const q=[gf(),gf(),gf(),gf()];if(signature.length!==exports.jQ){throw new Error(`ed25519: signature must be ${exports.jQ} bytes`)}if(unpackneg(q,publicKey)){return false}const hs=new sha512_1.SHA512;hs.update(signature.subarray(0,32));hs.update(publicKey);hs.update(message);const h=hs.digest();reduce(h);scalarmult(p,q,h);scalarbase(q,signature.subarray(32));edadd(p,q);pack(t,p);if(verify32(signature,t)){return false}return true}exports.T=verify;function convertPublicKeyToX25519(publicKey){let q=[gf(),gf(),gf(),gf()];if(unpackneg(q,publicKey)){throw new Error("Ed25519: invalid public key")}let a=gf();let b=gf();let y=q[1];add(a,gf1,y);sub(b,gf1,y);inv25519(b,b);mul(a,a,b);let z=new Uint8Array(32);pack25519(z,a);return z}__webpack_unused_export__=convertPublicKeyToX25519;function convertSecretKeyToX25519(secretKey){const d=(0,sha512_1.hash)(secretKey.subarray(0,32));d[0]&=248;d[31]&=127;d[31]|=64;const o=new Uint8Array(d.subarray(0,32));(0,wipe_1.wipe)(d);return o}__webpack_unused_export__=convertSecretKeyToX25519},33165:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});function isSerializableHash(h){return typeof h.saveState!=="undefined"&&typeof h.restoreState!=="undefined"&&typeof h.cleanSavedState!=="undefined"}exports.isSerializableHash=isSerializableHash},35416:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});var hmac_1=__webpack_require__(15626);var wipe_1=__webpack_require__(28601);var HKDF=function(){function HKDF(hash,key,salt,info){if(salt===void 0){salt=new Uint8Array(0)}this._counter=new Uint8Array(1);this._hash=hash;this._info=info;var okm=hmac_1.hmac(this._hash,salt,key);this._hmac=new hmac_1.HMAC(hash,okm);this._buffer=new Uint8Array(this._hmac.digestLength);this._bufpos=this._buffer.length}HKDF.prototype._fillBuffer=function(){this._counter[0]++;var ctr=this._counter[0];if(ctr===0){throw new Error("hkdf: cannot expand more")}this._hmac.reset();if(ctr>1){this._hmac.update(this._buffer)}if(this._info){this._hmac.update(this._info)}this._hmac.update(this._counter);this._hmac.finish(this._buffer);this._bufpos=0};HKDF.prototype.expand=function(length){var out=new Uint8Array(length);for(var i=0;i<out.length;i++){if(this._bufpos===this._buffer.length){this._fillBuffer()}out[i]=this._buffer[this._bufpos++]}return out};HKDF.prototype.clean=function(){this._hmac.clean();wipe_1.wipe(this._buffer);wipe_1.wipe(this._counter);this._bufpos=0};return HKDF}();exports.HKDF=HKDF},15626:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});var hash_1=__webpack_require__(33165);var constant_time_1=__webpack_require__(11902);var wipe_1=__webpack_require__(28601);var HMAC=function(){function HMAC(hash,key){this._finished=false;this._inner=new hash;this._outer=new hash;this.blockSize=this._outer.blockSize;this.digestLength=this._outer.digestLength;var pad=new Uint8Array(this.blockSize);if(key.length>this.blockSize){this._inner.update(key).finish(pad).clean()}else{pad.set(key)}for(var i=0;i<pad.length;i++){pad[i]^=54}this._inner.update(pad);for(var i=0;i<pad.length;i++){pad[i]^=54^92}this._outer.update(pad);if(hash_1.isSerializableHash(this._inner)&&hash_1.isSerializableHash(this._outer)){this._innerKeyedState=this._inner.saveState();this._outerKeyedState=this._outer.saveState()}wipe_1.wipe(pad)}HMAC.prototype.reset=function(){if(!hash_1.isSerializableHash(this._inner)||!hash_1.isSerializableHash(this._outer)){throw new Error("hmac: can't reset() because hash doesn't implement restoreState()")}this._inner.restoreState(this._innerKeyedState);this._outer.restoreState(this._outerKeyedState);this._finished=false;return this};HMAC.prototype.clean=function(){if(hash_1.isSerializableHash(this._inner)){this._inner.cleanSavedState(this._innerKeyedState)}if(hash_1.isSerializableHash(this._outer)){this._outer.cleanSavedState(this._outerKeyedState)}this._inner.clean();this._outer.clean()};HMAC.prototype.update=function(data){this._inner.update(data);return this};HMAC.prototype.finish=function(out){if(this._finished){this._outer.finish(out);return this}this._inner.finish(out);this._outer.update(out.subarray(0,this.digestLength)).finish(out);this._finished=true;return this};HMAC.prototype.digest=function(){var out=new Uint8Array(this.digestLength);this.finish(out);return out};HMAC.prototype.saveState=function(){if(!hash_1.isSerializableHash(this._inner)){throw new Error("hmac: can't saveState() because hash doesn't implement it")}return this._inner.saveState()};HMAC.prototype.restoreState=function(savedState){if(!hash_1.isSerializableHash(this._inner)||!hash_1.isSerializableHash(this._outer)){throw new Error("hmac: can't restoreState() because hash doesn't implement it")}this._inner.restoreState(savedState);this._outer.restoreState(this._outerKeyedState);this._finished=false;return this};HMAC.prototype.cleanSavedState=function(savedState){if(!hash_1.isSerializableHash(this._inner)){throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it")}this._inner.cleanSavedState(savedState)};return HMAC}();exports.HMAC=HMAC;function hmac(hash,key,data){var h=new HMAC(hash,key);h.update(data);var digest=h.digest();h.clean();return digest}exports.hmac=hmac;exports.equal=constant_time_1.equal},30418:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});function imulShim(a,b){var ah=a>>>16&65535,al=a&65535;var bh=b>>>16&65535,bl=b&65535;return al*bl+(ah*bl+al*bh<<16>>>0)|0}exports.mul=Math.imul||imulShim;function add(a,b){return a+b|0}exports.add=add;function sub(a,b){return a-b|0}exports.sub=sub;function rotl(x,n){return x<<n|x>>>32-n}exports.rotl=rotl;function rotr(x,n){return x<<32-n|x>>>n}exports.rotr=rotr;function isIntegerShim(n){return typeof n==="number"&&isFinite(n)&&Math.floor(n)===n}exports.isInteger=Number.isInteger||isIntegerShim;exports.MAX_SAFE_INTEGER=9007199254740991;exports.isSafeInteger=function(n){return exports.isInteger(n)&&(n>=-exports.MAX_SAFE_INTEGER&&n<=exports.MAX_SAFE_INTEGER)}},85877:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});var constant_time_1=__webpack_require__(11902);var wipe_1=__webpack_require__(28601);exports.DIGEST_LENGTH=16;var Poly1305=function(){function Poly1305(key){this.digestLength=exports.DIGEST_LENGTH;this._buffer=new Uint8Array(16);this._r=new Uint16Array(10);this._h=new Uint16Array(10);this._pad=new Uint16Array(8);this._leftover=0;this._fin=0;this._finished=false;var t0=key[0]|key[1]<<8;this._r[0]=t0&8191;var t1=key[2]|key[3]<<8;this._r[1]=(t0>>>13|t1<<3)&8191;var t2=key[4]|key[5]<<8;this._r[2]=(t1>>>10|t2<<6)&7939;var t3=key[6]|key[7]<<8;this._r[3]=(t2>>>7|t3<<9)&8191;var t4=key[8]|key[9]<<8;this._r[4]=(t3>>>4|t4<<12)&255;this._r[5]=t4>>>1&8190;var t5=key[10]|key[11]<<8;this._r[6]=(t4>>>14|t5<<2)&8191;var t6=key[12]|key[13]<<8;this._r[7]=(t5>>>11|t6<<5)&8065;var t7=key[14]|key[15]<<8;this._r[8]=(t6>>>8|t7<<8)&8191;this._r[9]=t7>>>5&127;this._pad[0]=key[16]|key[17]<<8;this._pad[1]=key[18]|key[19]<<8;this._pad[2]=key[20]|key[21]<<8;this._pad[3]=key[22]|key[23]<<8;this._pad[4]=key[24]|key[25]<<8;this._pad[5]=key[26]|key[27]<<8;this._pad[6]=key[28]|key[29]<<8;this._pad[7]=key[30]|key[31]<<8}Poly1305.prototype._blocks=function(m,mpos,bytes){var hibit=this._fin?0:1<<11;var h0=this._h[0],h1=this._h[1],h2=this._h[2],h3=this._h[3],h4=this._h[4],h5=this._h[5],h6=this._h[6],h7=this._h[7],h8=this._h[8],h9=this._h[9];var r0=this._r[0],r1=this._r[1],r2=this._r[2],r3=this._r[3],r4=this._r[4],r5=this._r[5],r6=this._r[6],r7=this._r[7],r8=this._r[8],r9=this._r[9];while(bytes>=16){var t0=m[mpos+0]|m[mpos+1]<<8;h0+=t0&8191;var t1=m[mpos+2]|m[mpos+3]<<8;h1+=(t0>>>13|t1<<3)&8191;var t2=m[mpos+4]|m[mpos+5]<<8;h2+=(t1>>>10|t2<<6)&8191;var t3=m[mpos+6]|m[mpos+7]<<8;h3+=(t2>>>7|t3<<9)&8191;var t4=m[mpos+8]|m[mpos+9]<<8;h4+=(t3>>>4|t4<<12)&8191;h5+=t4>>>1&8191;var t5=m[mpos+10]|m[mpos+11]<<8;h6+=(t4>>>14|t5<<2)&8191;var t6=m[mpos+12]|m[mpos+13]<<8;h7+=(t5>>>11|t6<<5)&8191;var t7=m[mpos+14]|m[mpos+15]<<8;h8+=(t6>>>8|t7<<8)&8191;h9+=t7>>>5|hibit;var c=0;var d0=c;d0+=h0*r0;d0+=h1*(5*r9);d0+=h2*(5*r8);d0+=h3*(5*r7);d0+=h4*(5*r6);c=d0>>>13;d0&=8191;d0+=h5*(5*r5);d0+=h6*(5*r4);d0+=h7*(5*r3);d0+=h8*(5*r2);d0+=h9*(5*r1);c+=d0>>>13;d0&=8191;var d1=c;d1+=h0*r1;d1+=h1*r0;d1+=h2*(5*r9);d1+=h3*(5*r8);d1+=h4*(5*r7);c=d1>>>13;d1&=8191;d1+=h5*(5*r6);d1+=h6*(5*r5);d1+=h7*(5*r4);d1+=h8*(5*r3);d1+=h9*(5*r2);c+=d1>>>13;d1&=8191;var d2=c;d2+=h0*r2;d2+=h1*r1;d2+=h2*r0;d2+=h3*(5*r9);d2+=h4*(5*r8);c=d2>>>13;d2&=8191;d2+=h5*(5*r7);d2+=h6*(5*r6);d2+=h7*(5*r5);d2+=h8*(5*r4);d2+=h9*(5*r3);c+=d2>>>13;d2&=8191;var d3=c;d3+=h0*r3;d3+=h1*r2;d3+=h2*r1;d3+=h3*r0;d3+=h4*(5*r9);c=d3>>>13;d3&=8191;d3+=h5*(5*r8);d3+=h6*(5*r7);d3+=h7*(5*r6);d3+=h8*(5*r5);d3+=h9*(5*r4);c+=d3>>>13;d3&=8191;var d4=c;d4+=h0*r4;d4+=h1*r3;d4+=h2*r2;d4+=h3*r1;d4+=h4*r0;c=d4>>>13;d4&=8191;d4+=h5*(5*r9);d4+=h6*(5*r8);d4+=h7*(5*r7);d4+=h8*(5*r6);d4+=h9*(5*r5);c+=d4>>>13;d4&=8191;var d5=c;d5+=h0*r5;d5+=h1*r4;d5+=h2*r3;d5+=h3*r2;d5+=h4*r1;c=d5>>>13;d5&=8191;d5+=h5*r0;d5+=h6*(5*r9);d5+=h7*(5*r8);d5+=h8*(5*r7);d5+=h9*(5*r6);c+=d5>>>13;d5&=8191;var d6=c;d6+=h0*r6;d6+=h1*r5;d6+=h2*r4;d6+=h3*r3;d6+=h4*r2;c=d6>>>13;d6&=8191;d6+=h5*r1;d6+=h6*r0;d6+=h7*(5*r9);d6+=h8*(5*r8);d6+=h9*(5*r7);c+=d6>>>13;d6&=8191;var d7=c;d7+=h0*r7;d7+=h1*r6;d7+=h2*r5;d7+=h3*r4;d7+=h4*r3;c=d7>>>13;d7&=8191;d7+=h5*r2;d7+=h6*r1;d7+=h7*r0;d7+=h8*(5*r9);d7+=h9*(5*r8);c+=d7>>>13;d7&=8191;var d8=c;d8+=h0*r8;d8+=h1*r7;d8+=h2*r6;d8+=h3*r5;d8+=h4*r4;c=d8>>>13;d8&=8191;d8+=h5*r3;d8+=h6*r2;d8+=h7*r1;d8+=h8*r0;d8+=h9*(5*r9);c+=d8>>>13;d8&=8191;var d9=c;d9+=h0*r9;d9+=h1*r8;d9+=h2*r7;d9+=h3*r6;d9+=h4*r5;c=d9>>>13;d9&=8191;d9+=h5*r4;d9+=h6*r3;d9+=h7*r2;d9+=h8*r1;d9+=h9*r0;c+=d9>>>13;d9&=8191;c=(c<<2)+c|0;c=c+d0|0;d0=c&8191;c=c>>>13;d1+=c;h0=d0;h1=d1;h2=d2;h3=d3;h4=d4;h5=d5;h6=d6;h7=d7;h8=d8;h9=d9;mpos+=16;bytes-=16}this._h[0]=h0;this._h[1]=h1;this._h[2]=h2;this._h[3]=h3;this._h[4]=h4;this._h[5]=h5;this._h[6]=h6;this._h[7]=h7;this._h[8]=h8;this._h[9]=h9};Poly1305.prototype.finish=function(mac,macpos){if(macpos===void 0){macpos=0}var g=new Uint16Array(10);var c;var mask;var f;var i;if(this._leftover){i=this._leftover;this._buffer[i++]=1;for(;i<16;i++){this._buffer[i]=0}this._fin=1;this._blocks(this._buffer,0,16)}c=this._h[1]>>>13;this._h[1]&=8191;for(i=2;i<10;i++){this._h[i]+=c;c=this._h[i]>>>13;this._h[i]&=8191}this._h[0]+=c*5;c=this._h[0]>>>13;this._h[0]&=8191;this._h[1]+=c;c=this._h[1]>>>13;this._h[1]&=8191;this._h[2]+=c;g[0]=this._h[0]+5;c=g[0]>>>13;g[0]&=8191;for(i=1;i<10;i++){g[i]=this._h[i]+c;c=g[i]>>>13;g[i]&=8191}g[9]-=1<<13;mask=(c^1)-1;for(i=0;i<10;i++){g[i]&=mask}mask=~mask;for(i=0;i<10;i++){this._h[i]=this._h[i]&mask|g[i]}this._h[0]=(this._h[0]|this._h[1]<<13)&65535;this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535;this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535;this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535;this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535;this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535;this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535;this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535;f=this._h[0]+this._pad[0];this._h[0]=f&65535;for(i=1;i<8;i++){f=(this._h[i]+this._pad[i]|0)+(f>>>16)|0;this._h[i]=f&65535}mac[macpos+0]=this._h[0]>>>0;mac[macpos+1]=this._h[0]>>>8;mac[macpos+2]=this._h[1]>>>0;mac[macpos+3]=this._h[1]>>>8;mac[macpos+4]=this._h[2]>>>0;mac[macpos+5]=this._h[2]>>>8;mac[macpos+6]=this._h[3]>>>0;mac[macpos+7]=this._h[3]>>>8;mac[macpos+8]=this._h[4]>>>0;mac[macpos+9]=this._h[4]>>>8;mac[macpos+10]=this._h[5]>>>0;mac[macpos+11]=this._h[5]>>>8;mac[macpos+12]=this._h[6]>>>0;mac[macpos+13]=this._h[6]>>>8;mac[macpos+14]=this._h[7]>>>0;mac[macpos+15]=this._h[7]>>>8;this._finished=true;return this};Poly1305.prototype.update=function(m){var mpos=0;var bytes=m.length;var want;if(this._leftover){want=16-this._leftover;if(want>bytes){want=bytes}for(var i=0;i<want;i++){this._buffer[this._leftover+i]=m[mpos+i]}bytes-=want;mpos+=want;this._leftover+=want;if(this._leftover<16){return this}this._blocks(this._buffer,0,16);this._leftover=0}if(bytes>=16){want=bytes-bytes%16;this._blocks(m,mpos,want);mpos+=want;bytes-=want}if(bytes){for(var i=0;i<bytes;i++){this._buffer[this._leftover+i]=m[mpos+i]}this._leftover+=bytes}return this};Poly1305.prototype.digest=function(){if(this._finished){throw new Error("Poly1305 was finished")}var mac=new Uint8Array(16);this.finish(mac);return mac};Poly1305.prototype.clean=function(){wipe_1.wipe(this._buffer);wipe_1.wipe(this._r);wipe_1.wipe(this._h);wipe_1.wipe(this._pad);this._leftover=0;this._fin=0;this._finished=true;return this};return Poly1305}();exports.Poly1305=Poly1305;function oneTimeAuth(key,data){var h=new Poly1305(key);h.update(data);var digest=h.digest();h.clean();return digest}exports.oneTimeAuth=oneTimeAuth;function equal(a,b){if(a.length!==exports.DIGEST_LENGTH||b.length!==exports.DIGEST_LENGTH){return false}return constant_time_1.equal(a,b)}exports.equal=equal},93571:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.randomStringForEntropy=exports.randomString=exports.randomUint32=exports.randomBytes=exports.defaultRandomSource=void 0;const system_1=__webpack_require__(21536);const binary_1=__webpack_require__(69539);const wipe_1=__webpack_require__(28601);exports.defaultRandomSource=new system_1.SystemRandomSource;function randomBytes(length,prng=exports.defaultRandomSource){return prng.randomBytes(length)}exports.randomBytes=randomBytes;function randomUint32(prng=exports.defaultRandomSource){const buf=randomBytes(4,prng);const result=(0,binary_1.readUint32LE)(buf);(0,wipe_1.wipe)(buf);return result}exports.randomUint32=randomUint32;const ALPHANUMERIC="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function randomString(length,charset=ALPHANUMERIC,prng=exports.defaultRandomSource){if(charset.length<2){throw new Error("randomString charset is too short")}if(charset.length>256){throw new Error("randomString charset is too long")}let out="";const charsLen=charset.length;const maxByte=256-256%charsLen;while(length>0){const buf=randomBytes(Math.ceil(length*256/maxByte),prng);for(let i=0;i<buf.length&&length>0;i++){const randomByte=buf[i];if(randomByte<maxByte){out+=charset.charAt(randomByte%charsLen);length--}}(0,wipe_1.wipe)(buf)}return out}exports.randomString=randomString;function randomStringForEntropy(bits,charset=ALPHANUMERIC,prng=exports.defaultRandomSource){const length=Math.ceil(bits/(Math.log(charset.length)/Math.LN2));return randomString(length,charset,prng)}exports.randomStringForEntropy=randomStringForEntropy},10031:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BrowserRandomSource=void 0;const QUOTA=65536;class BrowserRandomSource{constructor(){this.isAvailable=false;this.isInstantiated=false;const browserCrypto=typeof self!=="undefined"?self.crypto||self.msCrypto:null;if(browserCrypto&&browserCrypto.getRandomValues!==undefined){this._crypto=browserCrypto;this.isAvailable=true;this.isInstantiated=true}}randomBytes(length){if(!this.isAvailable||!this._crypto){throw new Error("Browser random byte generator is not available.")}const out=new Uint8Array(length);for(let i=0;i<out.length;i+=QUOTA){this._crypto.getRandomValues(out.subarray(i,i+Math.min(out.length-i,QUOTA)))}return out}}exports.BrowserRandomSource=BrowserRandomSource},11708:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NodeRandomSource=void 0;const wipe_1=__webpack_require__(28601);class NodeRandomSource{constructor(){this.isAvailable=false;this.isInstantiated=false;if(true){const nodeCrypto=__webpack_require__(75477);if(nodeCrypto&&nodeCrypto.randomBytes){this._crypto=nodeCrypto;this.isAvailable=true;this.isInstantiated=true}}}randomBytes(length){if(!this.isAvailable||!this._crypto){throw new Error("Node.js random byte generator is not available.")}let buffer=this._crypto.randomBytes(length);if(buffer.length!==length){throw new Error("NodeRandomSource: got fewer bytes than requested")}const out=new Uint8Array(length);for(let i=0;i<out.length;i++){out[i]=buffer[i]}(0,wipe_1.wipe)(buffer);return out}}exports.NodeRandomSource=NodeRandomSource},21536:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SystemRandomSource=void 0;const browser_1=__webpack_require__(10031);const node_1=__webpack_require__(11708);class SystemRandomSource{constructor(){this.isAvailable=false;this.name="";this._source=new browser_1.BrowserRandomSource;if(this._source.isAvailable){this.isAvailable=true;this.name="Browser";return}this._source=new node_1.NodeRandomSource;if(this._source.isAvailable){this.isAvailable=true;this.name="Node";return}}randomBytes(length){if(!this.isAvailable){throw new Error("System random byte generator is not available.")}return this._source.randomBytes(length)}}exports.SystemRandomSource=SystemRandomSource},11182:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});var binary_1=__webpack_require__(69539);var wipe_1=__webpack_require__(28601);exports.DIGEST_LENGTH=32;exports.BLOCK_SIZE=64;var SHA256=function(){function SHA256(){this.digestLength=exports.DIGEST_LENGTH;this.blockSize=exports.BLOCK_SIZE;this._state=new Int32Array(8);this._temp=new Int32Array(64);this._buffer=new Uint8Array(128);this._bufferLength=0;this._bytesHashed=0;this._finished=false;this.reset()}SHA256.prototype._initState=function(){this._state[0]=1779033703;this._state[1]=3144134277;this._state[2]=1013904242;this._state[3]=2773480762;this._state[4]=1359893119;this._state[5]=2600822924;this._state[6]=528734635;this._state[7]=1541459225};SHA256.prototype.reset=function(){this._initState();this._bufferLength=0;this._bytesHashed=0;this._finished=false;return this};SHA256.prototype.clean=function(){wipe_1.wipe(this._buffer);wipe_1.wipe(this._temp);this.reset()};SHA256.prototype.update=function(data,dataLength){if(dataLength===void 0){dataLength=data.length}if(this._finished){throw new Error("SHA256: can't update because hash was finished.")}var dataPos=0;this._bytesHashed+=dataLength;if(this._bufferLength>0){while(this._bufferLength<this.blockSize&&dataLength>0){this._buffer[this._bufferLength++]=data[dataPos++];dataLength--}if(this._bufferLength===this.blockSize){hashBlocks(this._temp,this._state,this._buffer,0,this.blockSize);this._bufferLength=0}}if(dataLength>=this.blockSize){dataPos=hashBlocks(this._temp,this._state,data,dataPos,dataLength);dataLength%=this.blockSize}while(dataLength>0){this._buffer[this._bufferLength++]=data[dataPos++];dataLength--}return this};SHA256.prototype.finish=function(out){if(!this._finished){var bytesHashed=this._bytesHashed;var left=this._bufferLength;var bitLenHi=bytesHashed/536870912|0;var bitLenLo=bytesHashed<<3;var padLength=bytesHashed%64<56?64:128;this._buffer[left]=128;for(var i=left+1;i<padLength-8;i++){this._buffer[i]=0}binary_1.writeUint32BE(bitLenHi,this._buffer,padLength-8);binary_1.writeUint32BE(bitLenLo,this._buffer,padLength-4);hashBlocks(this._temp,this._state,this._buffer,0,padLength);this._finished=true}for(var i=0;i<this.digestLength/4;i++){binary_1.writeUint32BE(this._state[i],out,i*4)}return this};SHA256.prototype.digest=function(){var out=new Uint8Array(this.digestLength);this.finish(out);return out};SHA256.prototype.saveState=function(){if(this._finished){throw new Error("SHA256: cannot save finished state")}return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):undefined,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}};SHA256.prototype.restoreState=function(savedState){this._state.set(savedState.state);this._bufferLength=savedState.bufferLength;if(savedState.buffer){this._buffer.set(savedState.buffer)}this._bytesHashed=savedState.bytesHashed;this._finished=false;return this};SHA256.prototype.cleanSavedState=function(savedState){wipe_1.wipe(savedState.state);if(savedState.buffer){wipe_1.wipe(savedState.buffer)}savedState.bufferLength=0;savedState.bytesHashed=0};return SHA256}();exports.SHA256=SHA256;var K=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function hashBlocks(w,v,p,pos,len){while(len>=64){var a=v[0];var b=v[1];var c=v[2];var d=v[3];var e=v[4];var f=v[5];var g=v[6];var h=v[7];for(var i=0;i<16;i++){var j=pos+i*4;w[i]=binary_1.readUint32BE(p,j)}for(var i=16;i<64;i++){var u=w[i-2];var t1=(u>>>17|u<<32-17)^(u>>>19|u<<32-19)^u>>>10;u=w[i-15];var t2=(u>>>7|u<<32-7)^(u>>>18|u<<32-18)^u>>>3;w[i]=(t1+w[i-7]|0)+(t2+w[i-16]|0)}for(var i=0;i<64;i++){var t1=(((e>>>6|e<<32-6)^(e>>>11|e<<32-11)^(e>>>25|e<<32-25))+(e&f^~e&g)|0)+(h+(K[i]+w[i]|0)|0)|0;var t2=((a>>>2|a<<32-2)^(a>>>13|a<<32-13)^(a>>>22|a<<32-22))+(a&b^a&c^b&c)|0;h=g;g=f;f=e;e=d+t1|0;d=c;c=b;b=a;a=t1+t2|0}v[0]+=a;v[1]+=b;v[2]+=c;v[3]+=d;v[4]+=e;v[5]+=f;v[6]+=g;v[7]+=h;pos+=64;len-=64}return pos}function hash(data){var h=new SHA256;h.update(data);var digest=h.digest();h.clean();return digest}exports.hash=hash},18241:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});var binary_1=__webpack_require__(69539);var wipe_1=__webpack_require__(28601);exports.DIGEST_LENGTH=64;exports.BLOCK_SIZE=128;var SHA512=function(){function SHA512(){this.digestLength=exports.DIGEST_LENGTH;this.blockSize=exports.BLOCK_SIZE;this._stateHi=new Int32Array(8);this._stateLo=new Int32Array(8);this._tempHi=new Int32Array(16);this._tempLo=new Int32Array(16);this._buffer=new Uint8Array(256);this._bufferLength=0;this._bytesHashed=0;this._finished=false;this.reset()}SHA512.prototype._initState=function(){this._stateHi[0]=1779033703;this._stateHi[1]=3144134277;this._stateHi[2]=1013904242;this._stateHi[3]=2773480762;this._stateHi[4]=1359893119;this._stateHi[5]=2600822924;this._stateHi[6]=528734635;this._stateHi[7]=1541459225;this._stateLo[0]=4089235720;this._stateLo[1]=2227873595;this._stateLo[2]=4271175723;this._stateLo[3]=1595750129;this._stateLo[4]=2917565137;this._stateLo[5]=725511199;this._stateLo[6]=4215389547;this._stateLo[7]=327033209};SHA512.prototype.reset=function(){this._initState();this._bufferLength=0;this._bytesHashed=0;this._finished=false;return this};SHA512.prototype.clean=function(){wipe_1.wipe(this._buffer);wipe_1.wipe(this._tempHi);wipe_1.wipe(this._tempLo);this.reset()};SHA512.prototype.update=function(data,dataLength){if(dataLength===void 0){dataLength=data.length}if(this._finished){throw new Error("SHA512: can't update because hash was finished.")}var dataPos=0;this._bytesHashed+=dataLength;if(this._bufferLength>0){while(this._bufferLength<exports.BLOCK_SIZE&&dataLength>0){this._buffer[this._bufferLength++]=data[dataPos++];dataLength--}if(this._bufferLength===this.blockSize){hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize);this._bufferLength=0}}if(dataLength>=this.blockSize){dataPos=hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,data,dataPos,dataLength);dataLength%=this.blockSize}while(dataLength>0){this._buffer[this._bufferLength++]=data[dataPos++];dataLength--}return this};SHA512.prototype.finish=function(out){if(!this._finished){var bytesHashed=this._bytesHashed;var left=this._bufferLength;var bitLenHi=bytesHashed/536870912|0;var bitLenLo=bytesHashed<<3;var padLength=bytesHashed%128<112?128:256;this._buffer[left]=128;for(var i=left+1;i<padLength-8;i++){this._buffer[i]=0}binary_1.writeUint32BE(bitLenHi,this._buffer,padLength-8);binary_1.writeUint32BE(bitLenLo,this._buffer,padLength-4);hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,padLength);this._finished=true}for(var i=0;i<this.digestLength/8;i++){binary_1.writeUint32BE(this._stateHi[i],out,i*8);binary_1.writeUint32BE(this._stateLo[i],out,i*8+4)}return this};SHA512.prototype.digest=function(){var out=new Uint8Array(this.digestLength);this.finish(out);return out};SHA512.prototype.saveState=function(){if(this._finished){throw new Error("SHA256: cannot save finished state")}return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):undefined,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}};SHA512.prototype.restoreState=function(savedState){this._stateHi.set(savedState.stateHi);this._stateLo.set(savedState.stateLo);this._bufferLength=savedState.bufferLength;if(savedState.buffer){this._buffer.set(savedState.buffer)}this._bytesHashed=savedState.bytesHashed;this._finished=false;return this};SHA512.prototype.cleanSavedState=function(savedState){wipe_1.wipe(savedState.stateHi);wipe_1.wipe(savedState.stateLo);if(savedState.buffer){wipe_1.wipe(savedState.buffer)}savedState.bufferLength=0;savedState.bytesHashed=0};return SHA512}();exports.SHA512=SHA512;var K=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function hashBlocks(wh,wl,hh,hl,m,pos,len){var ah0=hh[0],ah1=hh[1],ah2=hh[2],ah3=hh[3],ah4=hh[4],ah5=hh[5],ah6=hh[6],ah7=hh[7],al0=hl[0],al1=hl[1],al2=hl[2],al3=hl[3],al4=hl[4],al5=hl[5],al6=hl[6],al7=hl[7];var h,l;var th,tl;var a,b,c,d;while(len>=128){for(var i=0;i<16;i++){var j=8*i+pos;wh[i]=binary_1.readUint32BE(m,j);wl[i]=binary_1.readUint32BE(m,j+4)}for(var i=0;i<80;i++){var bh0=ah0;var bh1=ah1;var bh2=ah2;var bh3=ah3;var bh4=ah4;var bh5=ah5;var bh6=ah6;var bh7=ah7;var bl0=al0;var bl1=al1;var bl2=al2;var bl3=al3;var bl4=al4;var bl5=al5;var bl6=al6;var bl7=al7;h=ah7;l=al7;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=(ah4>>>14|al4<<32-14)^(ah4>>>18|al4<<32-18)^(al4>>>41-32|ah4<<32-(41-32));l=(al4>>>14|ah4<<32-14)^(al4>>>18|ah4<<32-18)^(ah4>>>41-32|al4<<32-(41-32));a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;h=ah4&ah5^~ah4&ah6;l=al4&al5^~al4&al6;a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;h=K[i*2];l=K[i*2+1];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;h=wh[i%16];l=wl[i%16];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;th=c&65535|d<<16;tl=a&65535|b<<16;h=th;l=tl;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=(ah0>>>28|al0<<32-28)^(al0>>>34-32|ah0<<32-(34-32))^(al0>>>39-32|ah0<<32-(39-32));l=(al0>>>28|ah0<<32-28)^(ah0>>>34-32|al0<<32-(34-32))^(ah0>>>39-32|al0<<32-(39-32));a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;h=ah0&ah1^ah0&ah2^ah1&ah2;l=al0&al1^al0&al2^al1&al2;a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;bh7=c&65535|d<<16;bl7=a&65535|b<<16;h=bh3;l=bl3;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=th;l=tl;a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;bh3=c&65535|d<<16;bl3=a&65535|b<<16;ah1=bh0;ah2=bh1;ah3=bh2;ah4=bh3;ah5=bh4;ah6=bh5;ah7=bh6;ah0=bh7;al1=bl0;al2=bl1;al3=bl2;al4=bl3;al5=bl4;al6=bl5;al7=bl6;al0=bl7;if(i%16===15){for(var j=0;j<16;j++){h=wh[j];l=wl[j];a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=wh[(j+9)%16];l=wl[(j+9)%16];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;th=wh[(j+1)%16];tl=wl[(j+1)%16];h=(th>>>1|tl<<32-1)^(th>>>8|tl<<32-8)^th>>>7;l=(tl>>>1|th<<32-1)^(tl>>>8|th<<32-8)^(tl>>>7|th<<32-7);a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;th=wh[(j+14)%16];tl=wl[(j+14)%16];h=(th>>>19|tl<<32-19)^(tl>>>61-32|th<<32-(61-32))^th>>>6;l=(tl>>>19|th<<32-19)^(th>>>61-32|tl<<32-(61-32))^(tl>>>6|th<<32-6);a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;wh[j]=c&65535|d<<16;wl[j]=a&65535|b<<16}}}h=ah0;l=al0;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[0];l=hl[0];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[0]=ah0=c&65535|d<<16;hl[0]=al0=a&65535|b<<16;h=ah1;l=al1;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[1];l=hl[1];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[1]=ah1=c&65535|d<<16;hl[1]=al1=a&65535|b<<16;h=ah2;l=al2;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[2];l=hl[2];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[2]=ah2=c&65535|d<<16;hl[2]=al2=a&65535|b<<16;h=ah3;l=al3;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[3];l=hl[3];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[3]=ah3=c&65535|d<<16;hl[3]=al3=a&65535|b<<16;h=ah4;l=al4;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[4];l=hl[4];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[4]=ah4=c&65535|d<<16;hl[4]=al4=a&65535|b<<16;h=ah5;l=al5;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[5];l=hl[5];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[5]=ah5=c&65535|d<<16;hl[5]=al5=a&65535|b<<16;h=ah6;l=al6;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[6];l=hl[6];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[6]=ah6=c&65535|d<<16;hl[6]=al6=a&65535|b<<16;h=ah7;l=al7;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[7];l=hl[7];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[7]=ah7=c&65535|d<<16;hl[7]=al7=a&65535|b<<16;pos+=128;len-=128}return pos}function hash(data){var h=new SHA512;h.update(data);var digest=h.digest();h.clean();return digest}exports.hash=hash},28601:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});function wipe(array){for(var i=0;i<array.length;i++){array[i]=0}return array}exports.wipe=wipe},19495:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sharedKey=exports.generateKeyPair=exports.generateKeyPairFromSeed=exports.scalarMultBase=exports.scalarMult=exports.SHARED_KEY_LENGTH=exports.SECRET_KEY_LENGTH=exports.PUBLIC_KEY_LENGTH=void 0;const random_1=__webpack_require__(93571);const wipe_1=__webpack_require__(28601);exports.PUBLIC_KEY_LENGTH=32;exports.SECRET_KEY_LENGTH=32;exports.SHARED_KEY_LENGTH=32;function gf(init){const r=new Float64Array(16);if(init){for(let i=0;i<init.length;i++){r[i]=init[i]}}return r}const _9=new Uint8Array(32);_9[0]=9;const _121665=gf([56129,1]);function car25519(o){let c=1;for(let i=0;i<16;i++){let v=o[i]+c+65535;c=Math.floor(v/65536);o[i]=v-c*65536}o[0]+=c-1+37*(c-1)}function sel25519(p,q,b){const c=~(b-1);for(let i=0;i<16;i++){const t=c&(p[i]^q[i]);p[i]^=t;q[i]^=t}}function pack25519(o,n){const m=gf();const t=gf();for(let i=0;i<16;i++){t[i]=n[i]}car25519(t);car25519(t);car25519(t);for(let j=0;j<2;j++){m[0]=t[0]-65517;for(let i=1;i<15;i++){m[i]=t[i]-65535-(m[i-1]>>16&1);m[i-1]&=65535}m[15]=t[15]-32767-(m[14]>>16&1);const b=m[15]>>16&1;m[14]&=65535;sel25519(t,m,1-b)}for(let i=0;i<16;i++){o[2*i]=t[i]&255;o[2*i+1]=t[i]>>8}}function unpack25519(o,n){for(let i=0;i<16;i++){o[i]=n[2*i]+(n[2*i+1]<<8)}o[15]&=32767}function add(o,a,b){for(let i=0;i<16;i++){o[i]=a[i]+b[i]}}function sub(o,a,b){for(let i=0;i<16;i++){o[i]=a[i]-b[i]}}function mul(o,a,b){let v,c,t0=0,t1=0,t2=0,t3=0,t4=0,t5=0,t6=0,t7=0,t8=0,t9=0,t10=0,t11=0,t12=0,t13=0,t14=0,t15=0,t16=0,t17=0,t18=0,t19=0,t20=0,t21=0,t22=0,t23=0,t24=0,t25=0,t26=0,t27=0,t28=0,t29=0,t30=0,b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];v=a[0];t0+=v*b0;t1+=v*b1;t2+=v*b2;t3+=v*b3;t4+=v*b4;t5+=v*b5;t6+=v*b6;t7+=v*b7;t8+=v*b8;t9+=v*b9;t10+=v*b10;t11+=v*b11;t12+=v*b12;t13+=v*b13;t14+=v*b14;t15+=v*b15;v=a[1];t1+=v*b0;t2+=v*b1;t3+=v*b2;t4+=v*b3;t5+=v*b4;t6+=v*b5;t7+=v*b6;t8+=v*b7;t9+=v*b8;t10+=v*b9;t11+=v*b10;t12+=v*b11;t13+=v*b12;t14+=v*b13;t15+=v*b14;t16+=v*b15;v=a[2];t2+=v*b0;t3+=v*b1;t4+=v*b2;t5+=v*b3;t6+=v*b4;t7+=v*b5;t8+=v*b6;t9+=v*b7;t10+=v*b8;t11+=v*b9;t12+=v*b10;t13+=v*b11;t14+=v*b12;t15+=v*b13;t16+=v*b14;t17+=v*b15;v=a[3];t3+=v*b0;t4+=v*b1;t5+=v*b2;t6+=v*b3;t7+=v*b4;t8+=v*b5;t9+=v*b6;t10+=v*b7;t11+=v*b8;t12+=v*b9;t13+=v*b10;t14+=v*b11;t15+=v*b12;t16+=v*b13;t17+=v*b14;t18+=v*b15;v=a[4];t4+=v*b0;t5+=v*b1;t6+=v*b2;t7+=v*b3;t8+=v*b4;t9+=v*b5;t10+=v*b6;t11+=v*b7;t12+=v*b8;t13+=v*b9;t14+=v*b10;t15+=v*b11;t16+=v*b12;t17+=v*b13;t18+=v*b14;t19+=v*b15;v=a[5];t5+=v*b0;t6+=v*b1;t7+=v*b2;t8+=v*b3;t9+=v*b4;t10+=v*b5;t11+=v*b6;t12+=v*b7;t13+=v*b8;t14+=v*b9;t15+=v*b10;t16+=v*b11;t17+=v*b12;t18+=v*b13;t19+=v*b14;t20+=v*b15;v=a[6];t6+=v*b0;t7+=v*b1;t8+=v*b2;t9+=v*b3;t10+=v*b4;t11+=v*b5;t12+=v*b6;t13+=v*b7;t14+=v*b8;t15+=v*b9;t16+=v*b10;t17+=v*b11;t18+=v*b12;t19+=v*b13;t20+=v*b14;t21+=v*b15;v=a[7];t7+=v*b0;t8+=v*b1;t9+=v*b2;t10+=v*b3;t11+=v*b4;t12+=v*b5;t13+=v*b6;t14+=v*b7;t15+=v*b8;t16+=v*b9;t17+=v*b10;t18+=v*b11;t19+=v*b12;t20+=v*b13;t21+=v*b14;t22+=v*b15;v=a[8];t8+=v*b0;t9+=v*b1;t10+=v*b2;t11+=v*b3;t12+=v*b4;t13+=v*b5;t14+=v*b6;t15+=v*b7;t16+=v*b8;t17+=v*b9;t18+=v*b10;t19+=v*b11;t20+=v*b12;t21+=v*b13;t22+=v*b14;t23+=v*b15;v=a[9];t9+=v*b0;t10+=v*b1;t11+=v*b2;t12+=v*b3;t13+=v*b4;t14+=v*b5;t15+=v*b6;t16+=v*b7;t17+=v*b8;t18+=v*b9;t19+=v*b10;t20+=v*b11;t21+=v*b12;t22+=v*b13;t23+=v*b14;t24+=v*b15;v=a[10];t10+=v*b0;t11+=v*b1;t12+=v*b2;t13+=v*b3;t14+=v*b4;t15+=v*b5;t16+=v*b6;t17+=v*b7;t18+=v*b8;t19+=v*b9;t20+=v*b10;t21+=v*b11;t22+=v*b12;t23+=v*b13;t24+=v*b14;t25+=v*b15;v=a[11];t11+=v*b0;t12+=v*b1;t13+=v*b2;t14+=v*b3;t15+=v*b4;t16+=v*b5;t17+=v*b6;t18+=v*b7;t19+=v*b8;t20+=v*b9;t21+=v*b10;t22+=v*b11;t23+=v*b12;t24+=v*b13;t25+=v*b14;t26+=v*b15;v=a[12];t12+=v*b0;t13+=v*b1;t14+=v*b2;t15+=v*b3;t16+=v*b4;t17+=v*b5;t18+=v*b6;t19+=v*b7;t20+=v*b8;t21+=v*b9;t22+=v*b10;t23+=v*b11;t24+=v*b12;t25+=v*b13;t26+=v*b14;t27+=v*b15;v=a[13];t13+=v*b0;t14+=v*b1;t15+=v*b2;t16+=v*b3;t17+=v*b4;t18+=v*b5;t19+=v*b6;t20+=v*b7;t21+=v*b8;t22+=v*b9;t23+=v*b10;t24+=v*b11;t25+=v*b12;t26+=v*b13;t27+=v*b14;t28+=v*b15;v=a[14];t14+=v*b0;t15+=v*b1;t16+=v*b2;t17+=v*b3;t18+=v*b4;t19+=v*b5;t20+=v*b6;t21+=v*b7;t22+=v*b8;t23+=v*b9;t24+=v*b10;t25+=v*b11;t26+=v*b12;t27+=v*b13;t28+=v*b14;t29+=v*b15;v=a[15];t15+=v*b0;t16+=v*b1;t17+=v*b2;t18+=v*b3;t19+=v*b4;t20+=v*b5;t21+=v*b6;t22+=v*b7;t23+=v*b8;t24+=v*b9;t25+=v*b10;t26+=v*b11;t27+=v*b12;t28+=v*b13;t29+=v*b14;t30+=v*b15;t0+=38*t16;t1+=38*t17;t2+=38*t18;t3+=38*t19;t4+=38*t20;t5+=38*t21;t6+=38*t22;t7+=38*t23;t8+=38*t24;t9+=38*t25;t10+=38*t26;t11+=38*t27;t12+=38*t28;t13+=38*t29;t14+=38*t30;c=1;v=t0+c+65535;c=Math.floor(v/65536);t0=v-c*65536;v=t1+c+65535;c=Math.floor(v/65536);t1=v-c*65536;v=t2+c+65535;c=Math.floor(v/65536);t2=v-c*65536;v=t3+c+65535;c=Math.floor(v/65536);t3=v-c*65536;v=t4+c+65535;c=Math.floor(v/65536);t4=v-c*65536;v=t5+c+65535;c=Math.floor(v/65536);t5=v-c*65536;v=t6+c+65535;c=Math.floor(v/65536);t6=v-c*65536;v=t7+c+65535;c=Math.floor(v/65536);t7=v-c*65536;v=t8+c+65535;c=Math.floor(v/65536);t8=v-c*65536;v=t9+c+65535;c=Math.floor(v/65536);t9=v-c*65536;v=t10+c+65535;c=Math.floor(v/65536);t10=v-c*65536;v=t11+c+65535;c=Math.floor(v/65536);t11=v-c*65536;v=t12+c+65535;c=Math.floor(v/65536);t12=v-c*65536;v=t13+c+65535;c=Math.floor(v/65536);t13=v-c*65536;v=t14+c+65535;c=Math.floor(v/65536);t14=v-c*65536;v=t15+c+65535;c=Math.floor(v/65536);t15=v-c*65536;t0+=c-1+37*(c-1);c=1;v=t0+c+65535;c=Math.floor(v/65536);t0=v-c*65536;v=t1+c+65535;c=Math.floor(v/65536);t1=v-c*65536;v=t2+c+65535;c=Math.floor(v/65536);t2=v-c*65536;v=t3+c+65535;c=Math.floor(v/65536);t3=v-c*65536;v=t4+c+65535;c=Math.floor(v/65536);t4=v-c*65536;v=t5+c+65535;c=Math.floor(v/65536);t5=v-c*65536;v=t6+c+65535;c=Math.floor(v/65536);t6=v-c*65536;v=t7+c+65535;c=Math.floor(v/65536);t7=v-c*65536;v=t8+c+65535;c=Math.floor(v/65536);t8=v-c*65536;v=t9+c+65535;c=Math.floor(v/65536);t9=v-c*65536;v=t10+c+65535;c=Math.floor(v/65536);t10=v-c*65536;v=t11+c+65535;c=Math.floor(v/65536);t11=v-c*65536;v=t12+c+65535;c=Math.floor(v/65536);t12=v-c*65536;v=t13+c+65535;c=Math.floor(v/65536);t13=v-c*65536;v=t14+c+65535;c=Math.floor(v/65536);t14=v-c*65536;v=t15+c+65535;c=Math.floor(v/65536);t15=v-c*65536;t0+=c-1+37*(c-1);o[0]=t0;o[1]=t1;o[2]=t2;o[3]=t3;o[4]=t4;o[5]=t5;o[6]=t6;o[7]=t7;o[8]=t8;o[9]=t9;o[10]=t10;o[11]=t11;o[12]=t12;o[13]=t13;o[14]=t14;o[15]=t15}function square(o,a){mul(o,a,a)}function inv25519(o,inp){const c=gf();for(let i=0;i<16;i++){c[i]=inp[i]}for(let i=253;i>=0;i--){square(c,c);if(i!==2&&i!==4){mul(c,c,inp)}}for(let i=0;i<16;i++){o[i]=c[i]}}function scalarMult(n,p){const z=new Uint8Array(32);const x=new Float64Array(80);const a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf();for(let i=0;i<31;i++){z[i]=n[i]}z[31]=n[31]&127|64;z[0]&=248;unpack25519(x,p);for(let i=0;i<16;i++){b[i]=x[i]}a[0]=d[0]=1;for(let i=254;i>=0;--i){const r=z[i>>>3]>>>(i&7)&1;sel25519(a,b,r);sel25519(c,d,r);add(e,a,c);sub(a,a,c);add(c,b,d);sub(b,b,d);square(d,e);square(f,a);mul(a,c,a);mul(c,b,e);add(e,a,c);sub(a,a,c);square(b,a);sub(c,d,f);mul(a,c,_121665);add(a,a,d);mul(c,c,a);mul(a,d,f);mul(d,b,x);square(b,e);sel25519(a,b,r);sel25519(c,d,r)}for(let i=0;i<16;i++){x[i+16]=a[i];x[i+32]=c[i];x[i+48]=b[i];x[i+64]=d[i]}const x32=x.subarray(32);const x16=x.subarray(16);inv25519(x32,x32);mul(x16,x16,x32);const q=new Uint8Array(32);pack25519(q,x16);return q}exports.scalarMult=scalarMult;function scalarMultBase(n){return scalarMult(n,_9)}exports.scalarMultBase=scalarMultBase;function generateKeyPairFromSeed(seed){if(seed.length!==exports.SECRET_KEY_LENGTH){throw new Error(`x25519: seed must be ${exports.SECRET_KEY_LENGTH} bytes`)}const secretKey=new Uint8Array(seed);const publicKey=scalarMultBase(secretKey);return{publicKey,secretKey}}exports.generateKeyPairFromSeed=generateKeyPairFromSeed;function generateKeyPair(prng){const seed=(0,random_1.randomBytes)(32,prng);const result=generateKeyPairFromSeed(seed);(0,wipe_1.wipe)(seed);return result}exports.generateKeyPair=generateKeyPair;function sharedKey(mySecretKey,theirPublicKey,rejectZero=false){if(mySecretKey.length!==exports.PUBLIC_KEY_LENGTH){throw new Error("X25519: incorrect secret key length")}if(theirPublicKey.length!==exports.PUBLIC_KEY_LENGTH){throw new Error("X25519: incorrect public key length")}const result=scalarMult(mySecretKey,theirPublicKey);if(rejectZero){let zeros=0;for(let i=0;i<result.length;i++){zeros|=result[i]}if(zeros===0){throw new Error("X25519: invalid shared key")}}return result}exports.sharedKey=sharedKey},69603:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var L=__webpack_require__(63683),lt=__webpack_require__(51376),gt=__webpack_require__(58423),k=__webpack_require__(69701),l=__webpack_require__(41417),x=__webpack_require__(64882),te=__webpack_require__(97530),dt=__webpack_require__(44576),o=__webpack_require__(85562),p=__webpack_require__(87508),pt=__webpack_require__(79328),I=__webpack_require__(8378),Dt=__webpack_require__(79950),yt=__webpack_require__(45893);function F(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}function Et(r){if(r&&r.__esModule)return r;var e=Object.create(null);return r&&Object.keys(r).forEach((function(t){if(t!=="default"){var i=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,i.get?i:{enumerable:!0,get:function(){return r[t]}})}})),e.default=r,Object.freeze(e)}var bt=F(L),ie=F(lt),mt=F(gt),V=Et(dt),ft=F(Dt),wt=F(yt);function vt(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var s=0;s<r.length;s++){var n=r.charAt(s),a=n.charCodeAt(0);if(t[a]!==255)throw new TypeError(n+" is ambiguous");t[a]=s}var h=r.length,c=r.charAt(0),d=Math.log(h)/Math.log(256),g=Math.log(256)/Math.log(h);function D(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";for(var b=0,N=0,w=0,C=u.length;w!==C&&u[w]===0;)w++,b++;for(var T=(C-w)*g+1>>>0,m=new Uint8Array(T);w!==C;){for(var S=u[w],A=0,v=T-1;(S!==0||A<N)&&v!==-1;v--,A++)S+=256*m[v]>>>0,m[v]=S%h>>>0,S=S/h>>>0;if(S!==0)throw new Error("Non-zero carry");N=A,w++}for(var O=T-N;O!==T&&m[O]===0;)O++;for(var $=c.repeat(b);O<T;++O)$+=r.charAt(m[O]);return $}function U(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;var b=0;if(u[b]!==" "){for(var N=0,w=0;u[b]===c;)N++,b++;for(var C=(u.length-b)*d+1>>>0,T=new Uint8Array(C);u[b];){var m=t[u.charCodeAt(b)];if(m===255)return;for(var S=0,A=C-1;(m!==0||S<w)&&A!==-1;A--,S++)m+=h*T[A]>>>0,T[A]=m%256>>>0,m=m/256>>>0;if(m!==0)throw new Error("Non-zero carry");w=S,b++}if(u[b]!==" "){for(var v=C-w;v!==C&&T[v]===0;)v++;for(var O=new Uint8Array(N+(C-v)),$=N;v!==C;)O[$++]=T[v++];return O}}}function G(u){var b=U(u);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:D,decodeUnsafe:U,decode:G}}var It=vt,Rt=It;const se=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},_t=r=>(new TextEncoder).encode(r),Ct=r=>(new TextDecoder).decode(r);class Tt{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class St{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return re(this,e)}}class Ot{constructor(e){this.decoders=e}or(e){return re(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const re=(r,e)=>new Ot({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class Pt{constructor(e,t,i,s){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=s,this.encoder=new Tt(e,t,i),this.decoder=new St(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const j=({name:r,prefix:e,encode:t,decode:i})=>new Pt(r,e,t,i),M=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:s}=Rt(t,e);return j({prefix:r,name:e,encode:i,decode:n=>se(s(n))})},At=(r,e,t,i)=>{const s={};for(let g=0;g<e.length;++g)s[e[g]]=g;let n=r.length;for(;r[n-1]==="=";)--n;const a=new Uint8Array(n*t/8|0);let h=0,c=0,d=0;for(let g=0;g<n;++g){const D=s[r[g]];if(D===void 0)throw new SyntaxError(`Non-${i} character`);c=c<<t|D,h+=t,h>=8&&(h-=8,a[d++]=255&c>>h)}if(h>=t||255&c<<8-h)throw new SyntaxError("Unexpected end of data");return a},xt=(r,e,t)=>{const i=e[e.length-1]==="=",s=(1<<t)-1;let n="",a=0,h=0;for(let c=0;c<r.length;++c)for(h=h<<8|r[c],a+=8;a>t;)a-=t,n+=e[s&h>>a];if(a&&(n+=e[s&h<<t-a]),i)for(;n.length*t&7;)n+="=";return n},y=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>j({prefix:e,name:r,encode(s){return xt(s,i,t)},decode(s){return At(s,i,t,r)}}),Nt=j({prefix:"\0",name:"identity",encode:r=>Ct(r),decode:r=>_t(r)});var Lt=Object.freeze({__proto__:null,identity:Nt});const zt=y({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Ut=Object.freeze({__proto__:null,base2:zt});const Ft=y({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Mt=Object.freeze({__proto__:null,base8:Ft});const Bt=M({prefix:"9",name:"base10",alphabet:"0123456789"});var Kt=Object.freeze({__proto__:null,base10:Bt});const $t=y({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),kt=y({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Vt=Object.freeze({__proto__:null,base16:$t,base16upper:kt});const jt=y({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),qt=y({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Yt=y({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Gt=y({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Xt=y({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ht=y({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Jt=y({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Wt=y({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Zt=y({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Qt=Object.freeze({__proto__:null,base32:jt,base32upper:qt,base32pad:Yt,base32padupper:Gt,base32hex:Xt,base32hexupper:Ht,base32hexpad:Jt,base32hexpadupper:Wt,base32z:Zt});const ei=M({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ti=M({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ii=Object.freeze({__proto__:null,base36:ei,base36upper:ti});const si=M({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ri=M({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ni=Object.freeze({__proto__:null,base58btc:si,base58flickr:ri});const ai=y({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),oi=y({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),hi=y({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ci=y({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var ui=Object.freeze({__proto__:null,base64:ai,base64pad:oi,base64url:hi,base64urlpad:ci});const ne=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),li=ne.reduce(((r,e,t)=>(r[t]=e,r)),[]),gi=ne.reduce(((r,e,t)=>(r[e.codePointAt(0)]=t,r)),[]);function di(r){return r.reduce(((e,t)=>(e+=li[t],e)),"")}function pi(r){const e=[];for(const t of r){const i=gi[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const Di=j({prefix:"🚀",name:"base256emoji",encode:di,decode:pi});var yi=Object.freeze({__proto__:null,base256emoji:Di}),Ei=oe,ae=128,bi=127,mi=~bi,fi=Math.pow(2,31);function oe(r,e,t){e=e||[],t=t||0;for(var i=t;r>=fi;)e[t++]=r&255|ae,r/=128;for(;r&mi;)e[t++]=r&255|ae,r>>>=7;return e[t]=r|0,oe.bytes=t-i+1,e}var wi=X,vi=128,he=127;function X(r,i){var t=0,i=i||0,s=0,n=i,a,h=r.length;do{if(n>=h)throw X.bytes=0,new RangeError("Could not decode varint");a=r[n++],t+=s<28?(a&he)<<s:(a&he)*Math.pow(2,s),s+=7}while(a>=vi);return X.bytes=n-i,t}var Ii=Math.pow(2,7),Ri=Math.pow(2,14),_i=Math.pow(2,21),Ci=Math.pow(2,28),Ti=Math.pow(2,35),Si=Math.pow(2,42),Oi=Math.pow(2,49),Pi=Math.pow(2,56),Ai=Math.pow(2,63),xi=function(r){return r<Ii?1:r<Ri?2:r<_i?3:r<Ci?4:r<Ti?5:r<Si?6:r<Oi?7:r<Pi?8:r<Ai?9:10},Ni={encode:Ei,decode:wi,encodingLength:xi},ce=Ni;const ue=(r,e,t=0)=>(ce.encode(r,e,t),e),le=r=>ce.encodingLength(r),H=(r,e)=>{const t=e.byteLength,i=le(r),s=i+le(t),n=new Uint8Array(s+t);return ue(r,n,0),ue(t,n,i),n.set(e,s),new Li(r,t,e,n)};class Li{constructor(e,t,i,s){this.code=e,this.size=t,this.digest=i,this.bytes=s}}const ge=({name:r,code:e,encode:t})=>new zi(r,e,t);class zi{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?H(this.code,t):t.then((i=>H(this.code,i)))}else throw Error("Unknown type, must be binary type")}}const de=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),Ui=ge({name:"sha2-256",code:18,encode:de("SHA-256")}),Fi=ge({name:"sha2-512",code:19,encode:de("SHA-512")});var Mi=Object.freeze({__proto__:null,sha256:Ui,sha512:Fi});const pe=0,Bi="identity",De=se,Ki=r=>H(pe,De(r)),$i={code:pe,name:Bi,encode:De,digest:Ki};var ki=Object.freeze({__proto__:null,identity:$i});new TextEncoder,new TextDecoder;const ye={...Lt,...Ut,...Mt,...Kt,...Vt,...Qt,...ii,...ni,...ui,...yi};({...Mi,...ki});function Vi(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function Ee(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const be=Ee("utf8","u",(r=>"u"+new TextDecoder("utf8").decode(r)),(r=>(new TextEncoder).encode(r.substring(1)))),J=Ee("ascii","a",(r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}),(r=>{r=r.substring(1);const e=Vi(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e})),ji={utf8:be,"utf-8":be,hex:ye.base16,latin1:J,ascii:J,binary:J,...ye};function qi(r,e="utf8"){const t=ji[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}const W="wc",me=2,q="core",P=`${W}@${2}:${q}:`,fe={name:q,logger:"error"},we={database:":memory:"},ve="crypto",Z="client_ed25519_seed",Ie=p.ONE_DAY,Re="keychain",_e="0.3",Ce="messages",Te="0.3",Se=p.SIX_HOURS,Oe="publisher",Pe="irn",Ae="error",Q="wss://relay.walletconnect.com",xe="relayer",E={message:"relayer_message",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Ne="_subscription",B={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Le=p.ONE_SECOND,Yi={database:":memory:"},ze="2.5.2",Ue="0.3",R={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Gi=p.THIRTY_DAYS,Fe="subscription",Me="0.3",Be=p.FIVE_SECONDS*1e3,Ke="pairing",$e="0.3",Xi=p.THIRTY_DAYS,z={wc_pairingDelete:{req:{ttl:p.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:p.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:p.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:p.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:p.ONE_DAY,prompt:!1,tag:0},res:{ttl:p.ONE_DAY,prompt:!1,tag:0}}},_={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},ke="history",Ve="0.3",je="expirer",f={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},qe="0.3",Hi=p.ONE_DAY;class Ye{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=Re,this.version=_e,this.initialized=!1,this.storagePrefix=P,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,s)=>{this.isInitialized(),this.keychain.set(i,s),await this.persist()},this.get=i=>{this.isInitialized();const s=this.keychain.get(i);if(typeof s>"u"){const{message:n}=o.getInternalError("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(n)}return s},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=l.generateChildLogger(t,this.name)}get context(){return l.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,o.mapToObj(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?o.objToMap(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=o.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Ge{constructor(e,t,i){this.core=e,this.logger=t,this.name=ve,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=s=>(this.isInitialized(),this.keychain.has(s)),this.getClientId=async()=>{this.isInitialized();const s=await this.getClientSeed(),n=V.generateKeyPair(s);return V.encodeIss(n.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const s=o.generateKeyPair();return this.setPrivateKey(s.publicKey,s.privateKey)},this.signJWT=async s=>{this.isInitialized();const n=await this.getClientSeed(),a=V.generateKeyPair(n),h=o.generateRandomBytes32(),c=Ie;return await V.signJWT(h,s,c,a)},this.generateSharedKey=(s,n,a)=>{this.isInitialized();const h=this.getPrivateKey(s),c=o.deriveSymKey(h,n);return this.setSymKey(c,a)},this.setSymKey=async(s,n)=>{this.isInitialized();const a=n||o.hashKey(s);return await this.keychain.set(a,s),a},this.deleteKeyPair=async s=>{this.isInitialized(),await this.keychain.del(s)},this.deleteSymKey=async s=>{this.isInitialized(),await this.keychain.del(s)},this.encode=async(s,n,a)=>{this.isInitialized();const h=o.validateEncoding(a),c=te.safeJsonStringify(n);if(o.isTypeOneEnvelope(h)){const U=h.senderPublicKey,G=h.receiverPublicKey;s=await this.generateSharedKey(U,G)}const d=this.getSymKey(s),{type:g,senderPublicKey:D}=h;return o.encrypt({type:g,symKey:d,message:c,senderPublicKey:D})},this.decode=async(s,n,a)=>{this.isInitialized();const h=o.validateDecoding(n,a);if(o.isTypeOneEnvelope(h)){const g=h.receiverPublicKey,D=h.senderPublicKey;s=await this.generateSharedKey(g,D)}const c=this.getSymKey(s),d=o.decrypt({symKey:c,encoded:n});return te.safeJsonParse(d)},this.core=e,this.logger=l.generateChildLogger(t,this.name),this.keychain=i||new Ye(this.core,this.logger)}get context(){return l.getLoggerContext(this.logger)}getPayloadType(e){const t=o.deserialize(e);return o.decodeTypeByte(t.type)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Z)}catch{e=o.generateRandomBytes32(),await this.keychain.set(Z,e)}return qi(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=o.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Xe extends x.IMessageTracker{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=Ce,this.version=Te,this.initialized=!1,this.storagePrefix=P,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,s)=>{this.isInitialized();const n=o.hashMessage(s);let a=this.messages.get(i);return typeof a>"u"&&(a={}),typeof a[n]<"u"||(a[n]=s,this.messages.set(i,a),await this.persist()),n},this.get=i=>{this.isInitialized();let s=this.messages.get(i);return typeof s>"u"&&(s={}),s},this.has=(i,s)=>{this.isInitialized();const n=this.get(i),a=o.hashMessage(s);return typeof n[a]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=l.generateChildLogger(e,this.name),this.core=t}get context(){return l.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,o.mapToObj(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?o.objToMap(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=o.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Ji extends x.IPublisher{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new L.EventEmitter,this.name=Oe,this.queue=new Map,this.publishTimeout=1e4,this.publish=async(i,s,n)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:n}});try{const a=n?.ttl||Se,h=o.getRelayProtocolName(n),c=n?.prompt||!1,d=n?.tag||0,g={topic:i,message:s,opts:{ttl:a,relay:h,prompt:c,tag:d}},D=o.hashMessage(s);this.queue.set(D,g);try{await await o.createExpiringPromise(this.rpcPublish(i,s,a,h,c,d),this.publishTimeout),this.relayer.events.emit(E.publish,g)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(E.connection_stalled);return}this.onPublish(D,g),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:n}})}catch(a){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(a),a}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.relayer=e,this.logger=l.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return l.getLoggerContext(this.logger)}rpcPublish(e,t,i,s,n,a){var h,c,d,g;const D={method:o.getRelayProtocolApi(s.protocol).publish,params:{topic:e,message:t,ttl:i,prompt:n,tag:a}};return o.isUndefined((h=D.params)==null?void 0:h.prompt)&&((c=D.params)==null||delete c.prompt),o.isUndefined((d=D.params)==null?void 0:d.tag)&&((g=D.params)==null||delete g.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:D}),this.relayer.request(D)}onPublish(e,t){this.queue.delete(e)}checkQueue(){this.queue.forEach((async e=>{const{topic:t,message:i,opts:s}=e;await this.publish(t,i,s)}))}registerEventListeners(){this.relayer.core.heartbeat.on(k.HEARTBEAT_EVENTS.pulse,(()=>{this.checkQueue()}))}}class Wi{constructor(){this.map=new Map,this.set=(e,t)=>{const i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,t))return;const s=i.filter((n=>n!==t));if(!s.length){this.map.delete(e);return}this.map.set(e,s)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Zi=Object.defineProperty,Qi=Object.defineProperties,es=Object.getOwnPropertyDescriptors,He=Object.getOwnPropertySymbols,ts=Object.prototype.hasOwnProperty,is=Object.prototype.propertyIsEnumerable,Je=(r,e,t)=>e in r?Zi(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,K=(r,e)=>{for(var t in e||(e={}))ts.call(e,t)&&Je(r,t,e[t]);if(He)for(var t of He(e))is.call(e,t)&&Je(r,t,e[t]);return r},ee=(r,e)=>Qi(r,es(e));class We extends x.ISubscriber{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new Wi,this.events=new L.EventEmitter,this.name=Fe,this.version=Me,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=P,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(i,s)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}});try{const n=o.getRelayProtocolName(s),a={topic:i,relay:n};this.pending.set(i,a);const h=await this.rpcSubscribe(i,n);return this.onSubscribe(h,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}}),h}catch(n){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(n),n}},this.unsubscribe=async(i,s)=>{await this.restartToComplete(),this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(i,s.id,s):await this.unsubscribeByTopic(i,s)},this.isSubscribed=async i=>this.topics.includes(i)?!0:await new Promise(((s,n)=>{const a=new p.Watch;a.start(this.pendingSubscriptionWatchLabel);const h=setInterval((()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(h),a.stop(this.pendingSubscriptionWatchLabel),s(!0)),a.elapsed(this.pendingSubscriptionWatchLabel)>=Be&&(clearInterval(h),a.stop(this.pendingSubscriptionWatchLabel),n(!1))}),this.pollingInterval)})),this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=l.generateChildLogger(t,this.name),this.clientId=""}get context(){return l.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const i=this.topicMap.get(e);await Promise.all(i.map((async s=>await this.unsubscribeById(e,s,t))))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{const s=o.getRelayProtocolName(i);await this.rpcUnsubscribe(e,t,s);const n=o.getSdkError("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,n),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,t){const i={method:o.getRelayProtocolApi(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await o.createExpiringPromise(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(E.connection_stalled)}return o.hashMessage(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,i={method:o.getRelayProtocolApi(t.protocol).batchSubscribe,params:{topics:e.map((s=>s.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await o.createExpiringPromise(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(E.connection_stalled)}}rpcUnsubscribe(e,t,i){const s={method:o.getRelayProtocolApi(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,t){this.setSubscription(e,ee(K({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach((t=>{this.setSubscription(t.id,K({},t)),this.pending.delete(t.topic)}))}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,K({},t)),this.topicMap.set(t.topic,e),this.events.emit(R.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:i}=o.getInternalError("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(R.deleted,ee(K({},i),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(R.sync)}async reset(){if(!this.cached.length)return;const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}this.events.emit(R.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=o.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);o.isValidArray(t)&&this.onBatchSubscribe(t.map(((i,s)=>ee(K({},e[s]),{id:i}))))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach((t=>{e.push(t)})),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(k.HEARTBEAT_EVENTS.pulse,(async()=>{await this.checkPending()})),this.relayer.on(E.connect,(async()=>{await this.onConnect()})),this.relayer.on(E.disconnect,(()=>{this.onDisconnect()})),this.events.on(R.created,(async e=>{const t=R.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})),this.events.on(R.deleted,(async e=>{const t=R.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=o.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise((e=>{const t=setInterval((()=>{this.restartInProgress||(clearInterval(t),e())}),this.pollingInterval)}))}}var ss=Object.defineProperty,Ze=Object.getOwnPropertySymbols,rs=Object.prototype.hasOwnProperty,ns=Object.prototype.propertyIsEnumerable,Qe=(r,e,t)=>e in r?ss(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,as=(r,e)=>{for(var t in e||(e={}))rs.call(e,t)&&Qe(r,t,e[t]);if(Ze)for(var t of Ze(e))ns.call(e,t)&&Qe(r,t,e[t]);return r};class et extends x.IRelayer{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new L.EventEmitter,this.name=xe,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(i){throw this.logger.debug("Failed to Publish Request"),this.logger.error(i),i}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?l.generateChildLogger(e.logger,this.name):ie.default(l.getDefaultLoggerOptions({level:e.logger||Ae})),this.messages=new Xe(this.logger,e.core),this.subscriber=new We(this,this.logger),this.publisher=new Ji(this,this.logger),this.relayUrl=e?.relayUrl||Q,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0}get context(){return l.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){this.isInitialized();let i="";return await Promise.all([new Promise((s=>{this.subscriber.once(R.created,(n=>{n.topic===e&&s()}))})),new Promise((async s=>{i=await this.subscriber.subscribe(e,t),s()}))]),i}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(E.transport_closed))}async transportOpen(e){if(!this.reconnecting){this.relayUrl=e||this.relayUrl,this.transportExplicitlyClosed=!1,this.reconnecting=!0;try{await Promise.all([new Promise((t=>{this.initialized||t(),this.subscriber.once(R.resubscribed,(()=>{t()}))})),await Promise.race([new Promise((async(t,i)=>{await o.createExpiringPromise(this.provider.connect(),5e3,"socket stalled").catch((s=>i(s))).then((()=>t())).finally((()=>this.removeListener(E.transport_closed,this.rejectTransportOpen)))})),new Promise((t=>this.once(E.transport_closed,this.rejectTransportOpen)))])])}catch(t){this.logger.error(t);const i=t;if(!this.isConnectionStalled(i.message))throw t;this.events.emit(E.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some((t=>e.includes(t)))}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new pt.JsonRpcProvider(new ft.default(o.formatRelayRpcUrl({sdkVersion:ze,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:i}=e;await this.messages.set(t,i)}async shouldIgnoreMessageEvent(e){const{topic:t,message:i}=e;return await this.subscriber.isSubscribed(t)?this.messages.has(t,i):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),I.isJsonRpcRequest(e)){if(!e.method.endsWith(Ne))return;const t=e.params,{topic:i,message:s,publishedAt:n}=t.data,a={topic:i,message:s,publishedAt:n};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(as({type:"event",event:t.id},a)),this.events.emit(t.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(E.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=I.formatJsonRpcResult(e.id,!0);await this.provider.connection.send(t)}registerProviderListeners(){this.provider.on(B.payload,(e=>this.onProviderPayload(e))),this.provider.on(B.connect,(()=>{this.events.emit(E.connect)})),this.provider.on(B.disconnect,(()=>{this.onProviderDisconnect()})),this.provider.on(B.error,(e=>{this.logger.error(e),this.events.emit(E.error,e)}))}registerEventListeners(){this.events.on(E.connection_stalled,(async()=>{await this.restartTransport()}))}onProviderDisconnect(){this.events.emit(E.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout((async()=>{await this.restartTransport()}),p.toMiliseconds(Le))}isInitialized(){if(!this.initialized){const{message:e}=o.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise((e=>{const t=setInterval((()=>{this.connected&&(clearInterval(t),e())}),this.connectionStatusPollingInterval)}));await this.restartTransport()}}}var os=Object.defineProperty,tt=Object.getOwnPropertySymbols,hs=Object.prototype.hasOwnProperty,cs=Object.prototype.propertyIsEnumerable,it=(r,e,t)=>e in r?os(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,st=(r,e)=>{for(var t in e||(e={}))hs.call(e,t)&&it(r,t,e[t]);if(tt)for(var t of tt(e))cs.call(e,t)&&it(r,t,e[t]);return r};class rt extends x.IStore{constructor(e,t,i,s=P,n=void 0){super(e,t,i,s),this.core=e,this.logger=t,this.name=i,this.map=new Map,this.version=Ue,this.cached=[],this.initialized=!1,this.storagePrefix=P,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((a=>{this.getKey&&a!==null&&!o.isUndefined(a)?this.map.set(this.getKey(a),a):o.isProposalStruct(a)?this.map.set(a.id,a):o.isSessionStruct(a)&&this.map.set(a.topic,a)})),this.cached=[],this.initialized=!0)},this.set=async(a,h)=>{this.isInitialized(),this.map.has(a)?await this.update(a,h):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:a,value:h}),this.map.set(a,h),await this.persist())},this.get=a=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:a}),this.getData(a)),this.getAll=a=>(this.isInitialized(),a?this.values.filter((h=>Object.keys(a).every((c=>wt.default(h[c],a[c]))))):this.values),this.update=async(a,h)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:a,update:h});const c=st(st({},this.getData(a)),h);this.map.set(a,c),await this.persist()},this.delete=async(a,h)=>{this.isInitialized(),this.map.has(a)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:a,reason:h}),this.map.delete(a),await this.persist())},this.logger=l.generateChildLogger(t,this.name),this.storagePrefix=s,this.getKey=n}get context(){return l.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:i}=o.getInternalError("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=o.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=o.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}}class nt{constructor(e,t){this.core=e,this.logger=t,this.name=Ke,this.version=$e,this.events=new bt.default,this.initialized=!1,this.storagePrefix=P,this.ignoredPayloadTypes=[o.TYPE_1],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async()=>{this.isInitialized();const i=o.generateRandomBytes32(),s=await this.core.crypto.setSymKey(i),n=o.calcExpiry(p.FIVE_MINUTES),a={protocol:Pe},h={topic:s,expiry:n,relay:a,active:!1},c=o.formatUri({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a});return await this.pairings.set(s,h),await this.core.relayer.subscribe(s),this.core.expirer.set(s,n),{topic:s,uri:c}},this.pair=async i=>{this.isInitialized(),this.isValidPair(i);const{topic:s,symKey:n,relay:a}=o.parseUri(i.uri);if(this.pairings.keys.includes(s))throw new Error(`Pairing already exists: ${s}`);if(this.core.crypto.hasKeys(s))throw new Error(`Keychain already exists: ${s}`);const h=o.calcExpiry(p.FIVE_MINUTES),c={topic:s,relay:a,expiry:h,active:!1};return await this.pairings.set(s,c),await this.core.crypto.setSymKey(n,s),await this.core.relayer.subscribe(s,{relay:a}),this.core.expirer.set(s,h),i.activatePairing&&await this.activate({topic:s}),c},this.activate=async({topic:i})=>{this.isInitialized();const s=o.calcExpiry(p.THIRTY_DAYS);await this.pairings.update(i,{active:!0,expiry:s}),this.core.expirer.set(i,s)},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:s}=i;if(this.pairings.keys.includes(s)){const n=await this.sendRequest(s,"wc_pairingPing",{}),{done:a,resolve:h,reject:c}=o.createDelayedPromise();this.events.once(o.engineEvent("pairing_ping",n),(({error:d})=>{d?c(d):h()})),await a()}},this.updateExpiry=async({topic:i,expiry:s})=>{this.isInitialized(),await this.pairings.update(i,{expiry:s})},this.updateMetadata=async({topic:i,metadata:s})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:s})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:s}=i;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",o.getSdkError("USER_DISCONNECTED")),await this.deletePairing(s))},this.sendRequest=async(i,s,n)=>{const a=I.formatJsonRpcRequest(s,n),h=await this.core.crypto.encode(i,a),c=z[s].req;return this.core.history.set(i,a),await this.core.relayer.publish(i,h,c),a.id},this.sendResult=async(i,s,n)=>{const a=I.formatJsonRpcResult(i,n),h=await this.core.crypto.encode(s,a),c=await this.core.history.get(s,i),d=z[c.request.method].res;await this.core.relayer.publish(s,h,d),await this.core.history.resolve(a)},this.sendError=async(i,s,n)=>{const a=I.formatJsonRpcError(i,n),h=await this.core.crypto.encode(s,a),c=await this.core.history.get(s,i),d=z[c.request.method]?z[c.request.method].res:z.unregistered_method.res;await this.core.relayer.publish(s,h,d),await this.core.history.resolve(a)},this.deletePairing=async(i,s)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,o.getSdkError("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),s?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter((s=>o.isExpired(s.expiry)));await Promise.all(i.map((s=>this.deletePairing(s.topic))))},this.onRelayEventRequest=i=>{const{topic:s,payload:n}=i,a=n.method;if(this.pairings.keys.includes(s))switch(a){case"wc_pairingPing":return this.onPairingPingRequest(s,n);case"wc_pairingDelete":return this.onPairingDeleteRequest(s,n);default:return this.onUnknownRpcMethodRequest(s,n)}},this.onRelayEventResponse=async i=>{const{topic:s,payload:n}=i,a=(await this.core.history.get(s,n.id)).request.method;if(this.pairings.keys.includes(s))switch(a){case"wc_pairingPing":return this.onPairingPingResponse(s,n);default:return this.onUnknownRpcMethodResponse(a)}},this.onPairingPingRequest=async(i,s)=>{const{id:n}=s;try{this.isValidPing({topic:i}),await this.sendResult(n,i,!0),this.events.emit("pairing_ping",{id:n,topic:i})}catch(a){await this.sendError(n,i,a),this.logger.error(a)}},this.onPairingPingResponse=(i,s)=>{const{id:n}=s;setTimeout((()=>{I.isJsonRpcResult(s)?this.events.emit(o.engineEvent("pairing_ping",n),{}):I.isJsonRpcError(s)&&this.events.emit(o.engineEvent("pairing_ping",n),{error:s.error})}),500)},this.onPairingDeleteRequest=async(i,s)=>{const{id:n}=s;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit("pairing_delete",{id:n,topic:i})}catch(a){await this.sendError(n,i,a),this.logger.error(a)}},this.onUnknownRpcMethodRequest=async(i,s)=>{const{id:n,method:a}=s;try{if(this.registeredMethods.includes(a))return;const h=o.getSdkError("WC_METHOD_UNSUPPORTED",a);await this.sendError(n,i,h),this.logger.error(h)}catch(h){await this.sendError(n,i,h),this.logger.error(h)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(o.getSdkError("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{if(!o.isValidParams(i)){const{message:s}=o.getInternalError("MISSING_OR_INVALID",`pair() params: ${i}`);throw new Error(s)}if(!o.isValidUrl(i.uri)){const{message:s}=o.getInternalError("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw new Error(s)}},this.isValidPing=async i=>{if(!o.isValidParams(i)){const{message:n}=o.getInternalError("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(n)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidDisconnect=async i=>{if(!o.isValidParams(i)){const{message:n}=o.getInternalError("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(n)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidPairingTopic=async i=>{if(!o.isValidString(i,!1)){const{message:s}=o.getInternalError("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(s)}if(!this.pairings.keys.includes(i)){const{message:s}=o.getInternalError("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(s)}if(o.isExpired(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:s}=o.getInternalError("EXPIRED",`pairing topic: ${i}`);throw new Error(s)}},this.core=e,this.logger=l.generateChildLogger(t,this.name),this.pairings=new rt(this.core,this.logger,this.name,this.storagePrefix)}get context(){return l.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=o.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(E.message,(async e=>{const{topic:t,message:i}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const s=await this.core.crypto.decode(t,i);I.isJsonRpcRequest(s)?(this.core.history.set(t,s),this.onRelayEventRequest({topic:t,payload:s})):I.isJsonRpcResponse(s)&&(await this.core.history.resolve(s),this.onRelayEventResponse({topic:t,payload:s}))}))}registerExpirerEvents(){this.core.expirer.on(f.expired,(async e=>{const{topic:t}=o.parseExpirerTarget(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))}))}}class at extends x.IJsonRpcHistory{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new L.EventEmitter,this.name=ke,this.version=Ve,this.cached=[],this.initialized=!1,this.storagePrefix=P,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((i=>this.records.set(i.id,i))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,s,n)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:s,chainId:n}),this.records.has(s.id))return;const a={id:s.id,topic:i,request:{method:s.method,params:s.params||null},chainId:n};this.records.set(a.id,a),this.events.emit(_.created,a)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const s=await this.getRecord(i.id);typeof s.response>"u"&&(s.response=I.isJsonRpcError(i)?{error:i.error}:{result:i.result},this.records.set(s.id,s),this.events.emit(_.updated,s))},this.get=async(i,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:s}),await this.getRecord(s)),this.delete=(i,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach((n=>{if(n.topic===i){if(typeof s<"u"&&n.id!==s)return;this.records.delete(n.id),this.events.emit(_.deleted,n)}}))},this.exists=async(i,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===i:!1),this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=l.generateChildLogger(t,this.name)}get context(){return l.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach((t=>{if(typeof t.response<"u")return;const i={topic:t.topic,request:I.formatJsonRpcRequest(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)})),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:i}=o.getInternalError("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(_.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=o.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(_.created,(e=>{const t=_.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})),this.events.on(_.updated,(e=>{const t=_.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})),this.events.on(_.deleted,(e=>{const t=_.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=o.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}}class ot extends x.IExpirer{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new L.EventEmitter,this.name=je,this.version=qe,this.cached=[],this.initialized=!1,this.storagePrefix=P,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((i=>this.expirations.set(i.target,i))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const s=this.formatTarget(i);return typeof this.getExpiration(s)<"u"}catch{return!1}},this.set=(i,s)=>{this.isInitialized();const n=this.formatTarget(i),a={target:n,expiry:s};this.expirations.set(n,a),this.checkExpiry(n,a),this.events.emit(f.created,{target:n,expiration:a})},this.get=i=>{this.isInitialized();const s=this.formatTarget(i);return this.getExpiration(s)},this.del=i=>{if(this.isInitialized(),this.has(i)){const s=this.formatTarget(i),n=this.getExpiration(s);this.expirations.delete(s),this.events.emit(f.deleted,{target:s,expiration:n})}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=l.generateChildLogger(t,this.name)}get context(){return l.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return o.formatTopicTarget(e);if(typeof e=="number")return o.formatIdTarget(e);const{message:t}=o.getInternalError("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(f.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=o.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:i}=o.getInternalError("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}checkExpiry(e,t){const{expiry:i}=t;p.toMiliseconds(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(f.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach(((e,t)=>this.checkExpiry(t,e)))}registerEventListeners(){this.core.heartbeat.on(k.HEARTBEAT_EVENTS.pulse,(()=>this.checkExpirations())),this.events.on(f.created,(e=>{const t=f.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(f.expired,(e=>{const t=f.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(f.deleted,(e=>{const t=f.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=o.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}}var us=Object.defineProperty,ht=Object.getOwnPropertySymbols,ls=Object.prototype.hasOwnProperty,gs=Object.prototype.propertyIsEnumerable,ct=(r,e,t)=>e in r?us(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ut=(r,e)=>{for(var t in e||(e={}))ls.call(e,t)&&ct(r,t,e[t]);if(ht)for(var t of ht(e))gs.call(e,t)&&ct(r,t,e[t]);return r};class Y extends x.ICore{constructor(e){super(e),this.protocol=W,this.version=me,this.name=q,this.events=new L.EventEmitter,this.initialized=!1,this.on=(i,s)=>this.events.on(i,s),this.once=(i,s)=>this.events.once(i,s),this.off=(i,s)=>this.events.off(i,s),this.removeListener=(i,s)=>this.events.removeListener(i,s),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Q;const t=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:ie.default(l.getDefaultLoggerOptions({level:e?.logger||fe.logger}));this.logger=l.generateChildLogger(t,this.name),this.heartbeat=new k.HeartBeat,this.crypto=new Ge(this,this.logger,e?.keychain),this.history=new at(this,this.logger),this.expirer=new ot(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new mt.default(ut(ut({},we),e?.storageOptions)),this.relayer=new et({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new nt(this,this.logger)}static async init(e){const t=new Y(e);return await t.initialize(),t}get context(){return l.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const ds=Y;exports.CORE_CONTEXT=q,exports.CORE_DEFAULT=fe,exports.CORE_PROTOCOL=W,exports.CORE_STORAGE_OPTIONS=we,exports.CORE_STORAGE_PREFIX=P,exports.CORE_VERSION=me,exports.CRYPTO_CLIENT_SEED=Z,exports.CRYPTO_CONTEXT=ve,exports.CRYPTO_JWT_TTL=Ie,exports.Core=ds,exports.Crypto=Ge,exports.EXPIRER_CONTEXT=je,exports.EXPIRER_DEFAULT_TTL=Hi,exports.EXPIRER_EVENTS=f,exports.EXPIRER_STORAGE_VERSION=qe,exports.Expirer=ot,exports.HISTORY_CONTEXT=ke,exports.HISTORY_EVENTS=_,exports.HISTORY_STORAGE_VERSION=Ve,exports.JsonRpcHistory=at,exports.KEYCHAIN_CONTEXT=Re,exports.KEYCHAIN_STORAGE_VERSION=_e,exports.KeyChain=Ye,exports.MESSAGES_CONTEXT=Ce,exports.MESSAGES_STORAGE_VERSION=Te,exports.MessageTracker=Xe,exports.PAIRING_CONTEXT=Ke,exports.PAIRING_DEFAULT_TTL=Xi,exports.PAIRING_RPC_OPTS=z,exports.PAIRING_STORAGE_VERSION=$e,exports.PENDING_SUB_RESOLUTION_TIMEOUT=Be,exports.PUBLISHER_CONTEXT=Oe,exports.PUBLISHER_DEFAULT_TTL=Se,exports.Pairing=nt,exports.RELAYER_CONTEXT=xe,exports.RELAYER_DEFAULT_LOGGER=Ae,exports.RELAYER_DEFAULT_PROTOCOL=Pe,exports.RELAYER_DEFAULT_RELAY_URL=Q,exports.RELAYER_EVENTS=E,exports.RELAYER_PROVIDER_EVENTS=B,exports.RELAYER_RECONNECT_TIMEOUT=Le,exports.RELAYER_SDK_VERSION=ze,exports.RELAYER_STORAGE_OPTIONS=Yi,exports.RELAYER_SUBSCRIBER_SUFFIX=Ne,exports.Relayer=et,exports.STORE_STORAGE_VERSION=Ue,exports.SUBSCRIBER_CONTEXT=Fe,exports.SUBSCRIBER_DEFAULT_TTL=Gi,exports.SUBSCRIBER_EVENTS=R,exports.SUBSCRIBER_STORAGE_VERSION=Me,exports.Store=rt,exports.Subscriber=We,exports["default"]=Y},43013:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{EthereumProvider:()=>index_es_Y,OPTIONAL_EVENTS:()=>U,OPTIONAL_METHODS:()=>D,REQUIRED_EVENTS:()=>index_es_u,REQUIRED_METHODS:()=>p,default:()=>index_es_m});var events=__webpack_require__(63683);var events_default=__webpack_require__.n(events);var index_cjs=__webpack_require__(85562);var browser=__webpack_require__(51376);var browser_default=__webpack_require__.n(browser);var dist_index_cjs=__webpack_require__(99764);var cjs=__webpack_require__(41417);var esm=__webpack_require__(79328);var dist_esm=__webpack_require__(27872);const I="error",M="wss://relay.walletconnect.com",G="wc",z="universal_provider",E=`${G}@${2}:${z}:`,x="https://rpc.walletconnect.com/v1",o={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var J=Object.defineProperty,$=Object.getOwnPropertySymbols,V=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,H=(i,e,t)=>e in i?J(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,f=(i,e)=>{for(var t in e||(e={}))V.call(e,t)&&H(i,t,e[t]);if($)for(var t of $(e))W.call(e,t)&&H(i,t,e[t]);return i};function a(i,e,t){let s;const n=g(i);return e.rpcMap&&(s=e.rpcMap[n]),s||(s=`${x}?chainId=eip155:${n}&projectId=${t}`),s}function g(i){return i.includes("eip155")?Number(i.split(":")[1]):Number(i)}function K(i,e){if(!e.includes(i))throw new Error(`Chain '${i}' not approved. Please use one of the following: ${e.toString()}`)}function X(i){return i.map((e=>`${e.split(":")[0]}:${e.split(":")[1]}`))}function Y(i,e){const t=Object.keys(e.namespaces).filter((n=>n.includes(i)));if(!t.length)return[];const s=[];return t.forEach((n=>{const r=e.namespaces[n].accounts;s.push(...r)})),s}function B(i,e={}){const t=A(i),s=A(e);return f({},Object.assign(t,s))}function A(i){var e,t,s,n;const r={};if(!(0,index_cjs.isValidObject)(i))return r;for(const[v,l]of Object.entries(i)){const q=y(v)?[v]:l.chains,S=l.methods||[],D=l.events||[],p=N(v);r[p]={chains:P(q,(e=r[p])==null?void 0:e.chains),methods:P(S,(t=r[p])==null?void 0:t.methods),events:P(D,(s=r[p])==null?void 0:s.events),rpcMap:f(f({},(n=r[p])==null?void 0:n.rpcMap),l.rpcMap)}}return r}function y(i){return i.includes(":")}function N(i){return y(i)?i.split(":")[0]:i}function P(i=[],e=[]){return[...new Set([...i,...e])]}const h=(i,e)=>{const t=s=>{s.request!==e.request||s.topic!==e.topic||(i.events.removeListener("session_request_sent",t),Q(e))};i.on("session_request_sent",t)};function Q(i){if(typeof window<"u")try{const e=window.localStorage.getItem("WALLETCONNECT_DEEPLINK_CHOICE");if(e){const t=JSON.parse(e),s=t?.href;if(typeof s=="string"){s.endsWith("/")&&s.slice(0,-1);const n=`${s}/wc?requestId=${i.id}&sessionTopic=${i.topic}`;window.open(n,"_self","noreferrer noopener")}}}catch(e){console.error(e)}}class Z{constructor(e){this.name="eip155",this.namespace=e.namespace,this.client=e.client,this.events=e.events,this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){var t;switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return this.handleSwitchChain(e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0"),null;case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?(h(this.client,e),await this.client.request(e)):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){const s=g(e);if(!this.httpProviders[s]){const n=t||a(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,n)}this.chainId=s,this.events.emit(o.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const s=t||a(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new esm.JsonRpcProvider(new dist_esm.k(s))}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var s;const n=g(t);e[n]=this.createHttpProvider(n,(s=this.namespace.rpcMap)==null?void 0:s[t])})),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}handleSwitchChain(e){const t=parseInt(e,16),s=`${this.name}:${t}`;K(s,this.namespace.chains),this.setDefaultChain(`${t}`)}}class ee{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?(h(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||a(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(o.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||a(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new esm.JsonRpcProvider(new dist_esm.Z(s))}}class te{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(h(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||a(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(o.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||a(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new esm.JsonRpcProvider(new dist_esm.Z(s))}}class se{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(h(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(o.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{const s=this.getCardanoRPCUrl(t);e[t]=this.createHttpProvider(t,s)})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||this.getCardanoRPCUrl(e);return typeof s>"u"?void 0:new esm.JsonRpcProvider(new dist_esm.Z(s))}}class ie{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?(h(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||a(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(o.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||a(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new esm.JsonRpcProvider(new dist_esm.Z(s))}}class ne{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?(h(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||a(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(o.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||a(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new esm.JsonRpcProvider(new dist_esm.Z(s))}}var re=Object.defineProperty,ae=Object.defineProperties,oe=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable,b=(i,e,t)=>e in i?re(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,u=(i,e)=>{for(var t in e||(e={}))ce.call(e,t)&&b(i,t,e[t]);if(O)for(var t of O(e))he.call(e,t)&&b(i,t,e[t]);return i},w=(i,e)=>ae(i,oe(e));class m{constructor(e){this.events=new(events_default()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:browser_default()((0,cjs.getDefaultLoggerOptions)({level:e?.logger||I}))}static async init(e){const t=new m(e);return await t.initialize(),t}async request(e,t){const[s,n]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:u({},e),chainId:`${s}:${n}`,topic:this.session.topic})}sendAsync(e,t,s){this.request(e,s).then((n=>t(null,n))).catch((n=>t(n,void 0)))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:(0,index_cjs.getSdkError)("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await n().then((r=>{this.session=r})).catch((r=>{if(r.message!==dist_index_cjs.lO)throw r;t++}))}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{const[s,n]=this.validateChain(e);this.getProvider(s).setDefaultChain(n,t)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if((0,index_cjs.isValidArray)(t)){for(const s of t)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await dist_index_cjs.ZP.init({logger:this.providerOpts.logger||I,relayUrl:this.providerOpts.relayUrl||M,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");[...new Set(Object.keys(this.session.namespaces).map((e=>N(e))))].forEach((e=>{if(!this.session)return;const t=Y(e,this.session),s=X(t),n=B(this.namespaces,this.optionalNamespaces),r=w(u({},n[e]),{accounts:t,chains:s});switch(e){case"eip155":this.rpcProviders[e]=new Z({client:this.client,namespace:r,events:this.events});break;case"solana":this.rpcProviders[e]=new ee({client:this.client,namespace:r,events:this.events});break;case"cosmos":this.rpcProviders[e]=new te({client:this.client,namespace:r,events:this.events});break;case"polkadot":break;case"cip34":this.rpcProviders[e]=new se({client:this.client,namespace:r,events:this.events});break;case"elrond":this.rpcProviders[e]=new ie({client:this.client,namespace:r,events:this.events});break;case"multiversx":this.rpcProviders[e]=new ne({client:this.client,namespace:r,events:this.events});break}}))}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",(e=>{this.events.emit("session_ping",e)})),this.client.on("session_event",(e=>{const{params:t}=e,{event:s}=t;s.name==="accountsChanged"?this.events.emit("accountsChanged",s.data):s.name==="chainChanged"?this.onChainChanged(t.chainId):this.events.emit(s.name,s.data),this.events.emit("session_event",e)})),this.client.on("session_update",(({topic:e,params:t})=>{var s;const{namespaces:n}=t,r=(s=this.client)==null?void 0:s.session.get(e);this.session=w(u({},r),{namespaces:n}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})})),this.client.on("session_delete",(async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",w(u({},(0,index_cjs.getSdkError)("USER_DISCONNECTED")),{data:e.topic}))})),this.on(o.DEFAULT_CHAIN_CHANGED,(e=>{this.onChainChanged(e,!0)}))}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach((e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])}))}setNamespaces(e){const{namespaces:t,optionalNamespaces:s,sessionProperties:n}=e;if(!t||!Object.keys(t).length)throw new Error("Namespaces must be not empty");this.namespaces=t,this.optionalNamespaces=s,this.sessionProperties=n,this.persist("namespaces",t),this.persist("optionalNamespaces",s)}validateChain(e){const[t,s]=e?.split(":")||["",""];if(t&&!Object.keys(this.namespaces).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&s)return[t,s];const n=Object.keys(this.namespaces)[0],r=this.rpcProviders[n].getDefaultChain();return[n,r]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){const[s,n]=this.validateChain(e);t||this.getProvider(s).setDefaultChain(n),this.namespaces[s].defaultChain=n,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",n)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${E}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${E}/${e}`)}}const pe=m;const j="wc",index_es_$="ethereum_provider",q=`${j}@${2}:${index_es_$}:`,index_es_N="https://rpc.walletconnect.com/v1/",p=["eth_sendTransaction","personal_sign"],D=["eth_accounts","eth_requestAccounts","eth_call","eth_getBalance","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],index_es_u=["chainChanged","accountsChanged"],U=["message","disconnect","connect"];var index_es_Q=Object.defineProperty,L=Object.defineProperties,index_es_H=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertySymbols,index_es_G=Object.prototype.hasOwnProperty,index_es_K=Object.prototype.propertyIsEnumerable,index_es_y=(a,t,s)=>t in a?index_es_Q(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,index_es_I=(a,t)=>{for(var s in t||(t={}))index_es_G.call(t,s)&&index_es_y(a,s,t[s]);if(_)for(var s of _(t))index_es_K.call(t,s)&&index_es_y(a,s,t[s]);return a},index_es_O=(a,t)=>L(a,index_es_H(t));function C(a){return Number(a[0].split(":")[1])}function index_es_w(a){return`0x${a.toString(16)}`}function index_es_V(a){const{chains:t,optionalChains:s,methods:i,optionalMethods:e,events:n,optionalEvents:c,rpcMap:h}=a;if(!(0,index_cjs.isValidArray)(t))throw new Error("Invalid chains");const o=t,r=i||p,f=n||index_es_u,M={[C(o)]:h[C(o)]},E={chains:o,methods:r,events:f,rpcMap:M},l=n?.filter((g=>!index_es_u.includes(g))),d=i?.filter((g=>!p.includes(g)));if(!s&&!c&&!e&&!(l!=null&&l.length)&&!(d!=null&&d.length))return{required:E};const b=l?.length&&d?.length||!s,A={chains:[...new Set(b?o.concat(s||[]):s)],methods:[...new Set(r.concat(e||[]))],events:[...new Set(f.concat(c||[]))],rpcMap:h};return{required:E,optional:A}}class index_es_m{constructor(){this.events=new events.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=q,this.on=(t,s)=>(this.events.on(t,s),this),this.once=(t,s)=>(this.events.once(t,s),this),this.removeListener=(t,s)=>(this.events.removeListener(t,s),this),this.off=(t,s)=>(this.events.off(t,s),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){const s=new index_es_m;return await s.initialize(t),s}async request(t){return await this.signer.request(t,this.formatChainId(this.chainId))}sendAsync(t,s){this.signer.sendAsync(t,s,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);const{required:s,optional:i}=index_es_V(this.rpc);try{const e=await new Promise((async(c,h)=>{var o;this.rpc.showQrModal&&((o=this.modal)==null||o.subscribeModal((r=>{!r.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),h(new Error("Connection request reset. Please try again.")))}))),await this.signer.connect(index_es_O(index_es_I({namespaces:{[this.namespace]:s}},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:t?.pairingTopic})).then((r=>{c(r)})).catch((r=>{h(new Error(r.message))}))}));if(!e)return;this.setChainIds(this.rpc.chains);const n=(0,index_cjs.getAccountsFromNamespaces)(e.namespaces,[this.namespace]);this.setAccounts(n),this.events.emit("connect",{chainId:index_es_w(this.chainId)})}catch(e){throw this.signer.logger.error(e),e}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",(t=>{const{params:s}=t,{event:i}=s;i.name==="accountsChanged"?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):i.name==="chainChanged"?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",t)})),this.signer.on("chainChanged",(t=>{const s=parseInt(t);this.chainId=s,this.events.emit("chainChanged",index_es_w(this.chainId)),this.persist()})),this.signer.on("session_update",(t=>{this.events.emit("session_update",t)})),this.signer.on("session_delete",(t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",index_es_O(index_es_I({},(0,index_cjs.getSdkError)("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))})),this.signer.on("display_uri",(t=>{var s,i;this.rpc.showQrModal&&((s=this.modal)==null||s.closeModal(),(i=this.modal)==null||i.openModal({uri:t})),this.events.emit("display_uri",t)}))}setHttpProvider(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return typeof t=="string"?t.startsWith(`${this.namespace}:`):!1}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){const s=t.filter((i=>this.isCompatibleChainId(i))).map((i=>this.parseChainId(i)));s.length&&(this.chainId=s[0],this.events.emit("chainChanged",index_es_w(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){const s=this.parseChainId(t);this.chainId=s,this.setHttpProvider(s)}}parseAccountId(t){const[s,i,e]=t.split(":");return{chainId:`${s}:${i}`,address:e}}setAccounts(t){this.accounts=t.filter((s=>this.parseChainId(this.parseAccountId(s).chainId)===this.chainId)).map((s=>this.parseAccountId(s).address)),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var s,i;return{chains:((s=t.chains)==null?void 0:s.map((e=>this.formatChainId(e))))||[`${this.namespace}:1`],optionalChains:t.optionalChains?t.optionalChains.map((e=>this.formatChainId(e))):void 0,methods:t?.methods||p,events:t?.events||index_es_u,optionalMethods:t?.optionalMethods||[],optionalEvents:t?.optionalEvents||[],rpcMap:t?.rpcMap||this.buildRpcMap(t.chains.concat(t.optionalChains||[]),t.projectId),showQrModal:Boolean(t?.showQrModal),qrModalOptions:(i=t?.qrModalOptions)!=null?i:void 0,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,s){const i={};return t.forEach((e=>{i[e]=this.getRpcUrl(e,s)})),i}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=C(this.rpc.chains),this.signer=await pe.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal)try{const{Web3Modal:s}=await __webpack_require__.e(629).then(__webpack_require__.bind(__webpack_require__,88629));this.modal=new s(index_es_I({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch{throw new Error("To use QR modal, please install @web3modal/standalone package")}}loadConnectOpts(t){if(!t)return;const{chains:s,optionalChains:i,rpcMap:e}=t;s&&(0,index_cjs.isValidArray)(s)&&(this.rpc.chains=s.map((n=>this.formatChainId(n))),s.forEach((n=>{this.rpc.rpcMap[n]=e?.[n]||this.getRpcUrl(n)}))),i&&(0,index_cjs.isValidArray)(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i?.map((n=>this.formatChainId(n))),i.forEach((n=>{this.rpc.rpcMap[n]=e?.[n]||this.getRpcUrl(n)})))}getRpcUrl(t,s){var i;return((i=this.rpc.rpcMap)==null?void 0:i[t])||`${index_es_N}?chainId=eip155:${t}&projectId=${s||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`);this.setChainIds(t?[this.formatChainId(t)]:this.session.namespaces[this.namespace].accounts),this.setAccounts(this.session.namespaces[this.namespace].accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return typeof t=="string"||t instanceof String?[this.parseAccount(t)]:t.map((s=>this.parseAccount(s)))}}const index_es_Y=index_es_m},99764:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var __webpack_unused_export__;__webpack_unused_export__={value:!0};var F=__webpack_require__(51376),_=__webpack_require__(69603),A=__webpack_require__(41417),M=__webpack_require__(64882),i=__webpack_require__(85562),U=__webpack_require__(63683),p=__webpack_require__(87508),d=__webpack_require__(8378);function $(h){return h&&typeof h=="object"&&"default"in h?h:{default:h}}var H=$(F),B=$(U);const C="wc",L=2,G="client",V=`${C}@${L}:${G}:`,T={name:G,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Q={session_proposal:"session_proposal",session_update:"session_update",session_extend:"session_extend",session_ping:"session_ping",session_delete:"session_delete",session_expire:"session_expire",session_request:"session_request",session_request_sent:"session_request_sent",session_event:"session_event",proposal_expire:"proposal_expire"},W={database:":memory:"},Z={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},ee="history",se="0.3",Y="proposal",te=p.THIRTY_DAYS,X="Proposal expired",j="session",v=p.SEVEN_DAYS,K="engine",R={wc_sessionPropose:{req:{ttl:p.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:p.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:p.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:p.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:p.ONE_DAY,prompt:!1,tag:1104},res:{ttl:p.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:p.ONE_DAY,prompt:!1,tag:1106},res:{ttl:p.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:p.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:p.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:p.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:p.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:p.ONE_DAY,prompt:!1,tag:1112},res:{ttl:p.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:p.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:p.THIRTY_SECONDS,prompt:!1,tag:1115}}},q={min:p.FIVE_MINUTES,max:p.SEVEN_DAYS},k="request";var ie=Object.defineProperty,re=Object.defineProperties,ne=Object.getOwnPropertyDescriptors,J=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,z=(h,n,e)=>n in h?ie(h,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[n]=e,I=(h,n)=>{for(var e in n||(n={}))oe.call(n,e)&&z(h,e,n[e]);if(J)for(var e of J(n))ae.call(n,e)&&z(h,e,n[e]);return h},b=(h,n)=>re(h,ne(n));class ce extends M.IEngine{constructor(n){super(n),this.name=K,this.events=new B.default,this.initialized=!1,this.ignoredPayloadTypes=[i.TYPE_1],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(R)}),this.initialized=!0)},this.connect=async e=>{this.isInitialized();const s=b(I({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:t,requiredNamespaces:r,optionalNamespaces:o,sessionProperties:a,relays:c}=s;let l=t,g,m=!1;if(l&&(m=this.client.core.pairing.pairings.get(l).active),!l||!m){const{topic:w,uri:E}=await this.client.core.pairing.create();l=w,g=E}const u=await this.client.core.crypto.generateKeyPair(),y=I({requiredNamespaces:r,optionalNamespaces:o,relays:c??[{protocol:_.RELAYER_DEFAULT_PROTOCOL}],proposer:{publicKey:u,metadata:this.client.metadata}},a&&{sessionProperties:a}),{reject:S,resolve:N,done:x}=i.createDelayedPromise(p.FIVE_MINUTES,X);if(this.events.once(i.engineEvent("session_connect"),(async({error:w,session:E})=>{if(w)S(w);else if(E){E.self.publicKey=u;const P=b(I({},E),{requiredNamespaces:E.requiredNamespaces,optionalNamespaces:E.optionalNamespaces});await this.client.session.set(E.topic,P),await this.setExpiry(E.topic,E.expiry),l&&await this.client.core.pairing.updateMetadata({topic:l,metadata:E.peer.metadata}),N(P)}})),!l){const{message:w}=i.getInternalError("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(w)}const O=await this.sendRequest(l,"wc_sessionPropose",y),D=i.calcExpiry(p.FIVE_MINUTES);return await this.setProposal(O,I({id:O,expiry:D},y)),{uri:g,approval:x}},this.pair=async e=>(this.isInitialized(),await this.client.core.pairing.pair(e)),this.approve=async e=>{this.isInitialized(),await this.isValidApprove(e);const{id:s,relayProtocol:t,namespaces:r,sessionProperties:o}=e,a=this.client.proposal.get(s);let{pairingTopic:c,proposer:l,requiredNamespaces:g,optionalNamespaces:m}=a;i.isValidObject(g)||(g=i.getRequiredNamespacesFromNamespaces(r,"approve()"));const u=await this.client.core.crypto.generateKeyPair(),y=l.publicKey,S=await this.client.core.crypto.generateSharedKey(u,y);c&&s&&(await this.client.core.pairing.updateMetadata({topic:c,metadata:l.metadata}),await this.sendResult(s,c,{relay:{protocol:t??"irn"},responderPublicKey:u}),await this.client.proposal.delete(s,i.getSdkError("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:c}));const N=I({relay:{protocol:t??"irn"},namespaces:r,requiredNamespaces:g,optionalNamespaces:m,controller:{publicKey:u,metadata:this.client.metadata},expiry:i.calcExpiry(v)},o&&{sessionProperties:o});await this.client.core.relayer.subscribe(S);const x=await this.sendRequest(S,"wc_sessionSettle",N),{done:O,resolve:D,reject:w}=i.createDelayedPromise();this.events.once(i.engineEvent("session_approve",x),(({error:P})=>{P?w(P):D(this.client.session.get(S))}));const E=b(I({},N),{topic:S,acknowledged:!1,self:N.controller,peer:{publicKey:l.publicKey,metadata:l.metadata},controller:u});return await this.client.session.set(S,E),await this.setExpiry(S,i.calcExpiry(v)),{topic:S,acknowledged:O}},this.reject=async e=>{this.isInitialized(),await this.isValidReject(e);const{id:s,reason:t}=e,{pairingTopic:r}=this.client.proposal.get(s);r&&(await this.sendError(s,r,t),await this.client.proposal.delete(s,i.getSdkError("USER_DISCONNECTED")))},this.update=async e=>{this.isInitialized(),await this.isValidUpdate(e);const{topic:s,namespaces:t}=e,r=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:t}),{done:o,resolve:a,reject:c}=i.createDelayedPromise();return this.events.once(i.engineEvent("session_update",r),(({error:l})=>{l?c(l):a()})),await this.client.session.update(s,{namespaces:t}),{acknowledged:o}},this.extend=async e=>{this.isInitialized(),await this.isValidExtend(e);const{topic:s}=e,t=await this.sendRequest(s,"wc_sessionExtend",{}),{done:r,resolve:o,reject:a}=i.createDelayedPromise();return this.events.once(i.engineEvent("session_extend",t),(({error:c})=>{c?a(c):o()})),await this.setExpiry(s,i.calcExpiry(v)),{acknowledged:r}},this.request=async e=>{this.isInitialized(),await this.isValidRequest(e);const{chainId:s,request:t,topic:r,expiry:o}=e,a=await this.sendRequest(r,"wc_sessionRequest",{request:t,chainId:s},o),{done:c,resolve:l,reject:g}=i.createDelayedPromise(o);return this.events.once(i.engineEvent("session_request",a),(({error:m,result:u})=>{m?g(m):l(u)})),this.client.events.emit("session_request_sent",{topic:r,request:t,chainId:s,id:a}),await c()},this.respond=async e=>{this.isInitialized(),await this.isValidRespond(e);const{topic:s,response:t}=e,{id:r}=t;d.isJsonRpcResult(t)?await this.sendResult(r,s,t.result):d.isJsonRpcError(t)&&await this.sendError(r,s,t.error),this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0})},this.ping=async e=>{this.isInitialized(),await this.isValidPing(e);const{topic:s}=e;if(this.client.session.keys.includes(s)){const t=await this.sendRequest(s,"wc_sessionPing",{}),{done:r,resolve:o,reject:a}=i.createDelayedPromise();this.events.once(i.engineEvent("session_ping",t),(({error:c})=>{c?a(c):o()})),await r()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async e=>{this.isInitialized(),await this.isValidEmit(e);const{topic:s,event:t,chainId:r}=e;await this.sendRequest(s,"wc_sessionEvent",{event:t,chainId:r})},this.disconnect=async e=>{this.isInitialized(),await this.isValidDisconnect(e);const{topic:s}=e;this.client.session.keys.includes(s)?(await this.sendRequest(s,"wc_sessionDelete",i.getSdkError("USER_DISCONNECTED")),await this.deleteSession(s)):await this.client.core.pairing.disconnect({topic:s})},this.find=e=>(this.isInitialized(),this.client.session.getAll().filter((s=>i.isSessionCompatible(s,e)))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.deleteSession=async(e,s)=>{const{self:t}=this.client.session.get(e);await this.client.core.relayer.unsubscribe(e),await Promise.all([this.client.session.delete(e,i.getSdkError("USER_DISCONNECTED")),this.client.core.crypto.deleteKeyPair(t.publicKey),this.client.core.crypto.deleteSymKey(e),s?Promise.resolve():this.client.core.expirer.del(e)])},this.deleteProposal=async(e,s)=>{await Promise.all([this.client.proposal.delete(e,i.getSdkError("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(e)])},this.deletePendingSessionRequest=async(e,s,t=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,s),t?Promise.resolve():this.client.core.expirer.del(e)])},this.setExpiry=async(e,s)=>{this.client.session.keys.includes(e)&&await this.client.session.update(e,{expiry:s}),this.client.core.expirer.set(e,s)},this.setProposal=async(e,s)=>{await this.client.proposal.set(e,s),this.client.core.expirer.set(e,s.expiry)},this.setPendingSessionRequest=async e=>{const s=R.wc_sessionRequest.req.ttl,{id:t,topic:r,params:o}=e;await this.client.pendingRequest.set(t,{id:t,topic:r,params:o}),s&&this.client.core.expirer.set(t,i.calcExpiry(s))},this.sendRequest=async(e,s,t,r)=>{const o=d.formatJsonRpcRequest(s,t),a=await this.client.core.crypto.encode(e,o),c=R[s].req;return r&&(c.ttl=r),this.client.core.history.set(e,o),this.client.core.relayer.publish(e,a,c),o.id},this.sendResult=async(e,s,t)=>{const r=d.formatJsonRpcResult(e,t),o=await this.client.core.crypto.encode(s,r),a=await this.client.core.history.get(s,e),c=R[a.request.method].res;this.client.core.relayer.publish(s,o,c),await this.client.core.history.resolve(r)},this.sendError=async(e,s,t)=>{const r=d.formatJsonRpcError(e,t),o=await this.client.core.crypto.encode(s,r),a=await this.client.core.history.get(s,e),c=R[a.request.method].res;this.client.core.relayer.publish(s,o,c),await this.client.core.history.resolve(r)},this.cleanup=async()=>{const e=[],s=[];this.client.session.getAll().forEach((t=>{i.isExpired(t.expiry)&&e.push(t.topic)})),this.client.proposal.getAll().forEach((t=>{i.isExpired(t.expiry)&&s.push(t.id)})),await Promise.all([...e.map((t=>this.deleteSession(t))),...s.map((t=>this.deleteProposal(t)))])},this.onRelayEventRequest=e=>{const{topic:s,payload:t}=e,r=t.method;switch(r){case"wc_sessionPropose":return this.onSessionProposeRequest(s,t);case"wc_sessionSettle":return this.onSessionSettleRequest(s,t);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,t);case"wc_sessionExtend":return this.onSessionExtendRequest(s,t);case"wc_sessionPing":return this.onSessionPingRequest(s,t);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,t);case"wc_sessionRequest":return this.onSessionRequest(s,t);case"wc_sessionEvent":return this.onSessionEventRequest(s,t);default:return this.client.logger.info(`Unsupported request method ${r}`)}},this.onRelayEventResponse=async e=>{const{topic:s,payload:t}=e,r=(await this.client.core.history.get(s,t.id)).request.method;switch(r){case"wc_sessionPropose":return this.onSessionProposeResponse(s,t);case"wc_sessionSettle":return this.onSessionSettleResponse(s,t);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,t);case"wc_sessionExtend":return this.onSessionExtendResponse(s,t);case"wc_sessionPing":return this.onSessionPingResponse(s,t);case"wc_sessionRequest":return this.onSessionRequestResponse(s,t);default:return this.client.logger.info(`Unsupported response method ${r}`)}},this.onSessionProposeRequest=async(e,s)=>{const{params:t,id:r}=s;try{this.isValidConnect(I({},s.params));const o=i.calcExpiry(p.FIVE_MINUTES),a=I({id:r,pairingTopic:e,expiry:o},t);await this.setProposal(r,a),this.client.events.emit("session_proposal",{id:r,params:a})}catch(o){await this.sendError(r,e,o),this.client.logger.error(o)}},this.onSessionProposeResponse=async(e,s)=>{const{id:t}=s;if(d.isJsonRpcResult(s)){const{result:r}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:r});const o=this.client.proposal.get(t);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const a=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});const c=r.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:c});const l=await this.client.core.crypto.generateSharedKey(a,c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:l});const g=await this.client.core.relayer.subscribe(l);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:g}),await this.client.core.pairing.activate({topic:e})}else d.isJsonRpcError(s)&&(await this.client.proposal.delete(t,i.getSdkError("USER_DISCONNECTED")),this.events.emit(i.engineEvent("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(e,s)=>{const{id:t,params:r}=s;try{this.isValidSessionSettleRequest(r);const{relay:o,controller:a,expiry:c,namespaces:l,requiredNamespaces:g,optionalNamespaces:m,sessionProperties:u}=s.params,y=I({topic:e,relay:o,expiry:c,namespaces:l,acknowledged:!0,requiredNamespaces:g,optionalNamespaces:m,controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u});await this.sendResult(s.id,e,!0),this.events.emit(i.engineEvent("session_connect"),{session:y})}catch(o){await this.sendError(t,e,o),this.client.logger.error(o)}},this.onSessionSettleResponse=async(e,s)=>{const{id:t}=s;d.isJsonRpcResult(s)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(i.engineEvent("session_approve",t),{})):d.isJsonRpcError(s)&&(await this.client.session.delete(e,i.getSdkError("USER_DISCONNECTED")),this.events.emit(i.engineEvent("session_approve",t),{error:s.error}))},this.onSessionUpdateRequest=async(e,s)=>{const{params:t,id:r}=s;try{this.isValidUpdate(I({topic:e},t)),await this.client.session.update(e,{namespaces:t.namespaces}),await this.sendResult(r,e,!0),this.client.events.emit("session_update",{id:r,topic:e,params:t})}catch(o){await this.sendError(r,e,o),this.client.logger.error(o)}},this.onSessionUpdateResponse=(e,s)=>{const{id:t}=s;d.isJsonRpcResult(s)?this.events.emit(i.engineEvent("session_update",t),{}):d.isJsonRpcError(s)&&this.events.emit(i.engineEvent("session_update",t),{error:s.error})},this.onSessionExtendRequest=async(e,s)=>{const{id:t}=s;try{this.isValidExtend({topic:e}),await this.setExpiry(e,i.calcExpiry(v)),await this.sendResult(t,e,!0),this.client.events.emit("session_extend",{id:t,topic:e})}catch(r){await this.sendError(t,e,r),this.client.logger.error(r)}},this.onSessionExtendResponse=(e,s)=>{const{id:t}=s;d.isJsonRpcResult(s)?this.events.emit(i.engineEvent("session_extend",t),{}):d.isJsonRpcError(s)&&this.events.emit(i.engineEvent("session_extend",t),{error:s.error})},this.onSessionPingRequest=async(e,s)=>{const{id:t}=s;try{this.isValidPing({topic:e}),await this.sendResult(t,e,!0),this.client.events.emit("session_ping",{id:t,topic:e})}catch(r){await this.sendError(t,e,r),this.client.logger.error(r)}},this.onSessionPingResponse=(e,s)=>{const{id:t}=s;setTimeout((()=>{d.isJsonRpcResult(s)?this.events.emit(i.engineEvent("session_ping",t),{}):d.isJsonRpcError(s)&&this.events.emit(i.engineEvent("session_ping",t),{error:s.error})}),500)},this.onSessionDeleteRequest=async(e,s)=>{const{id:t}=s;try{this.isValidDisconnect({topic:e,reason:s.params}),this.client.core.relayer.once(_.RELAYER_EVENTS.publish,(async()=>{await this.deleteSession(e)})),await this.sendResult(t,e,!0),this.client.events.emit("session_delete",{id:t,topic:e})}catch(r){await this.sendError(t,e,r),this.client.logger.error(r)}},this.onSessionRequest=async(e,s)=>{const{id:t,params:r}=s;try{this.isValidRequest(I({topic:e},r)),await this.setPendingSessionRequest({id:t,topic:e,params:r}),this.client.events.emit("session_request",{id:t,topic:e,params:r})}catch(o){await this.sendError(t,e,o),this.client.logger.error(o)}},this.onSessionRequestResponse=(e,s)=>{const{id:t}=s;d.isJsonRpcResult(s)?this.events.emit(i.engineEvent("session_request",t),{result:s.result}):d.isJsonRpcError(s)&&this.events.emit(i.engineEvent("session_request",t),{error:s.error})},this.onSessionEventRequest=async(e,s)=>{const{id:t,params:r}=s;try{this.isValidEmit(I({topic:e},r)),this.client.events.emit("session_event",{id:t,topic:e,params:r})}catch(o){await this.sendError(t,e,o),this.client.logger.error(o)}},this.isValidConnect=async e=>{if(!i.isValidParams(e)){const{message:c}=i.getInternalError("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw new Error(c)}const{pairingTopic:s,requiredNamespaces:t,optionalNamespaces:r,sessionProperties:o,relays:a}=e;if(i.isUndefined(s)||await this.isValidPairingTopic(s),!i.isValidRelays(a,!0)){const{message:c}=i.getInternalError("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(c)}!i.isUndefined(t)&&i.isValidObject(t)!==0&&this.validateNamespaces(t,"requiredNamespaces"),!i.isUndefined(r)&&i.isValidObject(r)!==0&&this.validateNamespaces(r,"optionalNamespaces"),i.isUndefined(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(e,s)=>{const t=i.isValidRequiredNamespaces(e,"connect()",s);if(t)throw new Error(t.message)},this.isValidApprove=async e=>{if(!i.isValidParams(e))throw new Error(i.getInternalError("MISSING_OR_INVALID",`approve() params: ${e}`).message);const{id:s,namespaces:t,relayProtocol:r,sessionProperties:o}=e;await this.isValidProposalId(s);const a=this.client.proposal.get(s),c=i.isValidNamespaces(t,"approve()");if(c)throw new Error(c.message);const l=i.isConformingNamespaces(a.requiredNamespaces,t,"approve()");if(l)throw new Error(l.message);if(!i.isValidString(r,!0)){const{message:g}=i.getInternalError("MISSING_OR_INVALID",`approve() relayProtocol: ${r}`);throw new Error(g)}i.isUndefined(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async e=>{if(!i.isValidParams(e)){const{message:r}=i.getInternalError("MISSING_OR_INVALID",`reject() params: ${e}`);throw new Error(r)}const{id:s,reason:t}=e;if(await this.isValidProposalId(s),!i.isValidErrorReason(t)){const{message:r}=i.getInternalError("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(t)}`);throw new Error(r)}},this.isValidSessionSettleRequest=e=>{if(!i.isValidParams(e)){const{message:l}=i.getInternalError("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw new Error(l)}const{relay:s,controller:t,namespaces:r,expiry:o}=e;if(!i.isValidRelay(s)){const{message:l}=i.getInternalError("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=i.isValidController(t,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=i.isValidNamespaces(r,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(i.isExpired(o)){const{message:l}=i.getInternalError("EXPIRED","onSessionSettleRequest()");throw new Error(l)}},this.isValidUpdate=async e=>{if(!i.isValidParams(e)){const{message:c}=i.getInternalError("MISSING_OR_INVALID",`update() params: ${e}`);throw new Error(c)}const{topic:s,namespaces:t}=e;await this.isValidSessionTopic(s);const r=this.client.session.get(s),o=i.isValidNamespaces(t,"update()");if(o)throw new Error(o.message);const a=i.isConformingNamespaces(r.requiredNamespaces,t,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async e=>{if(!i.isValidParams(e)){const{message:t}=i.getInternalError("MISSING_OR_INVALID",`extend() params: ${e}`);throw new Error(t)}const{topic:s}=e;await this.isValidSessionTopic(s)},this.isValidRequest=async e=>{if(!i.isValidParams(e)){const{message:c}=i.getInternalError("MISSING_OR_INVALID",`request() params: ${e}`);throw new Error(c)}const{topic:s,request:t,chainId:r,expiry:o}=e;await this.isValidSessionTopic(s);const{namespaces:a}=this.client.session.get(s);if(!i.isValidNamespacesChainId(a,r)){const{message:c}=i.getInternalError("MISSING_OR_INVALID",`request() chainId: ${r}`);throw new Error(c)}if(!i.isValidRequest(t)){const{message:c}=i.getInternalError("MISSING_OR_INVALID",`request() ${JSON.stringify(t)}`);throw new Error(c)}if(!i.isValidNamespacesRequest(a,r,t.method)){const{message:c}=i.getInternalError("MISSING_OR_INVALID",`request() method: ${t.method}`);throw new Error(c)}if(o&&!i.isValidRequestExpiry(o,q)){const{message:c}=i.getInternalError("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${q.min} and ${q.max}`);throw new Error(c)}},this.isValidRespond=async e=>{if(!i.isValidParams(e)){const{message:r}=i.getInternalError("MISSING_OR_INVALID",`respond() params: ${e}`);throw new Error(r)}const{topic:s,response:t}=e;if(await this.isValidSessionTopic(s),!i.isValidResponse(t)){const{message:r}=i.getInternalError("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(t)}`);throw new Error(r)}},this.isValidPing=async e=>{if(!i.isValidParams(e)){const{message:t}=i.getInternalError("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:s}=e;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async e=>{if(!i.isValidParams(e)){const{message:a}=i.getInternalError("MISSING_OR_INVALID",`emit() params: ${e}`);throw new Error(a)}const{topic:s,event:t,chainId:r}=e;await this.isValidSessionTopic(s);const{namespaces:o}=this.client.session.get(s);if(!i.isValidNamespacesChainId(o,r)){const{message:a}=i.getInternalError("MISSING_OR_INVALID",`emit() chainId: ${r}`);throw new Error(a)}if(!i.isValidEvent(t)){const{message:a}=i.getInternalError("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(t)}`);throw new Error(a)}if(!i.isValidNamespacesEvent(o,r,t.name)){const{message:a}=i.getInternalError("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(t)}`);throw new Error(a)}},this.isValidDisconnect=async e=>{if(!i.isValidParams(e)){const{message:t}=i.getInternalError("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:s}=e;await this.isValidSessionOrPairingTopic(s)},this.validateSessionProps=(e,s)=>{Object.values(e).forEach((t=>{if(!i.isValidString(t,!1)){const{message:r}=i.getInternalError("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(t)}`);throw new Error(r)}}))}}isInitialized(){if(!this.initialized){const{message:n}=i.getInternalError("NOT_INITIALIZED",this.name);throw new Error(n)}}registerRelayerEvents(){this.client.core.relayer.on(_.RELAYER_EVENTS.message,(async n=>{const{topic:e,message:s}=n;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const t=await this.client.core.crypto.decode(e,s);d.isJsonRpcRequest(t)?(this.client.core.history.set(e,t),this.onRelayEventRequest({topic:e,payload:t})):d.isJsonRpcResponse(t)&&(await this.client.core.history.resolve(t),this.onRelayEventResponse({topic:e,payload:t}))}))}registerExpirerEvents(){this.client.core.expirer.on(_.EXPIRER_EVENTS.expired,(async n=>{const{topic:e,id:s}=i.parseExpirerTarget(n.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,i.getInternalError("EXPIRED"),!0);e?this.client.session.keys.includes(e)&&(await this.deleteSession(e,!0),this.client.events.emit("session_expire",{topic:e})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))}))}isValidPairingTopic(n){if(!i.isValidString(n,!1)){const{message:e}=i.getInternalError("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(e)}if(!this.client.core.pairing.pairings.keys.includes(n)){const{message:e}=i.getInternalError("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(e)}if(i.isExpired(this.client.core.pairing.pairings.get(n).expiry)){const{message:e}=i.getInternalError("EXPIRED",`pairing topic: ${n}`);throw new Error(e)}}async isValidSessionTopic(n){if(!i.isValidString(n,!1)){const{message:e}=i.getInternalError("MISSING_OR_INVALID",`session topic should be a string: ${n}`);throw new Error(e)}if(!this.client.session.keys.includes(n)){const{message:e}=i.getInternalError("NO_MATCHING_KEY",`session topic doesn't exist: ${n}`);throw new Error(e)}if(i.isExpired(this.client.session.get(n).expiry)){await this.deleteSession(n);const{message:e}=i.getInternalError("EXPIRED",`session topic: ${n}`);throw new Error(e)}}async isValidSessionOrPairingTopic(n){if(this.client.session.keys.includes(n))await this.isValidSessionTopic(n);else if(this.client.core.pairing.pairings.keys.includes(n))this.isValidPairingTopic(n);else if(i.isValidString(n,!1)){const{message:e}=i.getInternalError("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${n}`);throw new Error(e)}else{const{message:e}=i.getInternalError("MISSING_OR_INVALID",`session or pairing topic should be a string: ${n}`);throw new Error(e)}}async isValidProposalId(n){if(!i.isValidId(n)){const{message:e}=i.getInternalError("MISSING_OR_INVALID",`proposal id should be a number: ${n}`);throw new Error(e)}if(!this.client.proposal.keys.includes(n)){const{message:e}=i.getInternalError("NO_MATCHING_KEY",`proposal id doesn't exist: ${n}`);throw new Error(e)}if(i.isExpired(this.client.proposal.get(n).expiry)){await this.deleteProposal(n);const{message:e}=i.getInternalError("EXPIRED",`proposal id: ${n}`);throw new Error(e)}}}class le extends _.Store{constructor(n,e){super(n,e,Y,V),this.core=n,this.logger=e}}class pe extends _.Store{constructor(n,e){super(n,e,j,V),this.core=n,this.logger=e}}class he extends _.Store{constructor(n,e){super(n,e,k,V,(s=>s.id)),this.core=n,this.logger=e}}class f extends M.ISignClient{constructor(n){super(n),this.protocol=C,this.version=L,this.name=T.name,this.events=new U.EventEmitter,this.on=(s,t)=>this.events.on(s,t),this.once=(s,t)=>this.events.once(s,t),this.off=(s,t)=>this.events.off(s,t),this.removeListener=(s,t)=>this.events.removeListener(s,t),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(t){throw this.logger.error(t.message),t}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(t){throw this.logger.error(t.message),t}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(t){throw this.logger.error(t.message),t}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(t){throw this.logger.error(t.message),t}},this.update=async s=>{try{return await this.engine.update(s)}catch(t){throw this.logger.error(t.message),t}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(t){throw this.logger.error(t.message),t}},this.request=async s=>{try{return await this.engine.request(s)}catch(t){throw this.logger.error(t.message),t}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(t){throw this.logger.error(t.message),t}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(t){throw this.logger.error(t.message),t}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(t){throw this.logger.error(t.message),t}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(t){throw this.logger.error(t.message),t}},this.find=s=>{try{return this.engine.find(s)}catch(t){throw this.logger.error(t.message),t}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=n?.name||T.name,this.metadata=n?.metadata||i.getAppMetadata();const e=typeof n?.logger<"u"&&typeof n?.logger!="string"?n.logger:H.default(A.getDefaultLoggerOptions({level:n?.logger||T.logger}));this.core=n?.core||new _.Core(n),this.logger=A.generateChildLogger(e,this.name),this.session=new pe(this.core,this.logger),this.proposal=new le(this.core,this.logger),this.pendingRequest=new he(this.core,this.logger),this.engine=new ce(this)}static async init(n){const e=new f(n);return await e.initialize(),e}get context(){return A.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(n){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(n.message),n}}}const de=f;__webpack_unused_export__=K,__webpack_unused_export__=R,__webpack_unused_export__=ee,__webpack_unused_export__=Z,__webpack_unused_export__=se,__webpack_unused_export__=Y,__webpack_unused_export__=te,exports.lO=X,__webpack_unused_export__=k,__webpack_unused_export__=j,__webpack_unused_export__=v,__webpack_unused_export__=q,__webpack_unused_export__=G,__webpack_unused_export__=T,__webpack_unused_export__=Q,__webpack_unused_export__=C,__webpack_unused_export__=W,__webpack_unused_export__=V,__webpack_unused_export__=L,__webpack_unused_export__=de,exports.ZP=f},67328:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{IEvents:()=>IEvents});class IEvents{}},98081:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HEARTBEAT_EVENTS=exports.HEARTBEAT_INTERVAL=void 0;const time_1=__webpack_require__(87508);exports.HEARTBEAT_INTERVAL=time_1.FIVE_SECONDS;exports.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},26905:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=__webpack_require__(46505);tslib_1.__exportStar(__webpack_require__(98081),exports)},20601:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HeartBeat=void 0;const tslib_1=__webpack_require__(46505);const events_1=__webpack_require__(63683);const time_1=__webpack_require__(87508);const types_1=__webpack_require__(8338);const constants_1=__webpack_require__(26905);class HeartBeat extends types_1.IHeartBeat{constructor(opts){super(opts);this.events=new events_1.EventEmitter;this.interval=constants_1.HEARTBEAT_INTERVAL;this.interval=(opts===null||opts===void 0?void 0:opts.interval)||constants_1.HEARTBEAT_INTERVAL}static init(opts){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const heartbeat=new HeartBeat(opts);yield heartbeat.init();return heartbeat}))}init(){return tslib_1.__awaiter(this,void 0,void 0,(function*(){yield this.initialize()}))}stop(){clearInterval(this.intervalRef)}on(event,listener){this.events.on(event,listener)}once(event,listener){this.events.once(event,listener)}off(event,listener){this.events.off(event,listener)}removeListener(event,listener){this.events.removeListener(event,listener)}initialize(){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.intervalRef=setInterval((()=>this.pulse()),time_1.toMiliseconds(this.interval))}))}pulse(){this.events.emit(constants_1.HEARTBEAT_EVENTS.pulse)}}exports.HeartBeat=HeartBeat},69701:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=__webpack_require__(46505);tslib_1.__exportStar(__webpack_require__(20601),exports);tslib_1.__exportStar(__webpack_require__(8338),exports);tslib_1.__exportStar(__webpack_require__(26905),exports)},53277:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IHeartBeat=void 0;const events_1=__webpack_require__(67328);class IHeartBeat extends events_1.IEvents{constructor(opts){super()}}exports.IHeartBeat=IHeartBeat},8338:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=__webpack_require__(46505);tslib_1.__exportStar(__webpack_require__(53277),exports)},46505:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{__assign:()=>__assign,__asyncDelegator:()=>__asyncDelegator,__asyncGenerator:()=>__asyncGenerator,__asyncValues:()=>__asyncValues,__await:()=>__await,__awaiter:()=>__awaiter,__classPrivateFieldGet:()=>__classPrivateFieldGet,__classPrivateFieldSet:()=>__classPrivateFieldSet,__createBinding:()=>__createBinding,__decorate:()=>__decorate,__exportStar:()=>__exportStar,__extends:()=>__extends,__generator:()=>__generator,__importDefault:()=>__importDefault,__importStar:()=>__importStar,__makeTemplateObject:()=>__makeTemplateObject,__metadata:()=>__metadata,__param:()=>__param,__read:()=>__read,__rest:()=>__rest,__spread:()=>__spread,__spreadArrays:()=>__spreadArrays,__values:()=>__values});var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};function __extends(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];if(s!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]]}return t}function __decorate(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}}function __createBinding(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]}function __exportStar(m,exports){for(var p in m)if(p!=="default"&&!exports.hasOwnProperty(p))exports[p]=m[p]}function __values(o){var s=typeof Symbol==="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length==="number")return{next:function(){if(o&&i>=o.length)o=void 0;return{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m=typeof Symbol==="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{while((n===void 0||n-- >0)&&!(r=i.next()).done)ar.push(r.value)}catch(error){e={error}}finally{try{if(r&&!r.done&&(m=i["return"]))m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=generator.apply(thisArg,_arguments||[]),i,q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){if(g[n])i[n]=function(v){return new Promise((function(a,b){q.push([n,v,a,b])>1||resume(n,v)}))}}function resume(n,v){try{step(g[n](v))}catch(e){settle(q[0][3],e)}}function step(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){if(f(v),q.shift(),q.length)resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:n==="return"}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var m=o[Symbol.asyncIterator],i;return m?m.call(o):(o=typeof __values==="function"?__values(o):o[Symbol.iterator](),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise((function(resolve,reject){v=o[n](v),settle(resolve,reject,v.done,v.value)}))}}function settle(resolve,reject,d,v){Promise.resolve(v).then((function(v){resolve({value:v,done:d})}),reject)}}function __makeTemplateObject(cooked,raw){if(Object.defineProperty){Object.defineProperty(cooked,"raw",{value:raw})}else{cooked.raw=raw}return cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result.default=mod;return result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,privateMap){if(!privateMap.has(receiver)){throw new TypeError("attempted to get private field on non-instance")}return privateMap.get(receiver)}function __classPrivateFieldSet(receiver,privateMap,value){if(!privateMap.has(receiver)){throw new TypeError("attempted to set private field on non-instance")}privateMap.set(receiver,value);return value}},79950:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{WsConnection:()=>WsConnection,default:()=>jsonrpc_ws_connection_dist_esm});var events=__webpack_require__(63683);var esm=__webpack_require__(97530);var dist_esm=__webpack_require__(8378);const EVENT_EMITTER_MAX_LISTENERS_DEFAULT=10;const resolveWebSocketImplementation=()=>{if(typeof global!=="undefined"&&typeof global.WebSocket!=="undefined"){return global.WebSocket}if(typeof window!=="undefined"&&typeof window.WebSocket!=="undefined"){return window.WebSocket}return __webpack_require__(68724)};const isBrowser=()=>typeof window!=="undefined";const WS=resolveWebSocketImplementation();class WsConnection{constructor(url){this.url=url;this.events=new events.EventEmitter;this.registering=false;if(!(0,dist_esm.isWsUrl)(url)){throw new Error(`Provided URL is not compatible with WebSocket connection: ${url}`)}this.url=url}get connected(){return typeof this.socket!=="undefined"}get connecting(){return this.registering}on(event,listener){this.events.on(event,listener)}once(event,listener){this.events.once(event,listener)}off(event,listener){this.events.off(event,listener)}removeListener(event,listener){this.events.removeListener(event,listener)}async open(url=this.url){await this.register(url)}async close(){return new Promise(((resolve,reject)=>{if(typeof this.socket==="undefined"){reject(new Error("Connection already closed"));return}this.socket.onclose=event=>{this.onClose(event);resolve()};this.socket.close()}))}async send(payload,context){if(typeof this.socket==="undefined"){this.socket=await this.register()}try{this.socket.send((0,esm.safeJsonStringify)(payload))}catch(e){this.onError(payload.id,e)}}register(url=this.url){if(!(0,dist_esm.isWsUrl)(url)){throw new Error(`Provided URL is not compatible with WebSocket connection: ${url}`)}if(this.registering){const currentMaxListeners=this.events.getMaxListeners();if(this.events.listenerCount("register_error")>=currentMaxListeners||this.events.listenerCount("open")>=currentMaxListeners){this.events.setMaxListeners(currentMaxListeners+1)}return new Promise(((resolve,reject)=>{this.events.once("register_error",(error=>{this.resetMaxListeners();reject(error)}));this.events.once("open",(()=>{this.resetMaxListeners();if(typeof this.socket==="undefined"){return reject(new Error("WebSocket connection is missing or invalid"))}resolve(this.socket)}))}))}this.url=url;this.registering=true;return new Promise(((resolve,reject)=>{const opts=!(0,dist_esm.isReactNative)()?{rejectUnauthorized:!(0,dist_esm.isLocalhostUrl)(url)}:undefined;const socket=new WS(url,[],opts);if(isBrowser()){socket.onerror=event=>{const errorEvent=event;reject(this.emitError(errorEvent.error))}}else{socket.on("error",(errorEvent=>{reject(this.emitError(errorEvent))}))}socket.onopen=()=>{this.onOpen(socket);resolve(socket)}}))}onOpen(socket){socket.onmessage=event=>this.onPayload(event);socket.onclose=event=>this.onClose(event);this.socket=socket;this.registering=false;this.events.emit("open")}onClose(event){this.socket=undefined;this.registering=false;this.events.emit("close",event)}onPayload(e){if(typeof e.data==="undefined")return;const payload=typeof e.data==="string"?(0,esm.safeJsonParse)(e.data):e.data;this.events.emit("payload",payload)}onError(id,e){const error=this.parseError(e);const message=error.message||error.toString();const payload=(0,dist_esm.formatJsonRpcError)(id,message);this.events.emit("payload",payload)}parseError(e,url=this.url){return(0,dist_esm.parseConnectionError)(e,url,"WS")}resetMaxListeners(){if(this.events.getMaxListeners()>EVENT_EMITTER_MAX_LISTENERS_DEFAULT){this.events.setMaxListeners(EVENT_EMITTER_MAX_LISTENERS_DEFAULT)}}emitError(errorEvent){const error=this.parseError(new Error((errorEvent===null||errorEvent===void 0?void 0:errorEvent.message)||`WebSocket connection failed for URL: ${this.url}`));this.events.emit("register_error",error);return error}}const ws=WsConnection;const jsonrpc_ws_connection_dist_esm=ws},68724:module=>{"use strict";module.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native "+"WebSocket object")}},58423:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KeyValueStorage=void 0;const tslib_1=__webpack_require__(43894);const safe_json_utils_1=__webpack_require__(81303);const localStorage_1=tslib_1.__importDefault(__webpack_require__(1237));const shared_1=__webpack_require__(14652);class KeyValueStorage{constructor(){this.localStorage=localStorage_1.default}getKeys(){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return Object.keys(this.localStorage)}))}getEntries(){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return Object.entries(this.localStorage).map(shared_1.parseEntry)}))}getItem(key){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const item=this.localStorage.getItem(key);if(item===null){return undefined}return safe_json_utils_1.safeJsonParse(item)}))}setItem(key,value){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.localStorage.setItem(key,safe_json_utils_1.safeJsonStringify(value))}))}removeItem(key){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.localStorage.removeItem(key)}))}}exports.KeyValueStorage=KeyValueStorage;exports["default"]=KeyValueStorage},1237:module=>{"use strict";(function(){"use strict";let db;function LocalStorage(){}db=LocalStorage;db.prototype.getItem=function(key){if(this.hasOwnProperty(key)){return String(this[key])}return null};db.prototype.setItem=function(key,val){this[key]=String(val)};db.prototype.removeItem=function(key){delete this[key]};db.prototype.clear=function(){const self=this;Object.keys(self).forEach((function(key){self[key]=undefined;delete self[key]}))};db.prototype.key=function(i){i=i||0;return Object.keys(this)[i]};db.prototype.__defineGetter__("length",(function(){return Object.keys(this).length}));if(typeof global!=="undefined"&&global.localStorage){module.exports=global.localStorage}else if(typeof window!=="undefined"&&window.localStorage){module.exports=window.localStorage}else{module.exports=new LocalStorage}})()},14652:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=__webpack_require__(43894);tslib_1.__exportStar(__webpack_require__(65437),exports);tslib_1.__exportStar(__webpack_require__(19857),exports)},65437:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IKeyValueStorage=void 0;class IKeyValueStorage{}exports.IKeyValueStorage=IKeyValueStorage},19857:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseEntry=void 0;const safe_json_utils_1=__webpack_require__(81303);function parseEntry(entry){var _a;return[entry[0],safe_json_utils_1.safeJsonParse((_a=entry[1])!==null&&_a!==void 0?_a:"")]}exports.parseEntry=parseEntry},43894:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{__assign:()=>__assign,__asyncDelegator:()=>__asyncDelegator,__asyncGenerator:()=>__asyncGenerator,__asyncValues:()=>__asyncValues,__await:()=>__await,__awaiter:()=>__awaiter,__classPrivateFieldGet:()=>__classPrivateFieldGet,__classPrivateFieldSet:()=>__classPrivateFieldSet,__createBinding:()=>__createBinding,__decorate:()=>__decorate,__exportStar:()=>__exportStar,__extends:()=>__extends,__generator:()=>__generator,__importDefault:()=>__importDefault,__importStar:()=>__importStar,__makeTemplateObject:()=>__makeTemplateObject,__metadata:()=>__metadata,__param:()=>__param,__read:()=>__read,__rest:()=>__rest,__spread:()=>__spread,__spreadArrays:()=>__spreadArrays,__values:()=>__values});var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};function __extends(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];if(s!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]]}return t}function __decorate(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}}function __createBinding(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]}function __exportStar(m,exports){for(var p in m)if(p!=="default"&&!exports.hasOwnProperty(p))exports[p]=m[p]}function __values(o){var s=typeof Symbol==="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length==="number")return{next:function(){if(o&&i>=o.length)o=void 0;return{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m=typeof Symbol==="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{while((n===void 0||n-- >0)&&!(r=i.next()).done)ar.push(r.value)}catch(error){e={error}}finally{try{if(r&&!r.done&&(m=i["return"]))m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=generator.apply(thisArg,_arguments||[]),i,q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){if(g[n])i[n]=function(v){return new Promise((function(a,b){q.push([n,v,a,b])>1||resume(n,v)}))}}function resume(n,v){try{step(g[n](v))}catch(e){settle(q[0][3],e)}}function step(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){if(f(v),q.shift(),q.length)resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:n==="return"}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var m=o[Symbol.asyncIterator],i;return m?m.call(o):(o=typeof __values==="function"?__values(o):o[Symbol.iterator](),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise((function(resolve,reject){v=o[n](v),settle(resolve,reject,v.done,v.value)}))}}function settle(resolve,reject,d,v){Promise.resolve(v).then((function(v){resolve({value:v,done:d})}),reject)}}function __makeTemplateObject(cooked,raw){if(Object.defineProperty){Object.defineProperty(cooked,"raw",{value:raw})}else{cooked.raw=raw}return cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result.default=mod;return result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,privateMap){if(!privateMap.has(receiver)){throw new TypeError("attempted to get private field on non-instance")}return privateMap.get(receiver)}function __classPrivateFieldSet(receiver,privateMap,value){if(!privateMap.has(receiver)){throw new TypeError("attempted to set private field on non-instance")}privateMap.set(receiver,value);return value}},26742:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PINO_CUSTOM_CONTEXT_KEY=exports.PINO_LOGGER_DEFAULTS=void 0;exports.PINO_LOGGER_DEFAULTS={level:"info"};exports.PINO_CUSTOM_CONTEXT_KEY="custom_context"},41417:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.pino=void 0;const tslib_1=__webpack_require__(33904);const pino_1=tslib_1.__importDefault(__webpack_require__(51376));Object.defineProperty(exports,"pino",{enumerable:true,get:function(){return pino_1.default}});tslib_1.__exportStar(__webpack_require__(26742),exports);tslib_1.__exportStar(__webpack_require__(16381),exports)},16381:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.generateChildLogger=exports.formatChildLoggerContext=exports.getLoggerContext=exports.setBrowserLoggerContext=exports.getBrowserLoggerContext=exports.getDefaultLoggerOptions=void 0;const constants_1=__webpack_require__(26742);function getDefaultLoggerOptions(opts){return Object.assign(Object.assign({},opts),{level:(opts===null||opts===void 0?void 0:opts.level)||constants_1.PINO_LOGGER_DEFAULTS.level})}exports.getDefaultLoggerOptions=getDefaultLoggerOptions;function getBrowserLoggerContext(logger,customContextKey=constants_1.PINO_CUSTOM_CONTEXT_KEY){return logger[customContextKey]||""}exports.getBrowserLoggerContext=getBrowserLoggerContext;function setBrowserLoggerContext(logger,context,customContextKey=constants_1.PINO_CUSTOM_CONTEXT_KEY){logger[customContextKey]=context;return logger}exports.setBrowserLoggerContext=setBrowserLoggerContext;function getLoggerContext(logger,customContextKey=constants_1.PINO_CUSTOM_CONTEXT_KEY){let context="";if(typeof logger.bindings==="undefined"){context=getBrowserLoggerContext(logger,customContextKey)}else{context=logger.bindings().context||""}return context}exports.getLoggerContext=getLoggerContext;function formatChildLoggerContext(logger,childContext,customContextKey=constants_1.PINO_CUSTOM_CONTEXT_KEY){const parentContext=getLoggerContext(logger,customContextKey);const context=parentContext.trim()?`${parentContext}/${childContext}`:childContext;return context}exports.formatChildLoggerContext=formatChildLoggerContext;function generateChildLogger(logger,childContext,customContextKey=constants_1.PINO_CUSTOM_CONTEXT_KEY){const context=formatChildLoggerContext(logger,childContext,customContextKey);const child=logger.child({context});return setBrowserLoggerContext(child,context,customContextKey)}exports.generateChildLogger=generateChildLogger},33904:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{__assign:()=>__assign,__asyncDelegator:()=>__asyncDelegator,__asyncGenerator:()=>__asyncGenerator,__asyncValues:()=>__asyncValues,__await:()=>__await,__awaiter:()=>__awaiter,__classPrivateFieldGet:()=>__classPrivateFieldGet,__classPrivateFieldSet:()=>__classPrivateFieldSet,__createBinding:()=>__createBinding,__decorate:()=>__decorate,__exportStar:()=>__exportStar,__extends:()=>__extends,__generator:()=>__generator,__importDefault:()=>__importDefault,__importStar:()=>__importStar,__makeTemplateObject:()=>__makeTemplateObject,__metadata:()=>__metadata,__param:()=>__param,__read:()=>__read,__rest:()=>__rest,__spread:()=>__spread,__spreadArrays:()=>__spreadArrays,__values:()=>__values});var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};function __extends(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];if(s!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]]}return t}function __decorate(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}}function __createBinding(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]}function __exportStar(m,exports){for(var p in m)if(p!=="default"&&!exports.hasOwnProperty(p))exports[p]=m[p]}function __values(o){var s=typeof Symbol==="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length==="number")return{next:function(){if(o&&i>=o.length)o=void 0;return{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m=typeof Symbol==="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{while((n===void 0||n-- >0)&&!(r=i.next()).done)ar.push(r.value)}catch(error){e={error}}finally{try{if(r&&!r.done&&(m=i["return"]))m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=generator.apply(thisArg,_arguments||[]),i,q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){if(g[n])i[n]=function(v){return new Promise((function(a,b){q.push([n,v,a,b])>1||resume(n,v)}))}}function resume(n,v){try{step(g[n](v))}catch(e){settle(q[0][3],e)}}function step(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){if(f(v),q.shift(),q.length)resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:n==="return"}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var m=o[Symbol.asyncIterator],i;return m?m.call(o):(o=typeof __values==="function"?__values(o):o[Symbol.iterator](),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise((function(resolve,reject){v=o[n](v),settle(resolve,reject,v.done,v.value)}))}}function settle(resolve,reject,d,v){Promise.resolve(v).then((function(v){resolve({value:v,done:d})}),reject)}}function __makeTemplateObject(cooked,raw){if(Object.defineProperty){Object.defineProperty(cooked,"raw",{value:raw})}else{cooked.raw=raw}return cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result.default=mod;return result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,privateMap){if(!privateMap.has(receiver)){throw new TypeError("attempted to get private field on non-instance")}return privateMap.get(receiver)}function __classPrivateFieldSet(receiver,privateMap,value){if(!privateMap.has(receiver)){throw new TypeError("attempted to set private field on non-instance")}privateMap.set(receiver,value);return value}},92778:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{RELAY_JSONRPC:()=>_jsonrpc__WEBPACK_IMPORTED_MODULE_2__.i,isPublishMethod:()=>_validators__WEBPACK_IMPORTED_MODULE_3__.tO,isPublishParams:()=>_validators__WEBPACK_IMPORTED_MODULE_3__.xx,isPublishRequest:()=>_validators__WEBPACK_IMPORTED_MODULE_3__.QY,isSubscribeMethod:()=>_validators__WEBPACK_IMPORTED_MODULE_3__.z9,isSubscribeParams:()=>_validators__WEBPACK_IMPORTED_MODULE_3__.Z6,isSubscribeRequest:()=>_validators__WEBPACK_IMPORTED_MODULE_3__.PJ,isSubscriptionMethod:()=>_validators__WEBPACK_IMPORTED_MODULE_3__.Hr,isSubscriptionParams:()=>_validators__WEBPACK_IMPORTED_MODULE_3__.aH,isSubscriptionRequest:()=>_validators__WEBPACK_IMPORTED_MODULE_3__.cW,isUnsubscribeMethod:()=>_validators__WEBPACK_IMPORTED_MODULE_3__.hq,isUnsubscribeParams:()=>_validators__WEBPACK_IMPORTED_MODULE_3__.Me,isUnsubscribeRequest:()=>_validators__WEBPACK_IMPORTED_MODULE_3__.eT,parsePublishRequest:()=>_parsers__WEBPACK_IMPORTED_MODULE_1__.kM,parseSubscribeRequest:()=>_parsers__WEBPACK_IMPORTED_MODULE_1__.tT,parseSubscriptionRequest:()=>_parsers__WEBPACK_IMPORTED_MODULE_1__.LW,parseUnsubscribeRequest:()=>_parsers__WEBPACK_IMPORTED_MODULE_1__.e5});var _types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(85607);var _types__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_types__WEBPACK_IMPORTED_MODULE_0__);var __WEBPACK_REEXPORT_OBJECT__={};for(const __WEBPACK_IMPORT_KEY__ in _types__WEBPACK_IMPORTED_MODULE_0__)if(__WEBPACK_IMPORT_KEY__!=="default")__WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__]=()=>_types__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__];__webpack_require__.d(__webpack_exports__,__WEBPACK_REEXPORT_OBJECT__);var _parsers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(84716);var _jsonrpc__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(60956);var _validators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(90740)},60956:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>RELAY_JSONRPC});const RELAY_JSONRPC={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}}},95290:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{C1:()=>methodEndsWith,p3:()=>checkParams,p_:()=>assertType});function assertType(obj,key,type="string"){if(!obj[key]||typeof obj[key]!==type){throw new Error(`Missing or invalid "${key}" param`)}}function hasRequiredParams(params,required){let matches=true;required.forEach((key=>{const exists=key in params;if(!exists){matches=false}}));return matches}function hasExactParamsLength(params,length){return Array.isArray(params)?params.length===length:Object.keys(params).length===length}function hasRequiredParamsLength(params,minLength){return Array.isArray(params)?params.length>=minLength:Object.keys(params).length>=minLength}function checkParams(params,required,optional){const exact=!optional.length;const matchesLength=exact?hasExactParamsLength(params,required.length):hasRequiredParamsLength(params,required.length);if(!matchesLength)return false;return hasRequiredParams(params,required)}function methodEndsWith(method,expected,separator="_"){const split=method.split(separator);return split[split.length-1].trim().toLowerCase()===expected.trim().toLowerCase()}},84716:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{LW:()=>parseSubscriptionRequest,e5:()=>parseUnsubscribeRequest,kM:()=>parsePublishRequest,tT:()=>parseSubscribeRequest});var _misc__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(95290);var _validators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(90740);function parseSubscribeRequest(request){if(!(0,_validators__WEBPACK_IMPORTED_MODULE_0__.z9)(request.method)){throw new Error("JSON-RPC Request has invalid subscribe method")}if(!(0,_validators__WEBPACK_IMPORTED_MODULE_0__.Z6)(request.params)){throw new Error("JSON-RPC Request has invalid subscribe params")}const params=request.params;(0,_misc__WEBPACK_IMPORTED_MODULE_1__.p_)(params,"topic");return params}function parsePublishRequest(request){if(!(0,_validators__WEBPACK_IMPORTED_MODULE_0__.tO)(request.method)){throw new Error("JSON-RPC Request has invalid publish method")}if(!(0,_validators__WEBPACK_IMPORTED_MODULE_0__.xx)(request.params)){throw new Error("JSON-RPC Request has invalid publish params")}const params=request.params;(0,_misc__WEBPACK_IMPORTED_MODULE_1__.p_)(params,"topic");(0,_misc__WEBPACK_IMPORTED_MODULE_1__.p_)(params,"message");(0,_misc__WEBPACK_IMPORTED_MODULE_1__.p_)(params,"ttl","number");return params}function parseUnsubscribeRequest(request){if(!(0,_validators__WEBPACK_IMPORTED_MODULE_0__.hq)(request.method)){throw new Error("JSON-RPC Request has invalid unsubscribe method")}if(!(0,_validators__WEBPACK_IMPORTED_MODULE_0__.Me)(request.params)){throw new Error("JSON-RPC Request has invalid unsubscribe params")}const params=request.params;(0,_misc__WEBPACK_IMPORTED_MODULE_1__.p_)(params,"id");return params}function parseSubscriptionRequest(request){if(!(0,_validators__WEBPACK_IMPORTED_MODULE_0__.Hr)(request.method)){throw new Error("JSON-RPC Request has invalid subscription method")}if(!(0,_validators__WEBPACK_IMPORTED_MODULE_0__.aH)(request.params)){throw new Error("JSON-RPC Request has invalid subscription params")}const params=request.params;(0,_misc__WEBPACK_IMPORTED_MODULE_1__.p_)(params,"id");(0,_misc__WEBPACK_IMPORTED_MODULE_1__.p_)(params,"data");return params}},85607:()=>{},90740:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Hr:()=>isSubscriptionMethod,Me:()=>isUnsubscribeParams,PJ:()=>isSubscribeRequest,QY:()=>isPublishRequest,Z6:()=>isSubscribeParams,aH:()=>isSubscriptionParams,cW:()=>isSubscriptionRequest,eT:()=>isUnsubscribeRequest,hq:()=>isUnsubscribeMethod,tO:()=>isPublishMethod,xx:()=>isPublishParams,z9:()=>isSubscribeMethod});var _misc__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(95290);function isSubscribeRequest(request){return isSubscribeMethod(request.method)&&isSubscribeParams(request.params)}function isSubscribeMethod(method){return(0,_misc__WEBPACK_IMPORTED_MODULE_0__.C1)(method,"subscribe")}function isSubscribeParams(params){const required=["topic"];const optional=[];return(0,_misc__WEBPACK_IMPORTED_MODULE_0__.p3)(params,required,optional)}function isPublishRequest(request){return isPublishMethod(request.method)&&isPublishParams(request.params)}function isPublishMethod(method){return(0,_misc__WEBPACK_IMPORTED_MODULE_0__.C1)(method,"publish")}function isPublishParams(params){const required=["message","topic","ttl"];const optional=["prompt","tag"];return(0,_misc__WEBPACK_IMPORTED_MODULE_0__.p3)(params,required,optional)}function isUnsubscribeRequest(request){return isUnsubscribeMethod(request.method)&&isUnsubscribeParams(request.params)}function isUnsubscribeMethod(method){return(0,_misc__WEBPACK_IMPORTED_MODULE_0__.C1)(method,"unsubscribe")}function isUnsubscribeParams(params){const required=["id","topic"];const optional=[];return(0,_misc__WEBPACK_IMPORTED_MODULE_0__.p3)(params,required,optional)}function isSubscriptionRequest(request){return isSubscriptionMethod(request.method)&&isSubscriptionParams(request.params)}function isSubscriptionMethod(method){return(0,_misc__WEBPACK_IMPORTED_MODULE_0__.C1)(method,"subscription")}function isSubscriptionParams(params){const required=["id","data"];const optional=[];return(0,_misc__WEBPACK_IMPORTED_MODULE_0__.p3)(params,required,optional)}},62499:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Au:()=>generateKeyPair,PZ:()=>verifyJWT,vf:()=>signJWT});var _stablelib_ed25519__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(34760);var _stablelib_random__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(93571);var _walletconnect_time__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(87508);var _walletconnect_time__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__);var _constants__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8554);var _utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(92513);function generateKeyPair(seed=(0,_stablelib_random__WEBPACK_IMPORTED_MODULE_1__.randomBytes)(_constants__WEBPACK_IMPORTED_MODULE_4__.GS)){return _stablelib_ed25519__WEBPACK_IMPORTED_MODULE_0__._w(seed)}async function signJWT(sub,aud,ttl,keyPair,iat=(0,_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.fromMiliseconds)(Date.now())){const header={alg:_constants__WEBPACK_IMPORTED_MODULE_4__.RB,typ:_constants__WEBPACK_IMPORTED_MODULE_4__.xM};const iss=(0,_utils__WEBPACK_IMPORTED_MODULE_3__.bG)(keyPair.publicKey);const exp=iat+ttl;const payload={iss,sub,aud,iat,exp};const data=(0,_utils__WEBPACK_IMPORTED_MODULE_3__.v8)({header,payload});const signature=_stablelib_ed25519__WEBPACK_IMPORTED_MODULE_0__.Xx(keyPair.secretKey,data);return(0,_utils__WEBPACK_IMPORTED_MODULE_3__.RE)({header,payload,signature})}async function verifyJWT(jwt){const{header,payload,data,signature}=(0,_utils__WEBPACK_IMPORTED_MODULE_3__.xp)(jwt);if(header.alg!==_constants__WEBPACK_IMPORTED_MODULE_4__.RB||header.typ!==_constants__WEBPACK_IMPORTED_MODULE_4__.xM){throw new Error("JWT must use EdDSA algorithm")}const publicKey=(0,_utils__WEBPACK_IMPORTED_MODULE_3__.nx)(payload.iss);return _stablelib_ed25519__WEBPACK_IMPORTED_MODULE_0__.T(publicKey,data,signature)}},8554:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{G:()=>JWT_DELIMITER,GS:()=>KEY_PAIR_SEED_LENGTH,Hc:()=>DID_METHOD,Hk:()=>MULTICODEC_ED25519_ENCODING,M_:()=>MULTICODEC_ED25519_HEADER,RB:()=>JWT_IRIDIUM_ALG,S4:()=>DID_DELIMITER,ac:()=>JWT_ENCODING,b$:()=>JSON_ENCODING,dB:()=>DID_PREFIX,qc:()=>MULTICODEC_ED25519_LENGTH,vV:()=>DATA_ENCODING,xM:()=>JWT_IRIDIUM_TYP,xV:()=>MULTICODEC_ED25519_BASE});const JWT_IRIDIUM_ALG="EdDSA";const JWT_IRIDIUM_TYP="JWT";const JWT_DELIMITER=".";const JWT_ENCODING="base64url";const JSON_ENCODING="utf8";const DATA_ENCODING="utf8";const DID_DELIMITER=":";const DID_PREFIX="did";const DID_METHOD="key";const MULTICODEC_ED25519_ENCODING="base58btc";const MULTICODEC_ED25519_BASE="z";const MULTICODEC_ED25519_HEADER="K36";const MULTICODEC_ED25519_LENGTH=32;const KEY_PAIR_SEED_LENGTH=32},44576:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{DATA_ENCODING:()=>_constants__WEBPACK_IMPORTED_MODULE_1__.vV,DID_DELIMITER:()=>_constants__WEBPACK_IMPORTED_MODULE_1__.S4,DID_METHOD:()=>_constants__WEBPACK_IMPORTED_MODULE_1__.Hc,DID_PREFIX:()=>_constants__WEBPACK_IMPORTED_MODULE_1__.dB,JSON_ENCODING:()=>_constants__WEBPACK_IMPORTED_MODULE_1__.b$,JWT_DELIMITER:()=>_constants__WEBPACK_IMPORTED_MODULE_1__.G,JWT_ENCODING:()=>_constants__WEBPACK_IMPORTED_MODULE_1__.ac,JWT_IRIDIUM_ALG:()=>_constants__WEBPACK_IMPORTED_MODULE_1__.RB,JWT_IRIDIUM_TYP:()=>_constants__WEBPACK_IMPORTED_MODULE_1__.xM,KEY_PAIR_SEED_LENGTH:()=>_constants__WEBPACK_IMPORTED_MODULE_1__.GS,MULTICODEC_ED25519_BASE:()=>_constants__WEBPACK_IMPORTED_MODULE_1__.xV,MULTICODEC_ED25519_ENCODING:()=>_constants__WEBPACK_IMPORTED_MODULE_1__.Hk,MULTICODEC_ED25519_HEADER:()=>_constants__WEBPACK_IMPORTED_MODULE_1__.M_,MULTICODEC_ED25519_LENGTH:()=>_constants__WEBPACK_IMPORTED_MODULE_1__.qc,decodeData:()=>_utils__WEBPACK_IMPORTED_MODULE_3__.V1,decodeIss:()=>_utils__WEBPACK_IMPORTED_MODULE_3__.nx,decodeJSON:()=>_utils__WEBPACK_IMPORTED_MODULE_3__.qY,decodeJWT:()=>_utils__WEBPACK_IMPORTED_MODULE_3__.xp,decodeSig:()=>_utils__WEBPACK_IMPORTED_MODULE_3__.GB,encodeData:()=>_utils__WEBPACK_IMPORTED_MODULE_3__.v8,encodeIss:()=>_utils__WEBPACK_IMPORTED_MODULE_3__.bG,encodeJSON:()=>_utils__WEBPACK_IMPORTED_MODULE_3__.Ne,encodeJWT:()=>_utils__WEBPACK_IMPORTED_MODULE_3__.RE,encodeSig:()=>_utils__WEBPACK_IMPORTED_MODULE_3__.jQ,generateKeyPair:()=>_api__WEBPACK_IMPORTED_MODULE_0__.Au,signJWT:()=>_api__WEBPACK_IMPORTED_MODULE_0__.vf,verifyJWT:()=>_api__WEBPACK_IMPORTED_MODULE_0__.PZ});var _api__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(62499);var _constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8554);var _types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(81950);var _types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_types__WEBPACK_IMPORTED_MODULE_2__);var __WEBPACK_REEXPORT_OBJECT__={};for(const __WEBPACK_IMPORT_KEY__ in _types__WEBPACK_IMPORTED_MODULE_2__)if(["default","generateKeyPair","signJWT","verifyJWT","DATA_ENCODING","DID_DELIMITER","DID_METHOD","DID_PREFIX","JSON_ENCODING","JWT_DELIMITER","JWT_ENCODING","JWT_IRIDIUM_ALG","JWT_IRIDIUM_TYP","KEY_PAIR_SEED_LENGTH","MULTICODEC_ED25519_BASE","MULTICODEC_ED25519_ENCODING","MULTICODEC_ED25519_HEADER","MULTICODEC_ED25519_LENGTH"].indexOf(__WEBPACK_IMPORT_KEY__)<0)__WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__]=()=>_types__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__];__webpack_require__.d(__webpack_exports__,__WEBPACK_REEXPORT_OBJECT__);var _utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(92513)},81950:()=>{},92513:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{V1:()=>decodeData,nx:()=>decodeIss,qY:()=>decodeJSON,xp:()=>decodeJWT,GB:()=>decodeSig,v8:()=>encodeData,bG:()=>encodeIss,Ne:()=>encodeJSON,RE:()=>encodeJWT,jQ:()=>encodeSig});function concat(arrays,length){if(!length){length=arrays.reduce(((acc,curr)=>acc+curr.length),0)}const output=new Uint8Array(length);let offset=0;for(const arr of arrays){output.set(arr,offset);offset+=arr.length}return output}var basics=__webpack_require__(72533);function createCodec(name,prefix,encode,decode){return{name,prefix,encoder:{name,prefix,encode},decoder:{decode}}}const string=createCodec("utf8","u",(buf=>{const decoder=new TextDecoder("utf8");return"u"+decoder.decode(buf)}),(str=>{const encoder=new TextEncoder;return encoder.encode(str.substring(1))}));const ascii=createCodec("ascii","a",(buf=>{let string="a";for(let i=0;i<buf.length;i++){string+=String.fromCharCode(buf[i])}return string}),(str=>{str=str.substring(1);const buf=new Uint8Array(str.length);for(let i=0;i<str.length;i++){buf[i]=str.charCodeAt(i)}return buf}));const BASES={utf8:string,"utf-8":string,hex:basics.gh.base16,latin1:ascii,ascii,binary:ascii,...basics.gh};const bases=BASES;function to_string_toString(array,encoding="utf8"){const base=bases[encoding];if(!base){throw new Error(`Unsupported encoding "${encoding}"`)}return base.encoder.encode(array).substring(1)}function fromString(string,encoding="utf8"){const base=bases[encoding];if(!base){throw new Error(`Unsupported encoding "${encoding}"`)}return base.decoder.decode(`${base.prefix}${string}`)}var esm=__webpack_require__(97530);var constants=__webpack_require__(8554);function decodeJSON(str){return(0,esm.safeJsonParse)(to_string_toString(fromString(str,constants.ac),constants.b$))}function encodeJSON(val){return to_string_toString(fromString((0,esm.safeJsonStringify)(val),constants.b$),constants.ac)}function encodeIss(publicKey){const header=fromString(constants.M_,constants.Hk);const multicodec=constants.xV+to_string_toString(concat([header,publicKey]),constants.Hk);return[constants.dB,constants.Hc,multicodec].join(constants.S4)}function decodeIss(issuer){const[prefix,method,multicodec]=issuer.split(constants.S4);if(prefix!==constants.dB||method!==constants.Hc){throw new Error(`Issuer must be a DID with method "key"`)}const base=multicodec.slice(0,1);if(base!==constants.xV){throw new Error(`Issuer must be a key in mulicodec format`)}const bytes=fromString(multicodec.slice(1),constants.Hk);const type=to_string_toString(bytes.slice(0,2),constants.Hk);if(type!==constants.M_){throw new Error(`Issuer must be a public key with type "Ed25519"`)}const publicKey=bytes.slice(2);if(publicKey.length!==constants.qc){throw new Error(`Issuer must be a public key with length 32 bytes`)}return publicKey}function encodeSig(bytes){return to_string_toString(bytes,constants.ac)}function decodeSig(encoded){return fromString(encoded,constants.ac)}function encodeData(params){return fromString([encodeJSON(params.header),encodeJSON(params.payload)].join(constants.G),constants.vV)}function decodeData(data){const params=to_string_toString(data,constants.vV).split(constants.G);const header=decodeJSON(params[0]);const payload=decodeJSON(params[1]);return{header,payload}}function encodeJWT(params){return[encodeJSON(params.header),encodeJSON(params.payload),encodeSig(params.signature)].join(constants.G)}function decodeJWT(jwt){const params=jwt.split(constants.G);const header=decodeJSON(params[0]);const payload=decodeJSON(params[1]);const signature=decodeSig(params[2]);const data=fromString(params.slice(0,2).join(constants.G),constants.vV);return{header,payload,signature,data}}},95561:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=__webpack_require__(37472);tslib_1.__exportStar(__webpack_require__(94489),exports);tslib_1.__exportStar(__webpack_require__(24831),exports)},94489:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ONE_THOUSAND=exports.ONE_HUNDRED=void 0;exports.ONE_HUNDRED=100;exports.ONE_THOUSAND=1e3},24831:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ONE_YEAR=exports.FOUR_WEEKS=exports.THREE_WEEKS=exports.TWO_WEEKS=exports.ONE_WEEK=exports.THIRTY_DAYS=exports.SEVEN_DAYS=exports.FIVE_DAYS=exports.THREE_DAYS=exports.ONE_DAY=exports.TWENTY_FOUR_HOURS=exports.TWELVE_HOURS=exports.SIX_HOURS=exports.THREE_HOURS=exports.ONE_HOUR=exports.SIXTY_MINUTES=exports.THIRTY_MINUTES=exports.TEN_MINUTES=exports.FIVE_MINUTES=exports.ONE_MINUTE=exports.SIXTY_SECONDS=exports.THIRTY_SECONDS=exports.TEN_SECONDS=exports.FIVE_SECONDS=exports.ONE_SECOND=void 0;exports.ONE_SECOND=1;exports.FIVE_SECONDS=5;exports.TEN_SECONDS=10;exports.THIRTY_SECONDS=30;exports.SIXTY_SECONDS=60;exports.ONE_MINUTE=exports.SIXTY_SECONDS;exports.FIVE_MINUTES=exports.ONE_MINUTE*5;exports.TEN_MINUTES=exports.ONE_MINUTE*10;exports.THIRTY_MINUTES=exports.ONE_MINUTE*30;exports.SIXTY_MINUTES=exports.ONE_MINUTE*60;exports.ONE_HOUR=exports.SIXTY_MINUTES;exports.THREE_HOURS=exports.ONE_HOUR*3;exports.SIX_HOURS=exports.ONE_HOUR*6;exports.TWELVE_HOURS=exports.ONE_HOUR*12;exports.TWENTY_FOUR_HOURS=exports.ONE_HOUR*24;exports.ONE_DAY=exports.TWENTY_FOUR_HOURS;exports.THREE_DAYS=exports.ONE_DAY*3;exports.FIVE_DAYS=exports.ONE_DAY*5;exports.SEVEN_DAYS=exports.ONE_DAY*7;exports.THIRTY_DAYS=exports.ONE_DAY*30;exports.ONE_WEEK=exports.SEVEN_DAYS;exports.TWO_WEEKS=exports.ONE_WEEK*2;exports.THREE_WEEKS=exports.ONE_WEEK*3;exports.FOUR_WEEKS=exports.ONE_WEEK*4;exports.ONE_YEAR=exports.ONE_DAY*365},87508:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=__webpack_require__(37472);tslib_1.__exportStar(__webpack_require__(97942),exports);tslib_1.__exportStar(__webpack_require__(88241),exports);tslib_1.__exportStar(__webpack_require__(90478),exports);tslib_1.__exportStar(__webpack_require__(95561),exports)},90478:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=__webpack_require__(37472);tslib_1.__exportStar(__webpack_require__(25391),exports)},25391:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IWatch=void 0;class IWatch{}exports.IWatch=IWatch},92202:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fromMiliseconds=exports.toMiliseconds=void 0;const constants_1=__webpack_require__(95561);function toMiliseconds(seconds){return seconds*constants_1.ONE_THOUSAND}exports.toMiliseconds=toMiliseconds;function fromMiliseconds(miliseconds){return Math.floor(miliseconds/constants_1.ONE_THOUSAND)}exports.fromMiliseconds=fromMiliseconds},89363:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.delay=void 0;function delay(timeout){return new Promise((resolve=>{setTimeout((()=>{resolve(true)}),timeout)}))}exports.delay=delay},97942:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=__webpack_require__(37472);tslib_1.__exportStar(__webpack_require__(89363),exports);tslib_1.__exportStar(__webpack_require__(92202),exports)},88241:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Watch=void 0;class Watch{constructor(){this.timestamps=new Map}start(label){if(this.timestamps.has(label)){throw new Error(`Watch already started for label: ${label}`)}this.timestamps.set(label,{started:Date.now()})}stop(label){const timestamp=this.get(label);if(typeof timestamp.elapsed!=="undefined"){throw new Error(`Watch already stopped for label: ${label}`)}const elapsed=Date.now()-timestamp.started;this.timestamps.set(label,{started:timestamp.started,elapsed})}get(label){const timestamp=this.timestamps.get(label);if(typeof timestamp==="undefined"){throw new Error(`No timestamp found for label: ${label}`)}return timestamp}elapsed(label){const timestamp=this.get(label);const elapsed=timestamp.elapsed||Date.now()-timestamp.started;return elapsed}}exports.Watch=Watch;exports["default"]=Watch},37472:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{__assign:()=>__assign,__asyncDelegator:()=>__asyncDelegator,__asyncGenerator:()=>__asyncGenerator,__asyncValues:()=>__asyncValues,__await:()=>__await,__awaiter:()=>__awaiter,__classPrivateFieldGet:()=>__classPrivateFieldGet,__classPrivateFieldSet:()=>__classPrivateFieldSet,__createBinding:()=>__createBinding,__decorate:()=>__decorate,__exportStar:()=>__exportStar,__extends:()=>__extends,__generator:()=>__generator,__importDefault:()=>__importDefault,__importStar:()=>__importStar,__makeTemplateObject:()=>__makeTemplateObject,__metadata:()=>__metadata,__param:()=>__param,__read:()=>__read,__rest:()=>__rest,__spread:()=>__spread,__spreadArrays:()=>__spreadArrays,__values:()=>__values});var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};function __extends(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];if(s!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]]}return t}function __decorate(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}}function __createBinding(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]}function __exportStar(m,exports){for(var p in m)if(p!=="default"&&!exports.hasOwnProperty(p))exports[p]=m[p]}function __values(o){var s=typeof Symbol==="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length==="number")return{next:function(){if(o&&i>=o.length)o=void 0;return{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m=typeof Symbol==="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{while((n===void 0||n-- >0)&&!(r=i.next()).done)ar.push(r.value)}catch(error){e={error}}finally{try{if(r&&!r.done&&(m=i["return"]))m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=generator.apply(thisArg,_arguments||[]),i,q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){if(g[n])i[n]=function(v){return new Promise((function(a,b){q.push([n,v,a,b])>1||resume(n,v)}))}}function resume(n,v){try{step(g[n](v))}catch(e){settle(q[0][3],e)}}function step(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){if(f(v),q.shift(),q.length)resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:n==="return"}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var m=o[Symbol.asyncIterator],i;return m?m.call(o):(o=typeof __values==="function"?__values(o):o[Symbol.iterator](),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise((function(resolve,reject){v=o[n](v),settle(resolve,reject,v.done,v.value)}))}}function settle(resolve,reject,d,v){Promise.resolve(v).then((function(v){resolve({value:v,done:d})}),reject)}}function __makeTemplateObject(cooked,raw){if(Object.defineProperty){Object.defineProperty(cooked,"raw",{value:raw})}else{cooked.raw=raw}return cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result.default=mod;return result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,privateMap){if(!privateMap.has(receiver)){throw new TypeError("attempted to get private field on non-instance")}return privateMap.get(receiver)}function __classPrivateFieldSet(receiver,privateMap,value){if(!privateMap.has(receiver)){throw new TypeError("attempted to set private field on non-instance")}privateMap.set(receiver,value);return value}},64882:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=__webpack_require__(67328),c=__webpack_require__(63683);function i(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var n=i(c);class l extends r.IEvents{constructor(s){super(),this.opts=s,this.protocol="wc",this.version=2}}class a{constructor(s,t,o){this.core=s,this.logger=t}}class u extends r.IEvents{constructor(s,t){super(),this.core=s,this.logger=t,this.records=new Map}}class I{constructor(s,t){this.logger=s,this.core=t}}class h extends r.IEvents{constructor(s,t){super(),this.relayer=s,this.logger=t}}class g extends r.IEvents{constructor(s){super()}}class p{constructor(s,t,o,M){this.core=s,this.logger=t,this.name=o}}class v{constructor(){this.map=new Map}}class E extends r.IEvents{constructor(s,t){super(),this.relayer=s,this.logger=t}}class d{constructor(s,t){this.core=s,this.logger=t}}class y extends r.IEvents{constructor(s,t){super(),this.core=s,this.logger=t}}class b{constructor(s,t){this.logger=s,this.core=t}}class x extends n.default{constructor(){super()}}class C{constructor(s){this.opts=s,this.protocol="wc",this.version=2}}class S extends c.EventEmitter{constructor(){super()}}class f{constructor(s){this.client=s}}exports.ICore=l,exports.ICrypto=a,exports.IEngine=f,exports.IEngineEvents=S,exports.IExpirer=y,exports.IJsonRpcHistory=u,exports.IKeyChain=d,exports.IMessageTracker=I,exports.IPairing=b,exports.IPublisher=h,exports.IRelayer=g,exports.ISignClient=C,exports.ISignClientEvents=x,exports.IStore=p,exports.ISubscriber=E,exports.ISubscriberTopicMap=v},85562:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var process=__webpack_require__(49021);Object.defineProperty(exports,"__esModule",{value:!0});var Q=__webpack_require__(98040),Be=__webpack_require__(35416),Z=__webpack_require__(93571),j=__webpack_require__(11182),ze=__webpack_require__(19495),c=__webpack_require__(35214),Ye=__webpack_require__(50213),v=__webpack_require__(87508),b=__webpack_require__(9504),Ge=__webpack_require__(40894),We=__webpack_require__(9685),Je=__webpack_require__(92778);function X(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if(t!=="default"){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,Object.freeze(n)}var ee=X(ze),I=X(We);const P=":";function ne(e){const[n,t]=e.split(P);return{namespace:n,reference:t}}function te(e){const{namespace:n,reference:t}=e;return[n,t].join(P)}function $(e){const[n,t,r]=e.split(P);return{namespace:n,reference:t,address:r}}function re(e){const{namespace:n,reference:t,address:r}=e;return[n,t,r].join(P)}function M(e,n){const t=[];return e.forEach((r=>{const s=n(r);t.includes(s)||t.push(s)})),t}function se(e){const{address:n}=$(e);return n}function oe(e){const{namespace:n,reference:t}=$(e);return te({namespace:n,reference:t})}function Qe(e,n){const{namespace:t,reference:r}=ne(n);return re({namespace:t,reference:r,address:e})}function Ze(e){return M(e,se)}function ie(e){return M(e,oe)}function Xe(e,n=[]){const t=[];return Object.keys(e).forEach((r=>{if(n.length&&!n.includes(r))return;const s=e[r];t.push(...s.accounts)})),t}function en(e,n=[]){const t=[];return Object.keys(e).forEach((r=>{if(n.length&&!n.includes(r))return;const s=e[r];t.push(...ie(s.accounts))})),t}function nn(e,n=[]){const t=[];return Object.keys(e).forEach((r=>{if(n.length&&!n.includes(r))return;const s=e[r];t.push(...R(r,s))})),t}function R(e,n){return e.includes(":")?[e]:n.chains||[]}const C=e=>e?.split(":"),ae=e=>{const n=e&&C(e);if(n)return n[3]},tn=e=>{const n=e&&C(e);if(n)return n[2]+":"+n[3]},ce=e=>{const n=e&&C(e);if(n)return n.pop()},rn=(e,n)=>{const t=`${e.domain} wants you to sign in with your Ethereum account:`,r=ce(n),s=e.statement,o=`URI: ${e.aud}`,i=`Version: ${e.version}`,u=`Chain ID: ${ae(n)}`,p=`Nonce: ${e.nonce}`,m=`Issued At: ${e.iat}`,f=e.resources&&e.resources.length>0?`Resources:\n${e.resources.map((a=>`- ${a}`)).join(`\n`)}`:void 0;return[t,r,"",s,"",o,i,u,p,m,f].filter((a=>a!=null)).join(`\n`)},K="base10",d="base16",_="base64pad",U="utf8",F=0,S=1,sn=0,ue=1,q=12,k=32;function on(){const e=ee.generateKeyPair();return{privateKey:c.toString(e.secretKey,d),publicKey:c.toString(e.publicKey,d)}}function an(){const e=Z.randomBytes(k);return c.toString(e,d)}function cn(e,n){const t=ee.sharedKey(c.fromString(e,d),c.fromString(n,d)),r=new Be.HKDF(j.SHA256,t).expand(k);return c.toString(r,d)}function un(e){const n=j.hash(c.fromString(e,d));return c.toString(n,d)}function dn(e){const n=j.hash(c.fromString(e,U));return c.toString(n,d)}function de(e){return c.fromString(`${e}`,K)}function A(e){return Number(c.toString(e,K))}function ln(e){const n=de(typeof e.type<"u"?e.type:F);if(A(n)===S&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof e.senderPublicKey<"u"?c.fromString(e.senderPublicKey,d):void 0,r=typeof e.iv<"u"?c.fromString(e.iv,d):Z.randomBytes(q),s=new Q.ChaCha20Poly1305(c.fromString(e.symKey,d)).seal(r,c.fromString(e.message,U));return le({type:n,sealed:s,iv:r,senderPublicKey:t})}function pn(e){const n=new Q.ChaCha20Poly1305(c.fromString(e.symKey,d)),{sealed:t,iv:r}=L(e.encoded),s=n.open(r,t);if(s===null)throw new Error("Failed to decrypt");return c.toString(s,U)}function le(e){if(A(e.type)===S){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return c.toString(c.concat([e.type,e.senderPublicKey,e.iv,e.sealed]),_)}return c.toString(c.concat([e.type,e.iv,e.sealed]),_)}function L(e){const n=c.fromString(e,_),t=n.slice(sn,ue),r=ue;if(A(t)===S){const u=r+k,p=u+q,m=n.slice(r,u),f=n.slice(u,p),a=n.slice(p);return{type:t,sealed:a,iv:f,senderPublicKey:m}}const s=r+q,o=n.slice(r,s),i=n.slice(s);return{type:t,sealed:i,iv:o}}function fn(e,n){const t=L(e);return pe({type:A(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?c.toString(t.senderPublicKey,d):void 0,receiverPublicKey:n?.receiverPublicKey})}function pe(e){const n=e?.type||F;if(n===S){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:n,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function mn(e){return e.type===S&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}var yn=Object.defineProperty,fe=Object.getOwnPropertySymbols,gn=Object.prototype.hasOwnProperty,En=Object.prototype.propertyIsEnumerable,me=(e,n,t)=>n in e?yn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,ye=(e,n)=>{for(var t in n||(n={}))gn.call(n,t)&&me(e,t,n[t]);if(fe)for(var t of fe(n))En.call(n,t)&&me(e,t,n[t]);return e};const ge="ReactNative",O={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},V=" ",hn=":",Ee="/",x=2,Nn=1e3,he="js";function H(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ne(){return!b.getDocument()&&!!b.getNavigator()&&navigator.product===ge}function ve(){return!H()&&!!b.getNavigator()}function B(){return Ne()?O.reactNative:H()?O.node:ve()?O.browser:O.unknown}function Se(e,n){let t=I.parse(e);return t=ye(ye({},t),n),e=I.stringify(t),e}function vn(){return Ge.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function Sn(e,n){var t;const r=B(),s={protocol:e,version:n,env:r};return r==="browser"&&(s.host=((t=b.getLocation())==null?void 0:t.host)||"unknown"),s}function Oe(){const e=Ye.detect();if(e===null)return"unknown";const n=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[n,e.name,e.version].join("-"):[n,e.version].join("-")}function be(){var e;const n=B();return n===O.browser?[n,((e=b.getLocation())==null?void 0:e.host)||"unknown"].join(":"):n}function Ae(e,n,t){const r=Oe(),s=be();return[[e,n].join("-"),[he,t].join("-"),r,s].join("/")}function On({protocol:e,version:n,relayUrl:t,sdkVersion:r,auth:s,projectId:o,useOnCloseEvent:i}){const u=t.split("?"),p=Ae(e,n,r),m={auth:s,ua:p,projectId:o,useOnCloseEvent:i||void 0},f=Se(u[1]||"",m);return u[0]+"?"+f}function bn(e){let n=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const t=typeof n<"u"?e.split("://")[1]:e;return n=n==="wss"?"https":"http",[n,t].join("://")}function An(e,n,t){if(!e[n]||typeof e[n]!==t)throw new Error(`Missing or invalid "${n}" param`)}function Te(e,n=x){return Ie(e.split(Ee),n)}function Tn(e){return Te(e).join(V)}function g(e,n){return e.filter((t=>n.includes(t))).length===e.length}function Ie(e,n=x){return e.slice(Math.max(e.length-n,0))}function In(e){return Object.fromEntries(e.entries())}function Pn(e){return new Map(Object.entries(e))}function Rn(e,n){const t={};return Object.keys(e).forEach((r=>{t[r]=n(e[r])})),t}const Cn=e=>e;function Pe(e){return e.trim().replace(/^\w/,(n=>n.toUpperCase()))}function _n(e){return e.split(V).map((n=>Pe(n))).join(V)}function Un(e=v.FIVE_MINUTES,n){const t=v.toMiliseconds(e||v.FIVE_MINUTES);let r,s,o;return{resolve:i=>{o&&r&&(clearTimeout(o),r(i))},reject:i=>{o&&s&&(clearTimeout(o),s(i))},done:()=>new Promise(((i,u)=>{o=setTimeout((()=>{u(new Error(n))}),t),r=i,s=u}))}}function Vn(e,n,t){return new Promise((async(r,s)=>{const o=setTimeout((()=>s(new Error(t))),n);try{const i=await e;r(i)}catch(i){s(i)}clearTimeout(o)}))}function z(e,n){if(typeof n=="string"&&n.startsWith(`${e}:`))return n;if(e.toLowerCase()==="topic"){if(typeof n!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${n}`}else if(e.toLowerCase()==="id"){if(typeof n!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${n}`}throw new Error(`Unknown expirer target type: ${e}`)}function wn(e){return z("topic",e)}function Dn(e){return z("id",e)}function jn(e){const[n,t]=e.split(":"),r={id:void 0,topic:void 0};if(n==="topic"&&typeof t=="string")r.topic=t;else if(n==="id"&&Number.isInteger(Number(t)))r.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${n}:${t}`);return r}function $n(e,n){return v.fromMiliseconds((n||Date.now())+v.toMiliseconds(e))}function Mn(e){return Date.now()>=v.toMiliseconds(e)}function Kn(e,n){return`${e}${n?`:${n}`:""}`}const Re="irn";function Fn(e){return e?.relay||{protocol:Re}}function qn(e){const n=Je.RELAY_JSONRPC[e];if(typeof n>"u")throw new Error(`Relay Protocol not supported: ${e}`);return n}var kn=Object.defineProperty,Ce=Object.getOwnPropertySymbols,Ln=Object.prototype.hasOwnProperty,xn=Object.prototype.propertyIsEnumerable,_e=(e,n,t)=>n in e?kn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Hn=(e,n)=>{for(var t in n||(n={}))Ln.call(n,t)&&_e(e,t,n[t]);if(Ce)for(var t of Ce(n))xn.call(n,t)&&_e(e,t,n[t]);return e};function Ue(e,n="-"){const t={},r="relay"+n;return Object.keys(e).forEach((s=>{if(s.startsWith(r)){const o=s.replace(r,""),i=e[s];t[o]=i}})),t}function Bn(e){const n=e.indexOf(":"),t=e.indexOf("?")!==-1?e.indexOf("?"):void 0,r=e.substring(0,n),s=e.substring(n+1,t).split("@"),o=typeof t<"u"?e.substring(t):"",i=I.parse(o);return{protocol:r,topic:s[0],version:parseInt(s[1],10),symKey:i.symKey,relay:Ue(i)}}function Ve(e,n="-"){const t="relay",r={};return Object.keys(e).forEach((s=>{const o=t+n+s;e[s]&&(r[o]=e[s])})),r}function zn(e){return`${e.protocol}:${e.topic}@${e.version}?`+I.stringify(Hn({symKey:e.symKey},Ve(e.relay)))}function h(e){const n=[];return e.forEach((t=>{const[r,s]=t.split(":");n.push(`${r}:${s}`)})),n}function we(e){const n=[];return Object.values(e).forEach((t=>{n.push(...h(t.accounts))})),n}function De(e,n){const t=[];return Object.values(e).forEach((r=>{h(r.accounts).includes(n)&&t.push(...r.methods)})),t}function je(e,n){const t=[];return Object.values(e).forEach((r=>{h(r.accounts).includes(n)&&t.push(...r.events)})),t}function Yn(e,n){const t=Le(e,n);if(t)throw new Error(t.message);const r={};for(const[s,o]of Object.entries(e))r[s]={methods:o.methods,events:o.events,chains:o.accounts.map((i=>`${i.split(":")[0]}:${i.split(":")[1]}`))};return r}const Gn={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Wn={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function y(e,n){const{message:t,code:r}=Wn[e];return{message:n?`${t} ${n}`:t,code:r}}function N(e,n){const{message:t,code:r}=Gn[e];return{message:n?`${t} ${n}`:t,code:r}}function T(e,n){return Array.isArray(e)?typeof n<"u"&&e.length?e.every(n):!0:!1}function Y(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function E(e){return typeof e>"u"}function l(e,n){return n&&E(e)?!0:typeof e=="string"&&Boolean(e.trim().length)}function w(e,n){return n&&E(e)?!0:typeof e=="number"&&!isNaN(e)}function Jn(e,n){const{requiredNamespaces:t}=n,r=Object.keys(e.namespaces),s=Object.keys(t);let o=!0;return g(s,r)?(r.forEach((i=>{const{accounts:u,methods:p,events:m}=e.namespaces[i],f=h(u),a=t[i];(!g(R(i,a),f)||!g(a.methods,p)||!g(a.events,m))&&(o=!1)})),o):!1}function D(e){return l(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function $e(e){if(l(e,!1)&&e.includes(":")){const n=e.split(":");if(n.length===3){const t=n[0]+":"+n[1];return!!n[2]&&D(t)}}return!1}function Qn(e){if(l(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function Zn(e){var n;return(n=e?.proposer)==null?void 0:n.publicKey}function Xn(e){return e?.topic}function et(e,n){let t=null;return l(e?.publicKey,!1)||(t=y("MISSING_OR_INVALID",`${n} controller public key should be a string`)),t}function G(e){let n=!0;return T(e)?e.length&&(n=e.every((t=>l(t,!1)))):n=!1,n}function Me(e,n,t){let r=null;return T(n)?n.forEach((s=>{r||(!D(s)||!s.includes(e))&&(r=N("UNSUPPORTED_CHAINS",`${t}, chain ${s} should be a string and conform to "namespace:chainId" format`))})):r=N("UNSUPPORTED_CHAINS",`${t}, chains ${n} should be an array of strings conforming to "namespace:chainId" format`),r}function Ke(e,n){let t=null;return Object.entries(e).forEach((([r,s])=>{if(t)return;const o=Me(r,R(r,s),`${n} requiredNamespace`);o&&(t=o)})),t}function Fe(e,n){let t=null;return T(e)?e.forEach((r=>{t||$e(r)||(t=N("UNSUPPORTED_ACCOUNTS",`${n}, account ${r} should be a string and conform to "namespace:chainId:address" format`))})):t=N("UNSUPPORTED_ACCOUNTS",`${n}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function qe(e,n){let t=null;return Object.values(e).forEach((r=>{if(t)return;const s=Fe(r?.accounts,`${n} namespace`);s&&(t=s)})),t}function ke(e,n){let t=null;return G(e?.methods)?G(e?.events)||(t=N("UNSUPPORTED_EVENTS",`${n}, events should be an array of strings or empty array for no events`)):t=N("UNSUPPORTED_METHODS",`${n}, methods should be an array of strings or empty array for no methods`),t}function W(e,n){let t=null;return Object.values(e).forEach((r=>{if(t)return;const s=ke(r,`${n}, namespace`);s&&(t=s)})),t}function nt(e,n,t){let r=null;if(e&&Y(e)){const s=W(e,n);s&&(r=s);const o=Ke(e,n);o&&(r=o)}else r=y("MISSING_OR_INVALID",`${n}, ${t} should be an object with data`);return r}function Le(e,n){let t=null;if(e&&Y(e)){const r=W(e,n);r&&(t=r);const s=qe(e,n);s&&(t=s)}else t=y("MISSING_OR_INVALID",`${n}, namespaces should be an object with data`);return t}function xe(e){return l(e.protocol,!0)}function tt(e,n){let t=!1;return n&&!e?t=!0:e&&T(e)&&e.length&&e.forEach((r=>{t=xe(r)})),t}function rt(e){return typeof e=="number"}function st(e){return typeof e<"u"&&typeof e!==null}function ot(e){return!(!e||typeof e!="object"||!e.code||!w(e.code,!1)||!e.message||!l(e.message,!1))}function it(e){return!(E(e)||!l(e.method,!1))}function at(e){return!(E(e)||E(e.result)&&E(e.error)||!w(e.id,!1)||!l(e.jsonrpc,!1))}function ct(e){return!(E(e)||!l(e.name,!1))}function ut(e,n){return!(!D(n)||!we(e).includes(n))}function dt(e,n,t){return l(t,!1)?De(e,n).includes(t):!1}function lt(e,n,t){return l(t,!1)?je(e,n).includes(t):!1}function pt(e,n,t){let r=null;const s=ft(e),o=mt(n),i=Object.keys(s),u=Object.keys(o),p=He(Object.keys(e)),m=He(Object.keys(n)),f=p.filter((a=>!m.includes(a)));return f.length&&(r=y("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${f.toString()}\n      Received: ${Object.keys(n).toString()}`)),g(i,u)||(r=y("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.\n      Required: ${i.toString()}\n      Approved: ${u.toString()}`)),Object.keys(n).forEach((a=>{if(!a.includes(":")||r)return;const J=h(n[a].accounts);J.includes(a)||(r=y("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${a}\n        Required: ${a}\n        Approved: ${J.toString()}`))})),i.forEach((a=>{r||(g(s[a].methods,o[a].methods)?g(s[a].events,o[a].events)||(r=y("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${a}`)):r=y("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${a}`))})),r}function ft(e){const n={};return Object.keys(e).forEach((t=>{var r;t.includes(":")?n[t]=e[t]:(r=e[t].chains)==null||r.forEach((s=>{n[s]={methods:e[t].methods,events:e[t].events}}))})),n}function He(e){return[...new Set(e.map((n=>n.includes(":")?n.split(":")[0]:n)))]}function mt(e){const n={};return Object.keys(e).forEach((t=>{if(t.includes(":"))n[t]=e[t];else{const r=h(e[t].accounts);r?.forEach((s=>{n[s]={accounts:e[t].accounts.filter((o=>o.includes(`${s}:`))),methods:e[t].methods,events:e[t].events}}))}})),n}function yt(e,n){return w(e,!1)&&e<=n.max&&e>=n.min}exports.BASE10=K,exports.BASE16=d,exports.BASE64=_,exports.COLON=hn,exports.DEFAULT_DEPTH=x,exports.EMPTY_SPACE=V,exports.ENV_MAP=O,exports.ONE_THOUSAND=Nn,exports.REACT_NATIVE_PRODUCT=ge,exports.RELAYER_DEFAULT_PROTOCOL=Re,exports.SDK_TYPE=he,exports.SLASH=Ee,exports.TYPE_0=F,exports.TYPE_1=S,exports.UTF8=U,exports.appendToQueryString=Se,exports.assertType=An,exports.calcExpiry=$n,exports.capitalize=_n,exports.capitalizeWord=Pe,exports.createDelayedPromise=Un,exports.createExpiringPromise=Vn,exports.decodeTypeByte=A,exports.decrypt=pn,exports.deriveSymKey=cn,exports.deserialize=L,exports.encodeTypeByte=de,exports.encrypt=ln,exports.engineEvent=Kn,exports.enumify=Cn,exports.formatAccountId=re,exports.formatAccountWithChain=Qe,exports.formatChainId=te,exports.formatExpirerTarget=z,exports.formatIdTarget=Dn,exports.formatMessage=rn,exports.formatMessageContext=Tn,exports.formatRelayParams=Ve,exports.formatRelayRpcUrl=On,exports.formatTopicTarget=wn,exports.formatUA=Ae,exports.formatUri=zn,exports.generateKeyPair=on,exports.generateRandomBytes32=an,exports.getAccountsChains=h,exports.getAccountsFromNamespaces=Xe,exports.getAddressFromAccount=se,exports.getAddressesFromAccounts=Ze,exports.getAppMetadata=vn,exports.getChainFromAccount=oe,exports.getChainsFromAccounts=ie,exports.getChainsFromNamespace=R,exports.getChainsFromNamespaces=en,exports.getChainsFromRequiredNamespaces=nn,exports.getDidAddress=ce,exports.getDidAddressSegments=C,exports.getDidChainId=ae,exports.getEnvironment=B,exports.getHttpUrl=bn,exports.getInternalError=y,exports.getJavascriptID=be,exports.getJavascriptOS=Oe,exports.getLastItems=Ie,exports.getNamespacedDidChainId=tn,exports.getNamespacesChains=we,exports.getNamespacesEventsForChainId=je,exports.getNamespacesMethodsForChainId=De,exports.getRelayClientMetadata=Sn,exports.getRelayProtocolApi=qn,exports.getRelayProtocolName=Fn,exports.getRequiredNamespacesFromNamespaces=Yn,exports.getSdkError=N,exports.getUniqueValues=M,exports.hasOverlap=g,exports.hashKey=un,exports.hashMessage=dn,exports.isBrowser=ve,exports.isConformingNamespaces=pt,exports.isExpired=Mn,exports.isNode=H,exports.isProposalStruct=Zn,exports.isReactNative=Ne,exports.isSessionCompatible=Jn,exports.isSessionStruct=Xn,exports.isTypeOneEnvelope=mn,exports.isUndefined=E,exports.isValidAccountId=$e,exports.isValidAccounts=Fe,exports.isValidActions=ke,exports.isValidArray=T,exports.isValidChainId=D,exports.isValidChains=Me,exports.isValidController=et,exports.isValidErrorReason=ot,exports.isValidEvent=ct,exports.isValidId=rt,exports.isValidNamespaceAccounts=qe,exports.isValidNamespaceActions=W,exports.isValidNamespaceChains=Ke,exports.isValidNamespaceMethodsOrEvents=G,exports.isValidNamespaces=Le,exports.isValidNamespacesChainId=ut,exports.isValidNamespacesEvent=lt,exports.isValidNamespacesRequest=dt,exports.isValidNumber=w,exports.isValidObject=Y,exports.isValidParams=st,exports.isValidRelay=xe,exports.isValidRelays=tt,exports.isValidRequest=it,exports.isValidRequestExpiry=yt,exports.isValidRequiredNamespaces=nt,exports.isValidResponse=at,exports.isValidString=l,exports.isValidUrl=Qn,exports.mapEntries=Rn,exports.mapToObj=In,exports.objToMap=Pn,exports.parseAccountId=$,exports.parseChainId=ne,exports.parseContextNames=Te,exports.parseExpirerTarget=jn,exports.parseRelayParams=Ue,exports.parseUri=Bn,exports.serialize=le,exports.validateDecoding=fn,exports.validateEncoding=pe},9685:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";const strictUriEncode=__webpack_require__(73780);const decodeComponent=__webpack_require__(80680);const splitOnFirst=__webpack_require__(66347);const filterObject=__webpack_require__(99007);const isNullOrUndefined=value=>value===null||value===undefined;const encodeFragmentIdentifier=Symbol("encodeFragmentIdentifier");function encoderForArrayFormat(options){switch(options.arrayFormat){case"index":return key=>(result,value)=>{const index=result.length;if(value===undefined||options.skipNull&&value===null||options.skipEmptyString&&value===""){return result}if(value===null){return[...result,[encode(key,options),"[",index,"]"].join("")]}return[...result,[encode(key,options),"[",encode(index,options),"]=",encode(value,options)].join("")]};case"bracket":return key=>(result,value)=>{if(value===undefined||options.skipNull&&value===null||options.skipEmptyString&&value===""){return result}if(value===null){return[...result,[encode(key,options),"[]"].join("")]}return[...result,[encode(key,options),"[]=",encode(value,options)].join("")]};case"colon-list-separator":return key=>(result,value)=>{if(value===undefined||options.skipNull&&value===null||options.skipEmptyString&&value===""){return result}if(value===null){return[...result,[encode(key,options),":list="].join("")]}return[...result,[encode(key,options),":list=",encode(value,options)].join("")]};case"comma":case"separator":case"bracket-separator":{const keyValueSep=options.arrayFormat==="bracket-separator"?"[]=":"=";return key=>(result,value)=>{if(value===undefined||options.skipNull&&value===null||options.skipEmptyString&&value===""){return result}value=value===null?"":value;if(result.length===0){return[[encode(key,options),keyValueSep,encode(value,options)].join("")]}return[[result,encode(value,options)].join(options.arrayFormatSeparator)]}}default:return key=>(result,value)=>{if(value===undefined||options.skipNull&&value===null||options.skipEmptyString&&value===""){return result}if(value===null){return[...result,encode(key,options)]}return[...result,[encode(key,options),"=",encode(value,options)].join("")]}}}function parserForArrayFormat(options){let result;switch(options.arrayFormat){case"index":return(key,value,accumulator)=>{result=/\[(\d*)\]$/.exec(key);key=key.replace(/\[\d*\]$/,"");if(!result){accumulator[key]=value;return}if(accumulator[key]===undefined){accumulator[key]={}}accumulator[key][result[1]]=value};case"bracket":return(key,value,accumulator)=>{result=/(\[\])$/.exec(key);key=key.replace(/\[\]$/,"");if(!result){accumulator[key]=value;return}if(accumulator[key]===undefined){accumulator[key]=[value];return}accumulator[key]=[].concat(accumulator[key],value)};case"colon-list-separator":return(key,value,accumulator)=>{result=/(:list)$/.exec(key);key=key.replace(/:list$/,"");if(!result){accumulator[key]=value;return}if(accumulator[key]===undefined){accumulator[key]=[value];return}accumulator[key]=[].concat(accumulator[key],value)};case"comma":case"separator":return(key,value,accumulator)=>{const isArray=typeof value==="string"&&value.includes(options.arrayFormatSeparator);const isEncodedArray=typeof value==="string"&&!isArray&&decode(value,options).includes(options.arrayFormatSeparator);value=isEncodedArray?decode(value,options):value;const newValue=isArray||isEncodedArray?value.split(options.arrayFormatSeparator).map((item=>decode(item,options))):value===null?value:decode(value,options);accumulator[key]=newValue};case"bracket-separator":return(key,value,accumulator)=>{const isArray=/(\[\])$/.test(key);key=key.replace(/\[\]$/,"");if(!isArray){accumulator[key]=value?decode(value,options):value;return}const arrayValue=value===null?[]:value.split(options.arrayFormatSeparator).map((item=>decode(item,options)));if(accumulator[key]===undefined){accumulator[key]=arrayValue;return}accumulator[key]=[].concat(accumulator[key],arrayValue)};default:return(key,value,accumulator)=>{if(accumulator[key]===undefined){accumulator[key]=value;return}accumulator[key]=[].concat(accumulator[key],value)}}}function validateArrayFormatSeparator(value){if(typeof value!=="string"||value.length!==1){throw new TypeError("arrayFormatSeparator must be single character string")}}function encode(value,options){if(options.encode){return options.strict?strictUriEncode(value):encodeURIComponent(value)}return value}function decode(value,options){if(options.decode){return decodeComponent(value)}return value}function keysSorter(input){if(Array.isArray(input)){return input.sort()}if(typeof input==="object"){return keysSorter(Object.keys(input)).sort(((a,b)=>Number(a)-Number(b))).map((key=>input[key]))}return input}function removeHash(input){const hashStart=input.indexOf("#");if(hashStart!==-1){input=input.slice(0,hashStart)}return input}function getHash(url){let hash="";const hashStart=url.indexOf("#");if(hashStart!==-1){hash=url.slice(hashStart)}return hash}function extract(input){input=removeHash(input);const queryStart=input.indexOf("?");if(queryStart===-1){return""}return input.slice(queryStart+1)}function parseValue(value,options){if(options.parseNumbers&&!Number.isNaN(Number(value))&&(typeof value==="string"&&value.trim()!=="")){value=Number(value)}else if(options.parseBooleans&&value!==null&&(value.toLowerCase()==="true"||value.toLowerCase()==="false")){value=value.toLowerCase()==="true"}return value}function parse(query,options){options=Object.assign({decode:true,sort:true,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:false,parseBooleans:false},options);validateArrayFormatSeparator(options.arrayFormatSeparator);const formatter=parserForArrayFormat(options);const ret=Object.create(null);if(typeof query!=="string"){return ret}query=query.trim().replace(/^[?#&]/,"");if(!query){return ret}for(const param of query.split("&")){if(param===""){continue}let[key,value]=splitOnFirst(options.decode?param.replace(/\+/g," "):param,"=");value=value===undefined?null:["comma","separator","bracket-separator"].includes(options.arrayFormat)?value:decode(value,options);formatter(decode(key,options),value,ret)}for(const key of Object.keys(ret)){const value=ret[key];if(typeof value==="object"&&value!==null){for(const k of Object.keys(value)){value[k]=parseValue(value[k],options)}}else{ret[key]=parseValue(value,options)}}if(options.sort===false){return ret}return(options.sort===true?Object.keys(ret).sort():Object.keys(ret).sort(options.sort)).reduce(((result,key)=>{const value=ret[key];if(Boolean(value)&&typeof value==="object"&&!Array.isArray(value)){result[key]=keysSorter(value)}else{result[key]=value}return result}),Object.create(null))}exports.extract=extract;exports.parse=parse;exports.stringify=(object,options)=>{if(!object){return""}options=Object.assign({encode:true,strict:true,arrayFormat:"none",arrayFormatSeparator:","},options);validateArrayFormatSeparator(options.arrayFormatSeparator);const shouldFilter=key=>options.skipNull&&isNullOrUndefined(object[key])||options.skipEmptyString&&object[key]==="";const formatter=encoderForArrayFormat(options);const objectCopy={};for(const key of Object.keys(object)){if(!shouldFilter(key)){objectCopy[key]=object[key]}}const keys=Object.keys(objectCopy);if(options.sort!==false){keys.sort(options.sort)}return keys.map((key=>{const value=object[key];if(value===undefined){return""}if(value===null){return encode(key,options)}if(Array.isArray(value)){if(value.length===0&&options.arrayFormat==="bracket-separator"){return encode(key,options)+"[]"}return value.reduce(formatter(key),[]).join("&")}return encode(key,options)+"="+encode(value,options)})).filter((x=>x.length>0)).join("&")};exports.parseUrl=(url,options)=>{options=Object.assign({decode:true},options);const[url_,hash]=splitOnFirst(url,"#");return Object.assign({url:url_.split("?")[0]||"",query:parse(extract(url),options)},options&&options.parseFragmentIdentifier&&hash?{fragmentIdentifier:decode(hash,options)}:{})};exports.stringifyUrl=(object,options)=>{options=Object.assign({encode:true,strict:true,[encodeFragmentIdentifier]:true},options);const url=removeHash(object.url).split("?")[0]||"";const queryFromUrl=exports.extract(object.url);const parsedQueryFromUrl=exports.parse(queryFromUrl,{sort:false});const query=Object.assign(parsedQueryFromUrl,object.query);let queryString=exports.stringify(query,options);if(queryString){queryString=`?${queryString}`}let hash=getHash(object.url);if(object.fragmentIdentifier){hash=`#${options[encodeFragmentIdentifier]?encode(object.fragmentIdentifier,options):object.fragmentIdentifier}`}return`${url}${queryString}${hash}`};exports.pick=(input,filter,options)=>{options=Object.assign({parseFragmentIdentifier:true,[encodeFragmentIdentifier]:false},options);const{url,query,fragmentIdentifier}=exports.parseUrl(input,options);return exports.stringifyUrl({url,query:filterObject(query,filter),fragmentIdentifier},options)};exports.exclude=(input,filter,options)=>{const exclusionFilter=Array.isArray(filter)?key=>!filter.includes(key):(key,value)=>!filter(key,value);return exports.pick(input,exclusionFilter,options)}},35214:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{compare:()=>compare,concat:()=>concat,equals:()=>equals,fromString:()=>fromString,toString:()=>to_string_toString,xor:()=>xor});function compare(a,b){for(let i=0;i<a.byteLength;i++){if(a[i]<b[i]){return-1}if(a[i]>b[i]){return 1}}if(a.byteLength>b.byteLength){return 1}if(a.byteLength<b.byteLength){return-1}return 0}function as_uint8array_asUint8Array(buf){if(globalThis.Buffer!=null){return new Uint8Array(buf.buffer,buf.byteOffset,buf.byteLength)}return buf}function alloc(size=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return asUint8Array(globalThis.Buffer.alloc(size))}return new Uint8Array(size)}function allocUnsafe(size=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return as_uint8array_asUint8Array(globalThis.Buffer.allocUnsafe(size))}return new Uint8Array(size)}function concat(arrays,length){if(!length){length=arrays.reduce(((acc,curr)=>acc+curr.length),0)}const output=allocUnsafe(length);let offset=0;for(const arr of arrays){output.set(arr,offset);offset+=arr.length}return as_uint8array_asUint8Array(output)}function equals(a,b){if(a===b){return true}if(a.byteLength!==b.byteLength){return false}for(let i=0;i<a.byteLength;i++){if(a[i]!==b[i]){return false}}return true}var basics=__webpack_require__(72533);function createCodec(name,prefix,encode,decode){return{name,prefix,encoder:{name,prefix,encode},decoder:{decode}}}const string=createCodec("utf8","u",(buf=>{const decoder=new TextDecoder("utf8");return"u"+decoder.decode(buf)}),(str=>{const encoder=new TextEncoder;return encoder.encode(str.substring(1))}));const ascii=createCodec("ascii","a",(buf=>{let string="a";for(let i=0;i<buf.length;i++){string+=String.fromCharCode(buf[i])}return string}),(str=>{str=str.substring(1);const buf=allocUnsafe(str.length);for(let i=0;i<str.length;i++){buf[i]=str.charCodeAt(i)}return buf}));const BASES={utf8:string,"utf-8":string,hex:basics.gh.base16,latin1:ascii,ascii,binary:ascii,...basics.gh};const bases=BASES;function fromString(string,encoding="utf8"){const base=bases[encoding];if(!base){throw new Error(`Unsupported encoding "${encoding}"`)}if((encoding==="utf8"||encoding==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return as_uint8array_asUint8Array(globalThis.Buffer.from(string,"utf-8"))}return base.decoder.decode(`${base.prefix}${string}`)}function to_string_toString(array,encoding="utf8"){const base=bases[encoding];if(!base){throw new Error(`Unsupported encoding "${encoding}"`)}if((encoding==="utf8"||encoding==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(array.buffer,array.byteOffset,array.byteLength).toString("utf8")}return base.encoder.encode(array).substring(1)}function xor(a,b){if(a.length!==b.length){throw new Error("Inputs should have the same length")}const result=allocUnsafe(a.length);for(let i=0;i<a.length;i++){result[i]=a[i]^b[i]}return as_uint8array_asUint8Array(result)}},45893:(module,exports,__webpack_require__)=>{module=__webpack_require__.nmd(module);var LARGE_ARRAY_SIZE=200;var HASH_UNDEFINED="__lodash_hash_undefined__";var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;var MAX_SAFE_INTEGER=9007199254740991;var argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",nullTag="[object Null]",objectTag="[object Object]",promiseTag="[object Promise]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",undefinedTag="[object Undefined]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsUint=/^(?:0|[1-9]\d*)$/;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var freeExports=true&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&"object"=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value}}return result}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}function baseUnary(func){return function(value){return func(value)}}function cacheHas(cache,key){return cache.has(key)}function getValue(object,key){return object==null?undefined:object[key]}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach((function(value,key){result[++index]=[key,value]}));return result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function setToArray(set){var index=-1,result=Array(set.size);set.forEach((function(value){result[++index]=value}));return result}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root["__core-js_shared__"];var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();var nativeObjectToString=objectProto.toString;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Buffer=moduleExports?root.Buffer:undefined,Symbol=root.Symbol,Uint8Array=root.Uint8Array,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,symToStringTag=Symbol?Symbol.toStringTag:undefined;var nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeKeys=overArg(Object.keys,Object);var DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create");var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined;function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[];this.size=0}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache;while(++index<length){this.add(values[index])}}function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED);return this}function setCacheHas(value){return this.__data__.has(value)}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function stackClear(){this.__data__=new ListCache;this.size=0}function stackDelete(key){var data=this.__data__,result=data["delete"](key);this.size=data.size;return result}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache(pairs)}data.set(key,value);this.size=data.size;return this}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length)))){result.push(key)}}return result}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other){return true}if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag;othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other)){return false}objIsArr=true;objIsObj=false}if(isSameTag&&!objIsObj){stack||(stack=new Stack);return objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack)}if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack);return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag){return false}stack||(stack=new Stack);return equalObjects(object,other,bitmask,customizer,equalFunc,stack)}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!="constructor"){result.push(key)}}return result}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false}var stacked=stack.get(array);if(stacked&&stack.get(other)){return stacked==other}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)}if(compared!==undefined){if(compared){continue}result=false;break}if(seen){if(!arraySome(other,(function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex)}}))){result=false;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break}}stack["delete"](array);stack["delete"](other);return result}function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false}object=object.buffer;other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false}return true;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false}var stacked=stack.get(object);if(stacked){return stacked==other}bitmask|=COMPARE_UNORDERED_FLAG;stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack["delete"](object);return result;case symbolTag:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other)}}return false}function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key))){return false}}var stacked=stack.get(object);if(stacked&&stack.get(other)){return stacked==other}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break}skipCtor||(skipCtor=key=="constructor")}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&("constructor"in object&&"constructor"in other)&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){result=false}}stack["delete"](object);stack["delete"](other);return result}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}var getSymbols=!nativeGetSymbols?stubArray:function(object){if(object==null){return[]}object=Object(object);return arrayFilter(nativeGetSymbols(object),(function(symbol){return propertyIsEnumerable.call(object,symbol)}))};var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag){getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}}return result}}function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=="number"||reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}function objectToString(value){return nativeObjectToString.call(value)}function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function eq(value,other){return value===other||value!==value&&other!==other}var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};var isArray=Array.isArray;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}var isBuffer=nativeIsBuffer||stubFalse;function isEqual(value,other){return baseIsEqual(value,other)}function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}function isObjectLike(value){return value!=null&&typeof value=="object"}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function stubArray(){return[]}function stubFalse(){return false}module.exports=isEqual},72533:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{gh:()=>bases});var identity_namespaceObject={};__webpack_require__.r(identity_namespaceObject);__webpack_require__.d(identity_namespaceObject,{identity:()=>identity});var base2_namespaceObject={};__webpack_require__.r(base2_namespaceObject);__webpack_require__.d(base2_namespaceObject,{base2:()=>base2});var base8_namespaceObject={};__webpack_require__.r(base8_namespaceObject);__webpack_require__.d(base8_namespaceObject,{base8:()=>base8});var base10_namespaceObject={};__webpack_require__.r(base10_namespaceObject);__webpack_require__.d(base10_namespaceObject,{base10:()=>base10});var base16_namespaceObject={};__webpack_require__.r(base16_namespaceObject);__webpack_require__.d(base16_namespaceObject,{base16:()=>base16,base16upper:()=>base16upper});var base32_namespaceObject={};__webpack_require__.r(base32_namespaceObject);__webpack_require__.d(base32_namespaceObject,{base32:()=>base32_base32,base32hex:()=>base32hex,base32hexpad:()=>base32hexpad,base32hexpadupper:()=>base32hexpadupper,base32hexupper:()=>base32hexupper,base32pad:()=>base32pad,base32padupper:()=>base32padupper,base32upper:()=>base32upper,base32z:()=>base32z});var base36_namespaceObject={};__webpack_require__.r(base36_namespaceObject);__webpack_require__.d(base36_namespaceObject,{base36:()=>base36,base36upper:()=>base36upper});var base58_namespaceObject={};__webpack_require__.r(base58_namespaceObject);__webpack_require__.d(base58_namespaceObject,{base58btc:()=>base58_base58btc,base58flickr:()=>base58flickr});var base64_namespaceObject={};__webpack_require__.r(base64_namespaceObject);__webpack_require__.d(base64_namespaceObject,{base64:()=>base64,base64pad:()=>base64pad,base64url:()=>base64url,base64urlpad:()=>base64urlpad});var sha2_browser_namespaceObject={};__webpack_require__.r(sha2_browser_namespaceObject);__webpack_require__.d(sha2_browser_namespaceObject,{sha256:()=>sha256,sha512:()=>sha512});var hashes_identity_namespaceObject={};__webpack_require__.r(hashes_identity_namespaceObject);__webpack_require__.d(hashes_identity_namespaceObject,{identity:()=>identity_identity});var raw_namespaceObject={};__webpack_require__.r(raw_namespaceObject);__webpack_require__.d(raw_namespaceObject,{code:()=>code,decode:()=>raw_decode,encode:()=>raw_encode,name:()=>raw_name});var json_namespaceObject={};__webpack_require__.r(json_namespaceObject);__webpack_require__.d(json_namespaceObject,{code:()=>json_code,decode:()=>json_decode,encode:()=>json_encode,name:()=>json_name});function base(ALPHABET,name){if(ALPHABET.length>=255){throw new TypeError("Alphabet too long")}var BASE_MAP=new Uint8Array(256);for(var j=0;j<BASE_MAP.length;j++){BASE_MAP[j]=255}for(var i=0;i<ALPHABET.length;i++){var x=ALPHABET.charAt(i);var xc=x.charCodeAt(0);if(BASE_MAP[xc]!==255){throw new TypeError(x+" is ambiguous")}BASE_MAP[xc]=i}var BASE=ALPHABET.length;var LEADER=ALPHABET.charAt(0);var FACTOR=Math.log(BASE)/Math.log(256);var iFACTOR=Math.log(256)/Math.log(BASE);function encode(source){if(source instanceof Uint8Array);else if(ArrayBuffer.isView(source)){source=new Uint8Array(source.buffer,source.byteOffset,source.byteLength)}else if(Array.isArray(source)){source=Uint8Array.from(source)}if(!(source instanceof Uint8Array)){throw new TypeError("Expected Uint8Array")}if(source.length===0){return""}var zeroes=0;var length=0;var pbegin=0;var pend=source.length;while(pbegin!==pend&&source[pbegin]===0){pbegin++;zeroes++}var size=(pend-pbegin)*iFACTOR+1>>>0;var b58=new Uint8Array(size);while(pbegin!==pend){var carry=source[pbegin];var i=0;for(var it1=size-1;(carry!==0||i<length)&&it1!==-1;it1--,i++){carry+=256*b58[it1]>>>0;b58[it1]=carry%BASE>>>0;carry=carry/BASE>>>0}if(carry!==0){throw new Error("Non-zero carry")}length=i;pbegin++}var it2=size-length;while(it2!==size&&b58[it2]===0){it2++}var str=LEADER.repeat(zeroes);for(;it2<size;++it2){str+=ALPHABET.charAt(b58[it2])}return str}function decodeUnsafe(source){if(typeof source!=="string"){throw new TypeError("Expected String")}if(source.length===0){return new Uint8Array}var psz=0;if(source[psz]===" "){return}var zeroes=0;var length=0;while(source[psz]===LEADER){zeroes++;psz++}var size=(source.length-psz)*FACTOR+1>>>0;var b256=new Uint8Array(size);while(source[psz]){var carry=BASE_MAP[source.charCodeAt(psz)];if(carry===255){return}var i=0;for(var it3=size-1;(carry!==0||i<length)&&it3!==-1;it3--,i++){carry+=BASE*b256[it3]>>>0;b256[it3]=carry%256>>>0;carry=carry/256>>>0}if(carry!==0){throw new Error("Non-zero carry")}length=i;psz++}if(source[psz]===" "){return}var it4=size-length;while(it4!==size&&b256[it4]===0){it4++}var vch=new Uint8Array(zeroes+(size-it4));var j=zeroes;while(it4!==size){vch[j++]=b256[it4++]}return vch}function decode(string){var buffer=decodeUnsafe(string);if(buffer){return buffer}throw new Error(`Non-${name} character`)}return{encode,decodeUnsafe,decode}}var src=base;var _brrp__multiformats_scope_baseX=src;const base_x=_brrp__multiformats_scope_baseX;const empty=new Uint8Array(0);const toHex=d=>d.reduce(((hex,byte)=>hex+byte.toString(16).padStart(2,"0")),"");const fromHex=hex=>{const hexes=hex.match(/../g);return hexes?new Uint8Array(hexes.map((b=>parseInt(b,16)))):empty};const equals=(aa,bb)=>{if(aa===bb)return true;if(aa.byteLength!==bb.byteLength){return false}for(let ii=0;ii<aa.byteLength;ii++){if(aa[ii]!==bb[ii]){return false}}return true};const bytes_coerce=o=>{if(o instanceof Uint8Array&&o.constructor.name==="Uint8Array")return o;if(o instanceof ArrayBuffer)return new Uint8Array(o);if(ArrayBuffer.isView(o)){return new Uint8Array(o.buffer,o.byteOffset,o.byteLength)}throw new Error("Unknown type, must be binary type")};const isBinary=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o);const fromString=str=>(new TextEncoder).encode(str);const bytes_toString=b=>(new TextDecoder).decode(b);class Encoder{constructor(name,prefix,baseEncode){this.name=name;this.prefix=prefix;this.baseEncode=baseEncode}encode(bytes){if(bytes instanceof Uint8Array){return`${this.prefix}${this.baseEncode(bytes)}`}else{throw Error("Unknown type, must be binary type")}}}class Decoder{constructor(name,prefix,baseDecode){this.name=name;this.prefix=prefix;this.baseDecode=baseDecode}decode(text){if(typeof text==="string"){switch(text[0]){case this.prefix:{return this.baseDecode(text.slice(1))}default:{throw Error(`Unable to decode multibase string ${JSON.stringify(text)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}}}else{throw Error("Can only multibase decode strings")}}or(decoder){const decoders={[this.prefix]:this,...decoder.decoders||{[decoder.prefix]:decoder}};return new ComposedDecoder(decoders)}}class ComposedDecoder{constructor(decoders){this.decoders=decoders}or(decoder){const other=decoder.decoders||{[decoder.prefix]:decoder};return new ComposedDecoder({...this.decoders,...other})}decode(input){const prefix=input[0];const decoder=this.decoders[prefix];if(decoder){return decoder.decode(input)}else{throw RangeError(`Unable to decode multibase string ${JSON.stringify(input)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}}class Codec{constructor(name,prefix,baseEncode,baseDecode){this.name=name;this.prefix=prefix;this.baseEncode=baseEncode;this.baseDecode=baseDecode;this.encoder=new Encoder(name,prefix,baseEncode);this.decoder=new Decoder(name,prefix,baseDecode)}encode(input){return this.encoder.encode(input)}decode(input){return this.decoder.decode(input)}}const from=({name,prefix,encode,decode})=>new Codec(name,prefix,encode,decode);const baseX=({prefix,name,alphabet})=>{const{encode,decode}=base_x(alphabet,name);return from({prefix,name,encode,decode:text=>bytes_coerce(decode(text))})};const decode=(string,alphabet,bitsPerChar,name)=>{const codes={};for(let i=0;i<alphabet.length;++i){codes[alphabet[i]]=i}let end=string.length;while(string[end-1]==="="){--end}const out=new Uint8Array(end*bitsPerChar/8|0);let bits=0;let buffer=0;let written=0;for(let i=0;i<end;++i){const value=codes[string[i]];if(value===undefined){throw new SyntaxError(`Non-${name} character`)}buffer=buffer<<bitsPerChar|value;bits+=bitsPerChar;if(bits>=8){bits-=8;out[written++]=255&buffer>>bits}}if(bits>=bitsPerChar||255&buffer<<8-bits){throw new SyntaxError("Unexpected end of data")}return out};const encode=(data,alphabet,bitsPerChar)=>{const pad=alphabet[alphabet.length-1]==="=";const mask=(1<<bitsPerChar)-1;let out="";let bits=0;let buffer=0;for(let i=0;i<data.length;++i){buffer=buffer<<8|data[i];bits+=8;while(bits>bitsPerChar){bits-=bitsPerChar;out+=alphabet[mask&buffer>>bits]}}if(bits){out+=alphabet[mask&buffer<<bitsPerChar-bits]}if(pad){while(out.length*bitsPerChar&7){out+="="}}return out};const rfc4648=({name,prefix,bitsPerChar,alphabet})=>from({prefix,name,encode(input){return encode(input,alphabet,bitsPerChar)},decode(input){return decode(input,alphabet,bitsPerChar,name)}});const identity=from({prefix:"\0",name:"identity",encode:buf=>bytes_toString(buf),decode:str=>fromString(str)});const base2=rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});const base8=rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});const base10=baseX({prefix:"9",name:"base10",alphabet:"0123456789"});const base16=rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4});const base16upper=rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});const base32_base32=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});const base32upper=rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});const base32pad=rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});const base32padupper=rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});const base32hex=rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});const base32hexupper=rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});const base32hexpad=rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});const base32hexpadupper=rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const base32z=rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const base36=baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});const base36upper=baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});const base58_base58btc=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});const base58flickr=baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const base64=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});const base64pad=rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const base64url=rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});const base64urlpad=rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var encode_1=varint_encode;var MSB=128,REST=127,MSBALL=~REST,INT=Math.pow(2,31);function varint_encode(num,out,offset){out=out||[];offset=offset||0;var oldOffset=offset;while(num>=INT){out[offset++]=num&255|MSB;num/=128}while(num&MSBALL){out[offset++]=num&255|MSB;num>>>=7}out[offset]=num|0;varint_encode.bytes=offset-oldOffset+1;return out}var varint_decode=read;var MSB$1=128,REST$1=127;function read(buf,offset){var res=0,offset=offset||0,shift=0,counter=offset,b,l=buf.length;do{if(counter>=l){read.bytes=0;throw new RangeError("Could not decode varint")}b=buf[counter++];res+=shift<28?(b&REST$1)<<shift:(b&REST$1)*Math.pow(2,shift);shift+=7}while(b>=MSB$1);read.bytes=counter-offset;return res}var N1=Math.pow(2,7);var N2=Math.pow(2,14);var N3=Math.pow(2,21);var N4=Math.pow(2,28);var N5=Math.pow(2,35);var N6=Math.pow(2,42);var N7=Math.pow(2,49);var N8=Math.pow(2,56);var N9=Math.pow(2,63);var varint_length=function(value){return value<N1?1:value<N2?2:value<N3?3:value<N4?4:value<N5?5:value<N6?6:value<N7?7:value<N8?8:value<N9?9:10};var varint_varint={encode:encode_1,decode:varint_decode,encodingLength:varint_length};var _brrp_varint=varint_varint;const vendor_varint=_brrp_varint;const src_varint_decode=data=>{const code=varint.decode(data);return[code,varint.decode.bytes]};const encodeTo=(int,target,offset=0)=>{vendor_varint.encode(int,target,offset);return target};const encodingLength=int=>vendor_varint.encodingLength(int);const create=(code,digest)=>{const size=digest.byteLength;const sizeOffset=encodingLength(code);const digestOffset=sizeOffset+encodingLength(size);const bytes=new Uint8Array(digestOffset+size);encodeTo(code,bytes,0);encodeTo(size,bytes,sizeOffset);bytes.set(digest,digestOffset);return new digest_Digest(code,size,digest,bytes)};const digest_decode=multihash=>{const bytes=coerce(multihash);const[code,sizeOffset]=varint.decode(bytes);const[size,digestOffset]=varint.decode(bytes.subarray(sizeOffset));const digest=bytes.subarray(sizeOffset+digestOffset);if(digest.byteLength!==size){throw new Error("Incorrect length")}return new digest_Digest(code,size,digest,bytes)};const digest_equals=(a,b)=>{if(a===b){return true}else{return a.code===b.code&&a.size===b.size&&equalBytes(a.bytes,b.bytes)}};class digest_Digest{constructor(code,size,digest,bytes){this.code=code;this.size=size;this.digest=digest;this.bytes=bytes}}const hasher_from=({name,code,encode})=>new Hasher(name,code,encode);class Hasher{constructor(name,code,encode){this.name=name;this.code=code;this.encode=encode}async digest(input){if(input instanceof Uint8Array){const digest=await this.encode(input);return create(this.code,digest)}else{throw Error("Unknown type, must be binary type")}}}const sha=name=>async data=>new Uint8Array(await crypto.subtle.digest(name,data));const sha256=hasher_from({name:"sha2-256",code:18,encode:sha("SHA-256")});const sha512=hasher_from({name:"sha2-512",code:19,encode:sha("SHA-512")});const identity_identity=hasher_from({name:"identity",code:0,encode:input=>bytes_coerce(input)});const raw_name="raw";const code=85;const raw_encode=node=>bytes_coerce(node);const raw_decode=data=>bytes_coerce(data);const textEncoder=new TextEncoder;const textDecoder=new TextDecoder;const json_name="json";const json_code=512;const json_encode=node=>textEncoder.encode(JSON.stringify(node));const json_decode=data=>JSON.parse(textDecoder.decode(data));class CID{constructor(version,code,multihash,bytes){this.code=code;this.version=version;this.multihash=multihash;this.bytes=bytes;this.byteOffset=bytes.byteOffset;this.byteLength=bytes.byteLength;this.asCID=this;this._baseCache=new Map;Object.defineProperties(this,{byteOffset:cid_hidden,byteLength:cid_hidden,code:readonly,version:readonly,multihash:readonly,bytes:readonly,_baseCache:cid_hidden,asCID:cid_hidden})}toV0(){switch(this.version){case 0:{return this}default:{const{code,multihash}=this;if(code!==DAG_PB_CODE){throw new Error("Cannot convert a non dag-pb CID to CIDv0")}if(multihash.code!==SHA_256_CODE){throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0")}return CID.createV0(multihash)}}}toV1(){switch(this.version){case 0:{const{code,digest}=this.multihash;const multihash=Digest.create(code,digest);return CID.createV1(this.code,multihash)}case 1:{return this}default:{throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}}equals(other){return other&&this.code===other.code&&this.version===other.version&&Digest.equals(this.multihash,other.multihash)}toString(base){const{bytes,version,_baseCache}=this;switch(version){case 0:return toStringV0(bytes,_baseCache,base||base58btc.encoder);default:return toStringV1(bytes,_baseCache,base||base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(value){deprecate(/^0\.0/,IS_CID_DEPRECATION);return!!(value&&(value[cidSymbol]||value.asCID===value))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(value){if(value instanceof CID){return value}else if(value!=null&&value.asCID===value){const{version,code,multihash,bytes}=value;return new CID(version,code,multihash,bytes||encodeCID(version,code,multihash.bytes))}else if(value!=null&&value[cidSymbol]===true){const{version,multihash,code}=value;const digest=Digest.decode(multihash);return CID.create(version,code,digest)}else{return null}}static create(version,code,digest){if(typeof code!=="number"){throw new Error("String codecs are no longer supported")}switch(version){case 0:{if(code!==DAG_PB_CODE){throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`)}else{return new CID(version,code,digest,digest.bytes)}}case 1:{const bytes=encodeCID(version,code,digest.bytes);return new CID(version,code,digest,bytes)}default:{throw new Error("Invalid version")}}}static createV0(digest){return CID.create(0,DAG_PB_CODE,digest)}static createV1(code,digest){return CID.create(1,code,digest)}static decode(bytes){const[cid,remainder]=CID.decodeFirst(bytes);if(remainder.length){throw new Error("Incorrect length")}return cid}static decodeFirst(bytes){const specs=CID.inspectBytes(bytes);const prefixSize=specs.size-specs.multihashSize;const multihashBytes=coerce(bytes.subarray(prefixSize,prefixSize+specs.multihashSize));if(multihashBytes.byteLength!==specs.multihashSize){throw new Error("Incorrect length")}const digestBytes=multihashBytes.subarray(specs.multihashSize-specs.digestSize);const digest=new Digest.Digest(specs.multihashCode,specs.digestSize,digestBytes,multihashBytes);const cid=specs.version===0?CID.createV0(digest):CID.createV1(specs.codec,digest);return[cid,bytes.subarray(specs.size)]}static inspectBytes(initialBytes){let offset=0;const next=()=>{const[i,length]=varint.decode(initialBytes.subarray(offset));offset+=length;return i};let version=next();let codec=DAG_PB_CODE;if(version===18){version=0;offset=0}else if(version===1){codec=next()}if(version!==0&&version!==1){throw new RangeError(`Invalid CID version ${version}`)}const prefixSize=offset;const multihashCode=next();const digestSize=next();const size=offset+digestSize;const multihashSize=size-prefixSize;return{version,codec,multihashCode,digestSize,multihashSize,size}}static parse(source,base){const[prefix,bytes]=parseCIDtoBytes(source,base);const cid=CID.decode(bytes);cid._baseCache.set(prefix,source);return cid}}const parseCIDtoBytes=(source,base)=>{switch(source[0]){case"Q":{const decoder=base||base58btc;return[base58btc.prefix,decoder.decode(`${base58btc.prefix}${source}`)]}case base58btc.prefix:{const decoder=base||base58btc;return[base58btc.prefix,decoder.decode(source)]}case base32.prefix:{const decoder=base||base32;return[base32.prefix,decoder.decode(source)]}default:{if(base==null){throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided")}return[source[0],base.decode(source)]}}};const toStringV0=(bytes,cache,base)=>{const{prefix}=base;if(prefix!==base58btc.prefix){throw Error(`Cannot string encode V0 in ${base.name} encoding`)}const cid=cache.get(prefix);if(cid==null){const cid=base.encode(bytes).slice(1);cache.set(prefix,cid);return cid}else{return cid}};const toStringV1=(bytes,cache,base)=>{const{prefix}=base;const cid=cache.get(prefix);if(cid==null){const cid=base.encode(bytes);cache.set(prefix,cid);return cid}else{return cid}};const DAG_PB_CODE=112;const SHA_256_CODE=18;const encodeCID=(version,code,multihash)=>{const codeOffset=varint.encodingLength(version);const hashOffset=codeOffset+varint.encodingLength(code);const bytes=new Uint8Array(hashOffset+multihash.byteLength);varint.encodeTo(version,bytes,0);varint.encodeTo(code,bytes,codeOffset);bytes.set(multihash,hashOffset);return bytes};const cidSymbol=Symbol.for("@ipld/js-cid/CID");const readonly={writable:false,configurable:false,enumerable:true};const cid_hidden={writable:false,enumerable:false,configurable:false};const version="0.0.0-dev";const deprecate=(range,message)=>{if(range.test(version)){console.warn(message)}else{throw new Error(message)}};const IS_CID_DEPRECATION=null&&`CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n`;const bases={...identity_namespaceObject,...base2_namespaceObject,...base8_namespaceObject,...base10_namespaceObject,...base16_namespaceObject,...base32_namespaceObject,...base36_namespaceObject,...base58_namespaceObject,...base64_namespaceObject};const hashes={...sha2_browser_namespaceObject,...hashes_identity_namespaceObject};const codecs={raw:raw_namespaceObject,json:json_namespaceObject}},51376:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const format=__webpack_require__(94440);module.exports=pino;const _console=pfGlobalThisOrFallback().console||{};const stdSerializers={mapHttpRequest:mock,mapHttpResponse:mock,wrapRequestSerializer:passthrough,wrapResponseSerializer:passthrough,wrapErrorSerializer:passthrough,req:mock,res:mock,err:asErrValue};function shouldSerialize(serialize,serializers){if(Array.isArray(serialize)){const hasToFilter=serialize.filter((function(k){return k!=="!stdSerializers.err"}));return hasToFilter}else if(serialize===true){return Object.keys(serializers)}return false}function pino(opts){opts=opts||{};opts.browser=opts.browser||{};const transmit=opts.browser.transmit;if(transmit&&typeof transmit.send!=="function"){throw Error("pino: transmit option must have a send function")}const proto=opts.browser.write||_console;if(opts.browser.write)opts.browser.asObject=true;const serializers=opts.serializers||{};const serialize=shouldSerialize(opts.browser.serialize,serializers);let stdErrSerialize=opts.browser.serialize;if(Array.isArray(opts.browser.serialize)&&opts.browser.serialize.indexOf("!stdSerializers.err")>-1)stdErrSerialize=false;const levels=["error","fatal","warn","info","debug","trace"];if(typeof proto==="function"){proto.error=proto.fatal=proto.warn=proto.info=proto.debug=proto.trace=proto}if(opts.enabled===false)opts.level="silent";const level=opts.level||"info";const logger=Object.create(proto);if(!logger.log)logger.log=noop;Object.defineProperty(logger,"levelVal",{get:getLevelVal});Object.defineProperty(logger,"level",{get:getLevel,set:setLevel});const setOpts={transmit,serialize,asObject:opts.browser.asObject,levels,timestamp:getTimeFunction(opts)};logger.levels=pino.levels;logger.level=level;logger.setMaxListeners=logger.getMaxListeners=logger.emit=logger.addListener=logger.on=logger.prependListener=logger.once=logger.prependOnceListener=logger.removeListener=logger.removeAllListeners=logger.listeners=logger.listenerCount=logger.eventNames=logger.write=logger.flush=noop;logger.serializers=serializers;logger._serialize=serialize;logger._stdErrSerialize=stdErrSerialize;logger.child=child;if(transmit)logger._logEvent=createLogEventShape();function getLevelVal(){return this.level==="silent"?Infinity:this.levels.values[this.level]}function getLevel(){return this._level}function setLevel(level){if(level!=="silent"&&!this.levels.values[level]){throw Error("unknown level "+level)}this._level=level;set(setOpts,logger,"error","log");set(setOpts,logger,"fatal","error");set(setOpts,logger,"warn","error");set(setOpts,logger,"info","log");set(setOpts,logger,"debug","log");set(setOpts,logger,"trace","log")}function child(bindings,childOptions){if(!bindings){throw new Error("missing bindings for child Pino")}childOptions=childOptions||{};if(serialize&&bindings.serializers){childOptions.serializers=bindings.serializers}const childOptionsSerializers=childOptions.serializers;if(serialize&&childOptionsSerializers){var childSerializers=Object.assign({},serializers,childOptionsSerializers);var childSerialize=opts.browser.serialize===true?Object.keys(childSerializers):serialize;delete bindings.serializers;applySerializers([bindings],childSerialize,childSerializers,this._stdErrSerialize)}function Child(parent){this._childLevel=(parent._childLevel|0)+1;this.error=bind(parent,bindings,"error");this.fatal=bind(parent,bindings,"fatal");this.warn=bind(parent,bindings,"warn");this.info=bind(parent,bindings,"info");this.debug=bind(parent,bindings,"debug");this.trace=bind(parent,bindings,"trace");if(childSerializers){this.serializers=childSerializers;this._serialize=childSerialize}if(transmit){this._logEvent=createLogEventShape([].concat(parent._logEvent.bindings,bindings))}}Child.prototype=this;return new Child(this)}return logger}pino.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};pino.stdSerializers=stdSerializers;pino.stdTimeFunctions=Object.assign({},{nullTime,epochTime,unixTime,isoTime});function set(opts,logger,level,fallback){const proto=Object.getPrototypeOf(logger);logger[level]=logger.levelVal>logger.levels.values[level]?noop:proto[level]?proto[level]:_console[level]||_console[fallback]||noop;wrap(opts,logger,level)}function wrap(opts,logger,level){if(!opts.transmit&&logger[level]===noop)return;logger[level]=function(write){return function LOG(){const ts=opts.timestamp();const args=new Array(arguments.length);const proto=Object.getPrototypeOf&&Object.getPrototypeOf(this)===_console?_console:this;for(var i=0;i<args.length;i++)args[i]=arguments[i];if(opts.serialize&&!opts.asObject){applySerializers(args,this._serialize,this.serializers,this._stdErrSerialize)}if(opts.asObject)write.call(proto,asObject(this,level,args,ts));else write.apply(proto,args);if(opts.transmit){const transmitLevel=opts.transmit.level||logger.level;const transmitValue=pino.levels.values[transmitLevel];const methodValue=pino.levels.values[level];if(methodValue<transmitValue)return;transmit(this,{ts,methodLevel:level,methodValue,transmitLevel,transmitValue:pino.levels.values[opts.transmit.level||logger.level],send:opts.transmit.send,val:logger.levelVal},args)}}}(logger[level])}function asObject(logger,level,args,ts){if(logger._serialize)applySerializers(args,logger._serialize,logger.serializers,logger._stdErrSerialize);const argsCloned=args.slice();let msg=argsCloned[0];const o={};if(ts){o.time=ts}o.level=pino.levels.values[level];let lvl=(logger._childLevel|0)+1;if(lvl<1)lvl=1;if(msg!==null&&typeof msg==="object"){while(lvl--&&typeof argsCloned[0]==="object"){Object.assign(o,argsCloned.shift())}msg=argsCloned.length?format(argsCloned.shift(),argsCloned):undefined}else if(typeof msg==="string")msg=format(argsCloned.shift(),argsCloned);if(msg!==undefined)o.msg=msg;return o}function applySerializers(args,serialize,serializers,stdErrSerialize){for(const i in args){if(stdErrSerialize&&args[i]instanceof Error){args[i]=pino.stdSerializers.err(args[i])}else if(typeof args[i]==="object"&&!Array.isArray(args[i])){for(const k in args[i]){if(serialize&&serialize.indexOf(k)>-1&&k in serializers){args[i][k]=serializers[k](args[i][k])}}}}}function bind(parent,bindings,level){return function(){const args=new Array(1+arguments.length);args[0]=bindings;for(var i=1;i<args.length;i++){args[i]=arguments[i-1]}return parent[level].apply(this,args)}}function transmit(logger,opts,args){const send=opts.send;const ts=opts.ts;const methodLevel=opts.methodLevel;const methodValue=opts.methodValue;const val=opts.val;const bindings=logger._logEvent.bindings;applySerializers(args,logger._serialize||Object.keys(logger.serializers),logger.serializers,logger._stdErrSerialize===undefined?true:logger._stdErrSerialize);logger._logEvent.ts=ts;logger._logEvent.messages=args.filter((function(arg){return bindings.indexOf(arg)===-1}));logger._logEvent.level.label=methodLevel;logger._logEvent.level.value=methodValue;send(methodLevel,logger._logEvent,val);logger._logEvent=createLogEventShape(bindings)}function createLogEventShape(bindings){return{ts:0,messages:[],bindings:bindings||[],level:{label:"",value:0}}}function asErrValue(err){const obj={type:err.constructor.name,msg:err.message,stack:err.stack};for(const key in err){if(obj[key]===undefined){obj[key]=err[key]}}return obj}function getTimeFunction(opts){if(typeof opts.timestamp==="function"){return opts.timestamp}if(opts.timestamp===false){return nullTime}return epochTime}function mock(){return{}}function passthrough(a){return a}function noop(){}function nullTime(){return false}function epochTime(){return Date.now()}function unixTime(){return Math.round(Date.now()/1e3)}function isoTime(){return new Date(Date.now()).toISOString()}function pfGlobalThisOrFallback(){function defd(o){return typeof o!=="undefined"&&o}try{if(typeof globalThis!=="undefined")return globalThis;Object.defineProperty(Object.prototype,"globalThis",{get:function(){delete Object.prototype.globalThis;return this.globalThis=this},configurable:true});return globalThis}catch(e){return defd(self)||defd(window)||defd(this)||{}}}},94440:module=>{"use strict";function tryStringify(o){try{return JSON.stringify(o)}catch(e){return'"[Circular]"'}}module.exports=format;function format(f,args,opts){var ss=opts&&opts.stringify||tryStringify;var offset=1;if(typeof f==="object"&&f!==null){var len=args.length+offset;if(len===1)return f;var objects=new Array(len);objects[0]=ss(f);for(var index=1;index<len;index++){objects[index]=ss(args[index])}return objects.join(" ")}if(typeof f!=="string"){return f}var argLen=args.length;if(argLen===0)return f;var str="";var a=1-offset;var lastPos=-1;var flen=f&&f.length||0;for(var i=0;i<flen;){if(f.charCodeAt(i)===37&&i+1<flen){lastPos=lastPos>-1?lastPos:0;switch(f.charCodeAt(i+1)){case 100:case 102:if(a>=argLen)break;if(args[a]==null)break;if(lastPos<i)str+=f.slice(lastPos,i);str+=Number(args[a]);lastPos=i+2;i++;break;case 105:if(a>=argLen)break;if(args[a]==null)break;if(lastPos<i)str+=f.slice(lastPos,i);str+=Math.floor(Number(args[a]));lastPos=i+2;i++;break;case 79:case 111:case 106:if(a>=argLen)break;if(args[a]===undefined)break;if(lastPos<i)str+=f.slice(lastPos,i);var type=typeof args[a];if(type==="string"){str+="'"+args[a]+"'";lastPos=i+2;i++;break}if(type==="function"){str+=args[a].name||"<anonymous>";lastPos=i+2;i++;break}str+=ss(args[a]);lastPos=i+2;i++;break;case 115:if(a>=argLen)break;if(lastPos<i)str+=f.slice(lastPos,i);str+=String(args[a]);lastPos=i+2;i++;break;case 37:if(lastPos<i)str+=f.slice(lastPos,i);str+="%";lastPos=i+2;i++;a--;break}++a}++i}if(lastPos===-1)return f;else if(lastPos<flen){str+=f.slice(lastPos)}return str}},81303:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});function safeJsonParse(value){if(typeof value!=="string"){throw new Error(`Cannot safe json parse value of type ${typeof value}`)}try{return JSON.parse(value)}catch(_a){return value}}exports.safeJsonParse=safeJsonParse;function safeJsonStringify(value){return typeof value==="string"?value:JSON.stringify(value,((key,value)=>typeof value==="undefined"?null:value))}exports.safeJsonStringify=safeJsonStringify}}]);